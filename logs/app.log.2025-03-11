2025-03-11 13:41:27,503 - main - INFO - 환경변수 및 설정 초기화 중...
2025-03-11 13:41:27,506 - main - INFO - Bybit 테스트넷 클라이언트 초기화 중...
2025-03-11 13:41:27,885 - main - INFO - 서비스 초기화 중...
2025-03-11 13:41:27,885 - main - INFO - 마켓 데이터 서비스 중...
2025-03-11 13:41:30,499 - services.market_data_service - INFO - 마켓 데이터 로드 완료
2025-03-11 13:41:30,948 - telegram_bot.bot - INFO - 텔레그램 설정 로드:
2025-03-11 13:41:30,948 - telegram_bot.bot - INFO - - admin_chat_id: 583881676
2025-03-11 13:41:30,949 - telegram_bot.bot - INFO - - alert_chat_ids: [-1002464784986]
2025-03-11 13:41:31,795 - telegram_bot.monitors.auto_analyzer - INFO - 다음 실행 예정 시간: 2025-03-11 14:00:00
2025-03-11 13:41:31,800 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-03-11 13:41:31,800 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 설정 완료
2025-03-11 13:41:31,802 - telegram_bot.bot - INFO - 봇 초기화 시작...
2025-03-11 13:41:31,804 - services.trade_history_service - INFO - === 포지션 정보 초기화 시작 ===
2025-03-11 13:41:31,804 - services.trade_history_service - INFO - 조회 기간: 2024-12-11 ~ 2025-03-11
2025-03-11 13:41:31,804 - services.trade_store - INFO - 날짜 범위 조회: 20241211 ~ 20250311
2025-03-11 13:41:31,808 - services.trade_store - INFO - 날짜: 20241211, 포지션 수: 1건
2025-03-11 13:41:31,809 - services.trade_store - INFO - 날짜: 20241212, 포지션 수: 1건
2025-03-11 13:41:31,811 - services.trade_store - INFO - 날짜: 20241213, 포지션 수: 2건
2025-03-11 13:41:31,813 - services.trade_store - INFO - 날짜: 20241214, 포지션 수: 2건
2025-03-11 13:41:31,813 - services.trade_store - INFO - 날짜: 20241215, 포지션 수: 0건
2025-03-11 13:41:31,814 - services.trade_store - INFO - 날짜: 20241216, 포지션 수: 0건
2025-03-11 13:41:31,816 - services.trade_store - INFO - 날짜: 20241217, 포지션 수: 10건
2025-03-11 13:41:31,818 - services.trade_store - INFO - 날짜: 20241218, 포지션 수: 5건
2025-03-11 13:41:31,818 - services.trade_store - INFO - 날짜: 20241219, 포지션 수: 1건
2025-03-11 13:41:31,820 - services.trade_store - INFO - 날짜: 20241220, 포지션 수: 31건
2025-03-11 13:41:31,822 - services.trade_store - INFO - 날짜: 20241221, 포지션 수: 3건
2025-03-11 13:41:31,823 - services.trade_store - INFO - 날짜: 20241222, 포지션 수: 10건
2025-03-11 13:41:31,825 - services.trade_store - INFO - 날짜: 20241223, 포지션 수: 7건
2025-03-11 13:41:31,826 - services.trade_store - INFO - 날짜: 20241224, 포지션 수: 11건
2025-03-11 13:41:31,827 - services.trade_store - INFO - 날짜: 20241225, 포지션 수: 2건
2025-03-11 13:41:31,829 - services.trade_store - INFO - 날짜: 20241226, 포지션 수: 7건
2025-03-11 13:41:31,859 - services.trade_store - INFO - 날짜: 20241227, 포지션 수: 7건
2025-03-11 13:41:31,861 - services.trade_store - INFO - 날짜: 20241228, 포지션 수: 4건
2025-03-11 13:41:31,861 - services.trade_store - INFO - 날짜: 20241229, 포지션 수: 0건
2025-03-11 13:41:31,863 - services.trade_store - INFO - 날짜: 20241230, 포지션 수: 15건
2025-03-11 13:41:31,865 - services.trade_store - INFO - 날짜: 20241231, 포지션 수: 8건
2025-03-11 13:41:31,866 - services.trade_store - INFO - 날짜: 20250101, 포지션 수: 0건
2025-03-11 13:41:31,866 - services.trade_store - INFO - 날짜: 20250102, 포지션 수: 0건
2025-03-11 13:41:31,867 - services.trade_store - INFO - 날짜: 20250103, 포지션 수: 0건
2025-03-11 13:41:31,867 - services.trade_store - INFO - 날짜: 20250104, 포지션 수: 0건
2025-03-11 13:41:31,868 - services.trade_store - INFO - 날짜: 20250105, 포지션 수: 0건
2025-03-11 13:41:31,868 - services.trade_store - INFO - 날짜: 20250106, 포지션 수: 0건
2025-03-11 13:41:31,868 - services.trade_store - INFO - 날짜: 20250107, 포지션 수: 0건
2025-03-11 13:41:31,868 - services.trade_store - INFO - 날짜: 20250108, 포지션 수: 0건
2025-03-11 13:41:31,869 - services.trade_store - INFO - 날짜: 20250109, 포지션 수: 0건
2025-03-11 13:41:31,869 - services.trade_store - INFO - 날짜: 20250110, 포지션 수: 0건
2025-03-11 13:41:31,870 - services.trade_store - INFO - 날짜: 20250111, 포지션 수: 0건
2025-03-11 13:41:31,870 - services.trade_store - INFO - 날짜: 20250112, 포지션 수: 0건
2025-03-11 13:41:31,871 - services.trade_store - INFO - 날짜: 20250113, 포지션 수: 0건
2025-03-11 13:41:31,871 - services.trade_store - INFO - 날짜: 20250114, 포지션 수: 0건
2025-03-11 13:41:31,871 - services.trade_store - INFO - 날짜: 20250115, 포지션 수: 0건
2025-03-11 13:41:31,872 - services.trade_store - INFO - 날짜: 20250116, 포지션 수: 0건
2025-03-11 13:41:31,872 - services.trade_store - INFO - 날짜: 20250117, 포지션 수: 0건
2025-03-11 13:41:31,872 - services.trade_store - INFO - 날짜: 20250118, 포지션 수: 0건
2025-03-11 13:41:31,873 - services.trade_store - INFO - 날짜: 20250119, 포지션 수: 0건
2025-03-11 13:41:31,873 - services.trade_store - INFO - 날짜: 20250120, 포지션 수: 0건
2025-03-11 13:41:31,873 - services.trade_store - INFO - 날짜: 20250121, 포지션 수: 0건
2025-03-11 13:41:31,874 - services.trade_store - INFO - 날짜: 20250122, 포지션 수: 0건
2025-03-11 13:41:31,874 - services.trade_store - INFO - 날짜: 20250123, 포지션 수: 0건
2025-03-11 13:41:31,874 - services.trade_store - INFO - 날짜: 20250124, 포지션 수: 0건
2025-03-11 13:41:31,876 - services.trade_store - INFO - 날짜: 20250125, 포지션 수: 0건
2025-03-11 13:41:31,876 - services.trade_store - INFO - 날짜: 20250126, 포지션 수: 0건
2025-03-11 13:41:31,877 - services.trade_store - INFO - 날짜: 20250127, 포지션 수: 0건
2025-03-11 13:41:31,878 - services.trade_store - INFO - 날짜: 20250128, 포지션 수: 0건
2025-03-11 13:41:31,879 - services.trade_store - INFO - 날짜: 20250129, 포지션 수: 0건
2025-03-11 13:41:31,879 - services.trade_store - INFO - 날짜: 20250130, 포지션 수: 0건
2025-03-11 13:41:31,881 - services.trade_store - INFO - 날짜: 20250131, 포지션 수: 0건
2025-03-11 13:41:31,884 - services.trade_store - INFO - 날짜: 20250201, 포지션 수: 0건
2025-03-11 13:41:31,889 - services.trade_store - INFO - 날짜: 20250202, 포지션 수: 0건
2025-03-11 13:41:31,891 - services.trade_store - INFO - 날짜: 20250203, 포지션 수: 0건
2025-03-11 13:41:31,894 - services.trade_store - INFO - 날짜: 20250204, 포지션 수: 0건
2025-03-11 13:41:31,895 - services.trade_store - INFO - 날짜: 20250205, 포지션 수: 0건
2025-03-11 13:41:31,895 - services.trade_store - INFO - 날짜: 20250206, 포지션 수: 0건
2025-03-11 13:41:31,896 - services.trade_store - INFO - 날짜: 20250207, 포지션 수: 0건
2025-03-11 13:41:31,899 - services.trade_store - INFO - 날짜: 20250208, 포지션 수: 0건
2025-03-11 13:41:31,902 - services.trade_store - INFO - 날짜: 20250209, 포지션 수: 0건
2025-03-11 13:41:31,903 - services.trade_store - INFO - 날짜: 20250210, 포지션 수: 0건
2025-03-11 13:41:31,904 - services.trade_store - INFO - 날짜: 20250211, 포지션 수: 0건
2025-03-11 13:41:31,904 - services.trade_store - INFO - 날짜: 20250212, 포지션 수: 0건
2025-03-11 13:41:31,905 - services.trade_store - INFO - 날짜: 20250213, 포지션 수: 0건
2025-03-11 13:41:31,906 - services.trade_store - INFO - 날짜: 20250214, 포지션 수: 2건
2025-03-11 13:41:31,907 - services.trade_store - INFO - 날짜: 20250215, 포지션 수: 2건
2025-03-11 13:41:31,909 - services.trade_store - INFO - 날짜: 20250216, 포지션 수: 0건
2025-03-11 13:41:31,913 - services.trade_store - INFO - 날짜: 20250217, 포지션 수: 2건
2025-03-11 13:41:31,918 - services.trade_store - INFO - 날짜: 20250218, 포지션 수: 0건
2025-03-11 13:41:31,918 - services.trade_store - INFO - 날짜: 20250219, 포지션 수: 0건
2025-03-11 13:41:31,919 - services.trade_store - INFO - 날짜: 20250220, 포지션 수: 0건
2025-03-11 13:41:31,921 - services.trade_store - INFO - 날짜: 20250221, 포지션 수: 2건
2025-03-11 13:41:31,921 - services.trade_store - INFO - 날짜: 20250222, 포지션 수: 0건
2025-03-11 13:41:31,921 - services.trade_store - INFO - 날짜: 20250223, 포지션 수: 0건
2025-03-11 13:41:31,923 - services.trade_store - INFO - 날짜: 20250224, 포지션 수: 0건
2025-03-11 13:41:31,923 - services.trade_store - INFO - 날짜: 20250225, 포지션 수: 0건
2025-03-11 13:41:31,923 - services.trade_store - INFO - 날짜: 20250226, 포지션 수: 0건
2025-03-11 13:41:31,923 - services.trade_store - INFO - 날짜: 20250227, 포지션 수: 0건
2025-03-11 13:41:31,923 - services.trade_store - INFO - 날짜: 20250228, 포지션 수: 0건
2025-03-11 13:41:31,925 - services.trade_store - INFO - 날짜: 20250301, 포지션 수: 0건
2025-03-11 13:41:31,925 - services.trade_store - INFO - 날짜: 20250302, 포지션 수: 0건
2025-03-11 13:41:31,925 - services.trade_store - INFO - 날짜: 20250303, 포지션 수: 0건
2025-03-11 13:41:31,927 - services.trade_store - INFO - 날짜: 20250304, 포지션 수: 0건
2025-03-11 13:41:31,929 - services.trade_store - INFO - 날짜: 20250305, 포지션 수: 0건
2025-03-11 13:41:31,934 - services.trade_store - INFO - 날짜: 20250306, 포지션 수: 0건
2025-03-11 13:41:31,942 - services.trade_store - INFO - 날짜: 20250307, 포지션 수: 0건
2025-03-11 13:41:31,950 - services.trade_store - INFO - 날짜: 20250308, 포지션 수: 0건
2025-03-11 13:41:31,952 - services.trade_store - INFO - 날짜: 20250309, 포지션 수: 0건
2025-03-11 13:41:31,954 - services.trade_store - INFO - 날짜: 20250310, 포지션 수: 0건
2025-03-11 13:41:31,955 - services.trade_store - INFO - 날짜: 20250311, 포지션 수: 0건
2025-03-11 13:41:31,955 - services.trade_store - INFO - 총 135건의 포지션 데이터 로드됨
2025-03-11 13:41:31,955 - services.trade_history_service - INFO - 기존 데이터: 135건
2025-03-11 13:41:31,956 - telegram_bot.bot - INFO - Application 빌드 시작...
2025-03-11 13:41:33,245 - telegram_bot.monitors.auto_analyzer - INFO - 다음 실행 예정 시간: 2025-03-11 14:00:00
2025-03-11 13:41:33,246 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-03-11 13:41:33,250 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 설정 완료
2025-03-11 13:41:33,252 - telegram_bot.bot - INFO - 핸들러 초기화 완료
2025-03-11 13:41:33,256 - telegram_bot.bot - INFO - 봇 초기화 완료, 시작 준비 중...
2025-03-11 13:41:33,270 - telegram_bot.bot - INFO - 봇 시작 시도...
2025-03-11 13:41:33,271 - telegram_bot.bot - INFO - === 봇 시작 시도 ===
2025-03-11 13:41:34,389 - apscheduler.scheduler - INFO - Scheduler started
2025-03-11 13:41:34,389 - telegram.ext.Application - INFO - Application started
2025-03-11 13:41:34,662 - telegram_bot.bot - INFO - 🤖 바이빗 트레이딩 봇이 시작되었습니다
2025-03-11 13:44:06,750 - main - INFO - 환경변수 및 설정 초기화 중...
2025-03-11 13:44:06,750 - main - INFO - Bybit 테스트넷 클라이언트 초기화 중...
2025-03-11 13:44:07,350 - main - INFO - 서비스 초기화 중...
2025-03-11 13:44:07,350 - main - INFO - 마켓 데이터 서비스 중...
2025-03-11 13:44:09,882 - services.market_data_service - INFO - 마켓 데이터 로드 완료
2025-03-11 13:44:10,445 - telegram_bot.bot - INFO - 텔레그램 설정 로드:
2025-03-11 13:44:10,445 - telegram_bot.bot - INFO - - admin_chat_id: 583881676
2025-03-11 13:44:10,447 - telegram_bot.bot - INFO - - alert_chat_ids: [-1002464784986]
2025-03-11 13:44:11,321 - telegram_bot.monitors.auto_analyzer - INFO - AutoAnalyzer 초기화 시작
2025-03-11 13:44:11,323 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 설정 시작
2025-03-11 13:44:11,323 - telegram_bot.monitors.auto_analyzer - INFO - 다음 실행 예정 시간: 2025-03-11 14:00:00
2025-03-11 13:44:11,323 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-03-11 13:44:11,323 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 설정 완료
2025-03-11 13:44:11,330 - telegram_bot.bot - INFO - 봇 초기화 시작...
2025-03-11 13:44:11,330 - services.trade_history_service - INFO - === 포지션 정보 초기화 시작 ===
2025-03-11 13:44:11,330 - services.trade_history_service - INFO - 조회 기간: 2024-12-11 ~ 2025-03-11
2025-03-11 13:44:11,330 - services.trade_store - INFO - 날짜 범위 조회: 20241211 ~ 20250311
2025-03-11 13:44:11,332 - services.trade_store - INFO - 날짜: 20241211, 포지션 수: 1건
2025-03-11 13:44:11,333 - services.trade_store - INFO - 날짜: 20241212, 포지션 수: 1건
2025-03-11 13:44:11,336 - services.trade_store - INFO - 날짜: 20241213, 포지션 수: 2건
2025-03-11 13:44:11,337 - services.trade_store - INFO - 날짜: 20241214, 포지션 수: 2건
2025-03-11 13:44:11,338 - services.trade_store - INFO - 날짜: 20241215, 포지션 수: 0건
2025-03-11 13:44:11,338 - services.trade_store - INFO - 날짜: 20241216, 포지션 수: 0건
2025-03-11 13:44:11,340 - services.trade_store - INFO - 날짜: 20241217, 포지션 수: 10건
2025-03-11 13:44:11,341 - services.trade_store - INFO - 날짜: 20241218, 포지션 수: 5건
2025-03-11 13:44:11,342 - services.trade_store - INFO - 날짜: 20241219, 포지션 수: 1건
2025-03-11 13:44:11,344 - services.trade_store - INFO - 날짜: 20241220, 포지션 수: 31건
2025-03-11 13:44:11,345 - services.trade_store - INFO - 날짜: 20241221, 포지션 수: 3건
2025-03-11 13:44:11,348 - services.trade_store - INFO - 날짜: 20241222, 포지션 수: 10건
2025-03-11 13:44:11,350 - services.trade_store - INFO - 날짜: 20241223, 포지션 수: 7건
2025-03-11 13:44:11,351 - services.trade_store - INFO - 날짜: 20241224, 포지션 수: 11건
2025-03-11 13:44:11,352 - services.trade_store - INFO - 날짜: 20241225, 포지션 수: 2건
2025-03-11 13:44:11,353 - services.trade_store - INFO - 날짜: 20241226, 포지션 수: 7건
2025-03-11 13:44:11,355 - services.trade_store - INFO - 날짜: 20241227, 포지션 수: 7건
2025-03-11 13:44:11,355 - services.trade_store - INFO - 날짜: 20241228, 포지션 수: 4건
2025-03-11 13:44:11,355 - services.trade_store - INFO - 날짜: 20241229, 포지션 수: 0건
2025-03-11 13:44:11,357 - services.trade_store - INFO - 날짜: 20241230, 포지션 수: 15건
2025-03-11 13:44:11,359 - services.trade_store - INFO - 날짜: 20241231, 포지션 수: 8건
2025-03-11 13:44:11,361 - services.trade_store - INFO - 날짜: 20250101, 포지션 수: 0건
2025-03-11 13:44:11,361 - services.trade_store - INFO - 날짜: 20250102, 포지션 수: 0건
2025-03-11 13:44:11,362 - services.trade_store - INFO - 날짜: 20250103, 포지션 수: 0건
2025-03-11 13:44:11,362 - services.trade_store - INFO - 날짜: 20250104, 포지션 수: 0건
2025-03-11 13:44:11,363 - services.trade_store - INFO - 날짜: 20250105, 포지션 수: 0건
2025-03-11 13:44:11,363 - services.trade_store - INFO - 날짜: 20250106, 포지션 수: 0건
2025-03-11 13:44:11,363 - services.trade_store - INFO - 날짜: 20250107, 포지션 수: 0건
2025-03-11 13:44:11,365 - services.trade_store - INFO - 날짜: 20250108, 포지션 수: 0건
2025-03-11 13:44:11,365 - services.trade_store - INFO - 날짜: 20250109, 포지션 수: 0건
2025-03-11 13:44:11,366 - services.trade_store - INFO - 날짜: 20250110, 포지션 수: 0건
2025-03-11 13:44:11,366 - services.trade_store - INFO - 날짜: 20250111, 포지션 수: 0건
2025-03-11 13:44:11,366 - services.trade_store - INFO - 날짜: 20250112, 포지션 수: 0건
2025-03-11 13:44:11,367 - services.trade_store - INFO - 날짜: 20250113, 포지션 수: 0건
2025-03-11 13:44:11,367 - services.trade_store - INFO - 날짜: 20250114, 포지션 수: 0건
2025-03-11 13:44:11,368 - services.trade_store - INFO - 날짜: 20250115, 포지션 수: 0건
2025-03-11 13:44:11,368 - services.trade_store - INFO - 날짜: 20250116, 포지션 수: 0건
2025-03-11 13:44:11,369 - services.trade_store - INFO - 날짜: 20250117, 포지션 수: 0건
2025-03-11 13:44:11,370 - services.trade_store - INFO - 날짜: 20250118, 포지션 수: 0건
2025-03-11 13:44:11,370 - services.trade_store - INFO - 날짜: 20250119, 포지션 수: 0건
2025-03-11 13:44:11,371 - services.trade_store - INFO - 날짜: 20250120, 포지션 수: 0건
2025-03-11 13:44:11,371 - services.trade_store - INFO - 날짜: 20250121, 포지션 수: 0건
2025-03-11 13:44:11,373 - services.trade_store - INFO - 날짜: 20250122, 포지션 수: 0건
2025-03-11 13:44:11,373 - services.trade_store - INFO - 날짜: 20250123, 포지션 수: 0건
2025-03-11 13:44:11,373 - services.trade_store - INFO - 날짜: 20250124, 포지션 수: 0건
2025-03-11 13:44:11,373 - services.trade_store - INFO - 날짜: 20250125, 포지션 수: 0건
2025-03-11 13:44:11,373 - services.trade_store - INFO - 날짜: 20250126, 포지션 수: 0건
2025-03-11 13:44:11,373 - services.trade_store - INFO - 날짜: 20250127, 포지션 수: 0건
2025-03-11 13:44:11,376 - services.trade_store - INFO - 날짜: 20250128, 포지션 수: 0건
2025-03-11 13:44:11,377 - services.trade_store - INFO - 날짜: 20250129, 포지션 수: 0건
2025-03-11 13:44:11,377 - services.trade_store - INFO - 날짜: 20250130, 포지션 수: 0건
2025-03-11 13:44:11,378 - services.trade_store - INFO - 날짜: 20250131, 포지션 수: 0건
2025-03-11 13:44:11,379 - services.trade_store - INFO - 날짜: 20250201, 포지션 수: 0건
2025-03-11 13:44:11,380 - services.trade_store - INFO - 날짜: 20250202, 포지션 수: 0건
2025-03-11 13:44:11,381 - services.trade_store - INFO - 날짜: 20250203, 포지션 수: 0건
2025-03-11 13:44:11,381 - services.trade_store - INFO - 날짜: 20250204, 포지션 수: 0건
2025-03-11 13:44:11,382 - services.trade_store - INFO - 날짜: 20250205, 포지션 수: 0건
2025-03-11 13:44:11,386 - services.trade_store - INFO - 날짜: 20250206, 포지션 수: 0건
2025-03-11 13:44:11,386 - services.trade_store - INFO - 날짜: 20250207, 포지션 수: 0건
2025-03-11 13:44:11,386 - services.trade_store - INFO - 날짜: 20250208, 포지션 수: 0건
2025-03-11 13:44:11,388 - services.trade_store - INFO - 날짜: 20250209, 포지션 수: 0건
2025-03-11 13:44:11,388 - services.trade_store - INFO - 날짜: 20250210, 포지션 수: 0건
2025-03-11 13:44:11,388 - services.trade_store - INFO - 날짜: 20250211, 포지션 수: 0건
2025-03-11 13:44:11,388 - services.trade_store - INFO - 날짜: 20250212, 포지션 수: 0건
2025-03-11 13:44:11,389 - services.trade_store - INFO - 날짜: 20250213, 포지션 수: 0건
2025-03-11 13:44:11,392 - services.trade_store - INFO - 날짜: 20250214, 포지션 수: 2건
2025-03-11 13:44:11,394 - services.trade_store - INFO - 날짜: 20250215, 포지션 수: 2건
2025-03-11 13:44:11,395 - services.trade_store - INFO - 날짜: 20250216, 포지션 수: 0건
2025-03-11 13:44:11,396 - services.trade_store - INFO - 날짜: 20250217, 포지션 수: 2건
2025-03-11 13:44:11,396 - services.trade_store - INFO - 날짜: 20250218, 포지션 수: 0건
2025-03-11 13:44:11,396 - services.trade_store - INFO - 날짜: 20250219, 포지션 수: 0건
2025-03-11 13:44:11,398 - services.trade_store - INFO - 날짜: 20250220, 포지션 수: 0건
2025-03-11 13:44:11,398 - services.trade_store - INFO - 날짜: 20250221, 포지션 수: 2건
2025-03-11 13:44:11,399 - services.trade_store - INFO - 날짜: 20250222, 포지션 수: 0건
2025-03-11 13:44:11,400 - services.trade_store - INFO - 날짜: 20250223, 포지션 수: 0건
2025-03-11 13:44:11,400 - services.trade_store - INFO - 날짜: 20250224, 포지션 수: 0건
2025-03-11 13:44:11,401 - services.trade_store - INFO - 날짜: 20250225, 포지션 수: 0건
2025-03-11 13:44:11,401 - services.trade_store - INFO - 날짜: 20250226, 포지션 수: 0건
2025-03-11 13:44:11,401 - services.trade_store - INFO - 날짜: 20250227, 포지션 수: 0건
2025-03-11 13:44:11,402 - services.trade_store - INFO - 날짜: 20250228, 포지션 수: 0건
2025-03-11 13:44:11,402 - services.trade_store - INFO - 날짜: 20250301, 포지션 수: 0건
2025-03-11 13:44:11,402 - services.trade_store - INFO - 날짜: 20250302, 포지션 수: 0건
2025-03-11 13:44:11,403 - services.trade_store - INFO - 날짜: 20250303, 포지션 수: 0건
2025-03-11 13:44:11,403 - services.trade_store - INFO - 날짜: 20250304, 포지션 수: 0건
2025-03-11 13:44:11,404 - services.trade_store - INFO - 날짜: 20250305, 포지션 수: 0건
2025-03-11 13:44:11,404 - services.trade_store - INFO - 날짜: 20250306, 포지션 수: 0건
2025-03-11 13:44:11,404 - services.trade_store - INFO - 날짜: 20250307, 포지션 수: 0건
2025-03-11 13:44:11,405 - services.trade_store - INFO - 날짜: 20250308, 포지션 수: 0건
2025-03-11 13:44:11,405 - services.trade_store - INFO - 날짜: 20250309, 포지션 수: 0건
2025-03-11 13:44:11,407 - services.trade_store - INFO - 날짜: 20250310, 포지션 수: 0건
2025-03-11 13:44:11,407 - services.trade_store - INFO - 날짜: 20250311, 포지션 수: 0건
2025-03-11 13:44:11,407 - services.trade_store - INFO - 총 135건의 포지션 데이터 로드됨
2025-03-11 13:44:11,408 - services.trade_history_service - INFO - 기존 데이터: 135건
2025-03-11 13:44:11,408 - telegram_bot.bot - INFO - Application 빌드 시작...
2025-03-11 13:44:12,543 - telegram_bot.monitors.auto_analyzer - INFO - AutoAnalyzer 초기화 시작
2025-03-11 13:44:12,543 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 설정 시작
2025-03-11 13:44:12,543 - telegram_bot.monitors.auto_analyzer - INFO - 다음 실행 예정 시간: 2025-03-11 14:00:00
2025-03-11 13:44:12,543 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-03-11 13:44:12,553 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 설정 완료
2025-03-11 13:44:12,553 - telegram_bot.bot - INFO - 핸들러 초기화 완료
2025-03-11 13:44:12,553 - telegram_bot.bot - INFO - 봇 초기화 완료, 시작 준비 중...
2025-03-11 13:44:12,553 - telegram_bot.bot - INFO - 봇 시작 시도...
2025-03-11 13:44:12,554 - telegram_bot.bot - INFO - === 봇 시작 시도 ===
2025-03-11 13:44:13,657 - apscheduler.scheduler - INFO - Scheduler started
2025-03-11 13:44:13,657 - telegram.ext.Application - INFO - Application started
2025-03-11 13:44:13,926 - telegram_bot.bot - INFO - 🤖 바이빗 트레이딩 봇이 시작되었습니다
2025-03-11 13:48:39,478 - main - INFO - 환경변수 및 설정 초기화 중...
2025-03-11 13:48:39,478 - main - INFO - Bybit 테스트넷 클라이언트 초기화 중...
2025-03-11 13:48:39,703 - main - INFO - 서비스 초기화 중...
2025-03-11 13:48:39,703 - main - INFO - 마켓 데이터 서비스 중...
2025-03-11 13:48:41,351 - services.market_data_service - INFO - 마켓 데이터 로드 완료
2025-03-11 13:48:41,593 - telegram_bot.bot - INFO - 텔레그램 설정 로드:
2025-03-11 13:48:41,593 - telegram_bot.bot - INFO - - admin_chat_id: 583881676
2025-03-11 13:48:41,593 - telegram_bot.bot - INFO - - alert_chat_ids: [-1002464784986]
2025-03-11 13:48:42,036 - telegram_bot.monitors.auto_analyzer - INFO - AutoAnalyzer 초기화 시작
2025-03-11 13:48:42,036 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 설정 시작
2025-03-11 13:48:42,042 - telegram_bot.monitors.auto_analyzer - INFO - 다음 실행 예정 시간: 2025-03-11 14:00:00
2025-03-11 13:48:42,046 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-03-11 13:48:42,049 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 설정 완료
2025-03-11 13:48:42,050 - telegram_bot.bot - INFO - 봇 초기화 시작...
2025-03-11 13:48:42,050 - services.trade_history_service - INFO - === 포지션 정보 초기화 시작 ===
2025-03-11 13:48:42,050 - services.trade_history_service - INFO - 조회 기간: 2024-12-11 ~ 2025-03-11
2025-03-11 13:48:42,051 - services.trade_store - INFO - 날짜 범위 조회: 20241211 ~ 20250311
2025-03-11 13:48:42,051 - services.trade_store - INFO - 날짜: 20241211, 포지션 수: 1건
2025-03-11 13:48:42,052 - services.trade_store - INFO - 날짜: 20241212, 포지션 수: 1건
2025-03-11 13:48:42,052 - services.trade_store - INFO - 날짜: 20241213, 포지션 수: 2건
2025-03-11 13:48:42,053 - services.trade_store - INFO - 날짜: 20241214, 포지션 수: 2건
2025-03-11 13:48:42,053 - services.trade_store - INFO - 날짜: 20241215, 포지션 수: 0건
2025-03-11 13:48:42,053 - services.trade_store - INFO - 날짜: 20241216, 포지션 수: 0건
2025-03-11 13:48:42,053 - services.trade_store - INFO - 날짜: 20241217, 포지션 수: 10건
2025-03-11 13:48:42,054 - services.trade_store - INFO - 날짜: 20241218, 포지션 수: 5건
2025-03-11 13:48:42,054 - services.trade_store - INFO - 날짜: 20241219, 포지션 수: 1건
2025-03-11 13:48:42,054 - services.trade_store - INFO - 날짜: 20241220, 포지션 수: 31건
2025-03-11 13:48:42,054 - services.trade_store - INFO - 날짜: 20241221, 포지션 수: 3건
2025-03-11 13:48:42,054 - services.trade_store - INFO - 날짜: 20241222, 포지션 수: 10건
2025-03-11 13:48:42,054 - services.trade_store - INFO - 날짜: 20241223, 포지션 수: 7건
2025-03-11 13:48:42,054 - services.trade_store - INFO - 날짜: 20241224, 포지션 수: 11건
2025-03-11 13:48:42,054 - services.trade_store - INFO - 날짜: 20241225, 포지션 수: 2건
2025-03-11 13:48:42,054 - services.trade_store - INFO - 날짜: 20241226, 포지션 수: 7건
2025-03-11 13:48:42,054 - services.trade_store - INFO - 날짜: 20241227, 포지션 수: 7건
2025-03-11 13:48:42,054 - services.trade_store - INFO - 날짜: 20241228, 포지션 수: 4건
2025-03-11 13:48:42,054 - services.trade_store - INFO - 날짜: 20241229, 포지션 수: 0건
2025-03-11 13:48:42,054 - services.trade_store - INFO - 날짜: 20241230, 포지션 수: 15건
2025-03-11 13:48:42,054 - services.trade_store - INFO - 날짜: 20241231, 포지션 수: 8건
2025-03-11 13:48:42,054 - services.trade_store - INFO - 날짜: 20250101, 포지션 수: 0건
2025-03-11 13:48:42,054 - services.trade_store - INFO - 날짜: 20250102, 포지션 수: 0건
2025-03-11 13:48:42,054 - services.trade_store - INFO - 날짜: 20250103, 포지션 수: 0건
2025-03-11 13:48:42,054 - services.trade_store - INFO - 날짜: 20250104, 포지션 수: 0건
2025-03-11 13:48:42,054 - services.trade_store - INFO - 날짜: 20250105, 포지션 수: 0건
2025-03-11 13:48:42,054 - services.trade_store - INFO - 날짜: 20250106, 포지션 수: 0건
2025-03-11 13:48:42,054 - services.trade_store - INFO - 날짜: 20250107, 포지션 수: 0건
2025-03-11 13:48:42,054 - services.trade_store - INFO - 날짜: 20250108, 포지션 수: 0건
2025-03-11 13:48:42,054 - services.trade_store - INFO - 날짜: 20250109, 포지션 수: 0건
2025-03-11 13:48:42,062 - services.trade_store - INFO - 날짜: 20250110, 포지션 수: 0건
2025-03-11 13:48:42,062 - services.trade_store - INFO - 날짜: 20250111, 포지션 수: 0건
2025-03-11 13:48:42,062 - services.trade_store - INFO - 날짜: 20250112, 포지션 수: 0건
2025-03-11 13:48:42,062 - services.trade_store - INFO - 날짜: 20250113, 포지션 수: 0건
2025-03-11 13:48:42,062 - services.trade_store - INFO - 날짜: 20250114, 포지션 수: 0건
2025-03-11 13:48:42,062 - services.trade_store - INFO - 날짜: 20250115, 포지션 수: 0건
2025-03-11 13:48:42,063 - services.trade_store - INFO - 날짜: 20250116, 포지션 수: 0건
2025-03-11 13:48:42,063 - services.trade_store - INFO - 날짜: 20250117, 포지션 수: 0건
2025-03-11 13:48:42,063 - services.trade_store - INFO - 날짜: 20250118, 포지션 수: 0건
2025-03-11 13:48:42,063 - services.trade_store - INFO - 날짜: 20250119, 포지션 수: 0건
2025-03-11 13:48:42,063 - services.trade_store - INFO - 날짜: 20250120, 포지션 수: 0건
2025-03-11 13:48:42,064 - services.trade_store - INFO - 날짜: 20250121, 포지션 수: 0건
2025-03-11 13:48:42,064 - services.trade_store - INFO - 날짜: 20250122, 포지션 수: 0건
2025-03-11 13:48:42,064 - services.trade_store - INFO - 날짜: 20250123, 포지션 수: 0건
2025-03-11 13:48:42,064 - services.trade_store - INFO - 날짜: 20250124, 포지션 수: 0건
2025-03-11 13:48:42,064 - services.trade_store - INFO - 날짜: 20250125, 포지션 수: 0건
2025-03-11 13:48:42,064 - services.trade_store - INFO - 날짜: 20250126, 포지션 수: 0건
2025-03-11 13:48:42,065 - services.trade_store - INFO - 날짜: 20250127, 포지션 수: 0건
2025-03-11 13:48:42,065 - services.trade_store - INFO - 날짜: 20250128, 포지션 수: 0건
2025-03-11 13:48:42,065 - services.trade_store - INFO - 날짜: 20250129, 포지션 수: 0건
2025-03-11 13:48:42,065 - services.trade_store - INFO - 날짜: 20250130, 포지션 수: 0건
2025-03-11 13:48:42,065 - services.trade_store - INFO - 날짜: 20250131, 포지션 수: 0건
2025-03-11 13:48:42,065 - services.trade_store - INFO - 날짜: 20250201, 포지션 수: 0건
2025-03-11 13:48:42,065 - services.trade_store - INFO - 날짜: 20250202, 포지션 수: 0건
2025-03-11 13:48:42,065 - services.trade_store - INFO - 날짜: 20250203, 포지션 수: 0건
2025-03-11 13:48:42,065 - services.trade_store - INFO - 날짜: 20250204, 포지션 수: 0건
2025-03-11 13:48:42,066 - services.trade_store - INFO - 날짜: 20250205, 포지션 수: 0건
2025-03-11 13:48:42,066 - services.trade_store - INFO - 날짜: 20250206, 포지션 수: 0건
2025-03-11 13:48:42,066 - services.trade_store - INFO - 날짜: 20250207, 포지션 수: 0건
2025-03-11 13:48:42,066 - services.trade_store - INFO - 날짜: 20250208, 포지션 수: 0건
2025-03-11 13:48:42,066 - services.trade_store - INFO - 날짜: 20250209, 포지션 수: 0건
2025-03-11 13:48:42,066 - services.trade_store - INFO - 날짜: 20250210, 포지션 수: 0건
2025-03-11 13:48:42,066 - services.trade_store - INFO - 날짜: 20250211, 포지션 수: 0건
2025-03-11 13:48:42,066 - services.trade_store - INFO - 날짜: 20250212, 포지션 수: 0건
2025-03-11 13:48:42,066 - services.trade_store - INFO - 날짜: 20250213, 포지션 수: 0건
2025-03-11 13:48:42,067 - services.trade_store - INFO - 날짜: 20250214, 포지션 수: 2건
2025-03-11 13:48:42,067 - services.trade_store - INFO - 날짜: 20250215, 포지션 수: 2건
2025-03-11 13:48:42,067 - services.trade_store - INFO - 날짜: 20250216, 포지션 수: 0건
2025-03-11 13:48:42,067 - services.trade_store - INFO - 날짜: 20250217, 포지션 수: 2건
2025-03-11 13:48:42,067 - services.trade_store - INFO - 날짜: 20250218, 포지션 수: 0건
2025-03-11 13:48:42,068 - services.trade_store - INFO - 날짜: 20250219, 포지션 수: 0건
2025-03-11 13:48:42,068 - services.trade_store - INFO - 날짜: 20250220, 포지션 수: 0건
2025-03-11 13:48:42,068 - services.trade_store - INFO - 날짜: 20250221, 포지션 수: 2건
2025-03-11 13:48:42,068 - services.trade_store - INFO - 날짜: 20250222, 포지션 수: 0건
2025-03-11 13:48:42,068 - services.trade_store - INFO - 날짜: 20250223, 포지션 수: 0건
2025-03-11 13:48:42,068 - services.trade_store - INFO - 날짜: 20250224, 포지션 수: 0건
2025-03-11 13:48:42,068 - services.trade_store - INFO - 날짜: 20250225, 포지션 수: 0건
2025-03-11 13:48:42,069 - services.trade_store - INFO - 날짜: 20250226, 포지션 수: 0건
2025-03-11 13:48:42,069 - services.trade_store - INFO - 날짜: 20250227, 포지션 수: 0건
2025-03-11 13:48:42,069 - services.trade_store - INFO - 날짜: 20250228, 포지션 수: 0건
2025-03-11 13:48:42,069 - services.trade_store - INFO - 날짜: 20250301, 포지션 수: 0건
2025-03-11 13:48:42,069 - services.trade_store - INFO - 날짜: 20250302, 포지션 수: 0건
2025-03-11 13:48:42,069 - services.trade_store - INFO - 날짜: 20250303, 포지션 수: 0건
2025-03-11 13:48:42,069 - services.trade_store - INFO - 날짜: 20250304, 포지션 수: 0건
2025-03-11 13:48:42,069 - services.trade_store - INFO - 날짜: 20250305, 포지션 수: 0건
2025-03-11 13:48:42,071 - services.trade_store - INFO - 날짜: 20250306, 포지션 수: 0건
2025-03-11 13:48:42,071 - services.trade_store - INFO - 날짜: 20250307, 포지션 수: 0건
2025-03-11 13:48:42,071 - services.trade_store - INFO - 날짜: 20250308, 포지션 수: 0건
2025-03-11 13:48:42,071 - services.trade_store - INFO - 날짜: 20250309, 포지션 수: 0건
2025-03-11 13:48:42,071 - services.trade_store - INFO - 날짜: 20250310, 포지션 수: 0건
2025-03-11 13:48:42,071 - services.trade_store - INFO - 날짜: 20250311, 포지션 수: 0건
2025-03-11 13:48:42,071 - services.trade_store - INFO - 총 135건의 포지션 데이터 로드됨
2025-03-11 13:48:42,071 - services.trade_history_service - INFO - 기존 데이터: 135건
2025-03-11 13:48:42,071 - telegram_bot.bot - INFO - Application 빌드 시작...
2025-03-11 13:48:42,509 - telegram_bot.monitors.auto_analyzer - INFO - AutoAnalyzer 시작 요청됨
2025-03-11 13:48:42,509 - apscheduler.scheduler - INFO - Added job "AutoAnalyzer._scheduled_analysis" to job store "default"
2025-03-11 13:48:42,509 - apscheduler.scheduler - INFO - Scheduler started
2025-03-11 13:48:42,509 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 시작됨. 다음 실행 시간: 2025-03-11 14:00:00+09:00
2025-03-11 13:48:42,509 - telegram_bot.monitors.auto_analyzer - INFO - 초기 분석 실행 시작
2025-03-11 13:48:42,509 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄된 분석 시작 - 2025-03-11 13:48:42.509848
2025-03-11 13:48:42,509 - telegram_bot.monitors.auto_analyzer - INFO - 🔄' 1시간봉 분석 시작 (자동) ...
2025-03-11 13:48:42,509 - services.market_data_service - INFO - OHLCV 데이터 조회 시작 - 심볼: BTCUSDT, 시간대: 1h
2025-03-11 13:48:42,823 - ai.gpt_analyzer - INFO - 계산된 지표: ['open', 'high', 'low', 'close', 'volume', 'price_change_24h', 'volume_change_24h', 'rsi', 'macd', 'macd_signal', 'bb_upper', 'bb_middle', 'bb_lower', 'sma_10', 'sma_30', 'adx', 'di_plus', 'di_minus', 'trend', 'trend_strength', 'divergence_type', 'divergence_desc']
2025-03-11 13:48:42,823 - ai.gpt_analyzer - INFO - 시장 데이터: {'symbol': 'BTCUSDT', 'last_price': 55888.1, 'bid': 55710.0, 'ask': 55888.1, 'volume': 863393.829, 'timestamp': None}
2025-03-11 13:48:42,823 - ai.gpt_client - INFO - GPT API 호출 시작 (캐시 사용: False)
2025-03-11 13:48:42,823 - ai.gpt_client - INFO - 캐시 사용하지 않음 - 실제 API 호출
2025-03-11 13:48:45,402 - telegram_bot.formatters.storage_formatter - INFO - 1h 분석 결과 저장 완료: C:\Users\oasis\Aibybit_2\src\data\analysis\analysis_1h.json
2025-03-11 13:48:46,923 - telegram_bot.monitors.auto_analyzer - INFO - 분석 결과 position_suggestion: SELL
2025-03-11 13:48:46,924 - telegram_bot.monitors.auto_analyzer - INFO - 매매 신호 감지: SELL
2025-03-11 13:48:46,924 - order_service - INFO - 매매 신호 실행: {'position_suggestion': 'SELL', 'leverage': 5, 'position_size': 10, 'entry_price': 55888.1, 'stop_loss': 56000.0, 'take_profit1': 55000.0, 'take_profit2': 54000.0, 'reason': '하락 추세 및 부정적인 지표'}
2025-03-11 13:48:46,925 - order_service - INFO - 주문 시도: {'symbol': 'BTCUSDT', 'side': 'Sell', 'leverage': 5, 'position_size': 10, 'entry_price': 55888.1, 'stop_loss': 56000.0, 'take_profit': 55000.0, 'is_btc_unit': False}
2025-03-11 13:48:46,926 - order_service - INFO - 주문 상세 정보: {
  "symbol": "BTCUSDT",
  "side": "Sell",
  "leverage": 5,
  "position_size": 10,
  "entry_price": 55888.1,
  "stop_loss": 56000.0,
  "take_profit": 55000.0,
  "is_btc_unit": false
}
2025-03-11 13:48:46,926 - order_service - INFO - 주문 시도: {'symbol': 'BTCUSDT', 'side': 'Sell', 'leverage': 5, 'position_size': 10, 'entry_price': 55888.1, 'stop_loss': 56000.0, 'take_profit': 55000.0, 'is_btc_unit': False}
2025-03-11 13:48:47,415 - order_service - INFO - 현재 포지션: {}
2025-03-11 13:48:47,415 - order_service - INFO - 포지션 없음 - 신규 진입 시도
2025-03-11 13:48:47,415 - order_service - INFO - 신규 포지션 생성 시도: {'symbol': 'BTCUSDT', 'side': 'Sell', 'leverage': 5, 'position_size': 10, 'entry_price': 55888.1, 'stop_loss': 56000.0, 'take_profit': 55000.0, 'is_btc_unit': False}
2025-03-11 13:48:47,415 - order_service - INFO - 레버리지 설정 시도: 5x
2025-03-11 13:48:47,836 - exchange.bybit_client - INFO - 서버 시간 동기화 완료: server_time=1741668528000, local_time=1741668527836, offset=164ms
2025-03-11 13:48:48,245 - order_service - INFO - 레버리지 설정 확인: 5x
2025-03-11 13:48:48,436 - exchange.bybit_client - INFO - USDT 잔고 - 총자산: $53,354.57, 가용잔고: $0.00, 사용중: $0.00
2025-03-11 13:48:48,627 - order_service - INFO - 계산 입력값 - 총자산: $53354.56826153, 미실현손익: $0.0, 비율: 10%, 레버리지: 5배, 진입가: $55888.1
2025-03-11 13:48:48,627 - order_service - INFO - 순수 자산: $53354.56826153
2025-03-11 13:48:48,627 - order_service - INFO - 포지션 가치(USDT): $26677.284130765
2025-03-11 13:48:48,636 - order_service - INFO - 계산된 BTC 수량: 0.4773338891600359
2025-03-11 13:48:48,636 - order_service - INFO - 최종 BTC 수량(반올림): 0.477
2025-03-11 13:48:48,636 - order_service - INFO - 계산된 BTC 수량: 0.477 (총자산: $53354.56826153, 목표비율: 10%, 레버리지: 5x)
2025-03-11 13:48:48,636 - exchange.bybit_client - INFO - 주문 파라미터: {'category': 'linear', 'symbol': 'BTCUSDT', 'side': 'Sell', 'qty': '0.477', 'price': '55888.1', 'orderType': 'Limit', 'timeInForce': 'GTC', 'positionIdx': 0, 'stopLoss': '56000.0', 'takeProfit': '55000.0'}
2025-03-11 13:48:48,769 - exchange.bybit_client - INFO - 주문 API 응답: {'retCode': 0, 'retMsg': 'OK', 'result': {'orderId': '1db98d29-5349-41f7-bf31-fb60d98014b1', 'orderLinkId': ''}, 'retExtInfo': {}, 'time': 1741668528976}
2025-03-11 13:48:48,769 - order_service - INFO - 신규 포지션 생성 성공: {'category': 'linear', 'symbol': 'BTCUSDT', 'side': 'Sell', 'qty': '0.477', 'price': '55888.1', 'orderType': 'Limit', 'timeInForce': 'GTC', 'positionIdx': 0, 'stopLoss': '56000.0', 'takeProfit': '55000.0'}
2025-03-11 13:48:48,769 - order_service - INFO - 주문 결과:
2025-03-11 13:48:48,769 - order_service - INFO - {
  "retCode": 0,
  "retMsg": "OK",
  "result": {
    "orderId": "1db98d29-5349-41f7-bf31-fb60d98014b1",
    "orderLinkId": ""
  },
  "retExtInfo": {},
  "time": 1741668528976
}
2025-03-11 13:48:49,741 - telegram_bot.monitors.auto_analyzer - INFO - 초기 분석 실행 완료
2025-03-11 13:48:49,741 - telegram_bot.bot - INFO - 봇 초기화 완료, 시작 준비 중...
2025-03-11 13:48:49,741 - telegram_bot.bot - INFO - 봇 시작 시도...
2025-03-11 13:48:49,750 - telegram_bot.bot - INFO - === 봇 시작 시도 ===
2025-03-11 13:48:50,296 - apscheduler.scheduler - INFO - Scheduler started
2025-03-11 13:48:50,298 - telegram.ext.Application - INFO - Application started
2025-03-11 13:48:50,569 - telegram_bot.bot - INFO - 🤖 바이빗 트레이딩 봇이 시작되었습니다
2025-03-11 13:53:48,627 - telegram_bot.bot - INFO - 봇 실행이 취소되었습니다
2025-03-11 13:53:48,636 - telegram.ext.Application - WARNING - Fetching updates got a asyncio.CancelledError. Ignoring as this task may onlybe closed via `Application.stop`.
2025-03-11 13:54:24,176 - main - INFO - 환경변수 및 설정 초기화 중...
2025-03-11 13:54:24,176 - main - INFO - Bybit 테스트넷 클라이언트 초기화 중...
2025-03-11 13:54:24,435 - main - INFO - 서비스 초기화 중...
2025-03-11 13:54:24,435 - main - INFO - 마켓 데이터 서비스 중...
2025-03-11 13:54:26,404 - services.market_data_service - INFO - 마켓 데이터 로드 완료
2025-03-11 13:54:26,706 - telegram_bot.bot - INFO - 텔레그램 설정 로드:
2025-03-11 13:54:26,706 - telegram_bot.bot - INFO - - admin_chat_id: 583881676
2025-03-11 13:54:26,706 - telegram_bot.bot - INFO - - alert_chat_ids: [-1002464784986]
2025-03-11 13:54:27,300 - telegram_bot.monitors.auto_analyzer - INFO - AutoAnalyzer 초기화 시작
2025-03-11 13:54:27,300 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 설정 시작
2025-03-11 13:54:27,301 - telegram_bot.monitors.auto_analyzer - INFO - 다음 실행 예정 시간: 2025-03-11 14:00:00
2025-03-11 13:54:27,302 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-03-11 13:54:27,302 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 설정 완료
2025-03-11 13:54:27,303 - telegram_bot.bot - INFO - 봇 초기화 시작...
2025-03-11 13:54:27,303 - services.trade_history_service - INFO - === 포지션 정보 초기화 시작 ===
2025-03-11 13:54:27,303 - services.trade_history_service - INFO - 조회 기간: 2024-12-11 ~ 2025-03-11
2025-03-11 13:54:27,303 - services.trade_store - INFO - 날짜 범위 조회: 20241211 ~ 20250311
2025-03-11 13:54:27,304 - services.trade_store - INFO - 날짜: 20241211, 포지션 수: 1건
2025-03-11 13:54:27,304 - services.trade_store - INFO - 날짜: 20241212, 포지션 수: 1건
2025-03-11 13:54:27,304 - services.trade_store - INFO - 날짜: 20241213, 포지션 수: 2건
2025-03-11 13:54:27,305 - services.trade_store - INFO - 날짜: 20241214, 포지션 수: 2건
2025-03-11 13:54:27,305 - services.trade_store - INFO - 날짜: 20241215, 포지션 수: 0건
2025-03-11 13:54:27,305 - services.trade_store - INFO - 날짜: 20241216, 포지션 수: 0건
2025-03-11 13:54:27,306 - services.trade_store - INFO - 날짜: 20241217, 포지션 수: 10건
2025-03-11 13:54:27,306 - services.trade_store - INFO - 날짜: 20241218, 포지션 수: 5건
2025-03-11 13:54:27,306 - services.trade_store - INFO - 날짜: 20241219, 포지션 수: 1건
2025-03-11 13:54:27,307 - services.trade_store - INFO - 날짜: 20241220, 포지션 수: 31건
2025-03-11 13:54:27,307 - services.trade_store - INFO - 날짜: 20241221, 포지션 수: 3건
2025-03-11 13:54:27,307 - services.trade_store - INFO - 날짜: 20241222, 포지션 수: 10건
2025-03-11 13:54:27,309 - services.trade_store - INFO - 날짜: 20241223, 포지션 수: 7건
2025-03-11 13:54:27,309 - services.trade_store - INFO - 날짜: 20241224, 포지션 수: 11건
2025-03-11 13:54:27,310 - services.trade_store - INFO - 날짜: 20241225, 포지션 수: 2건
2025-03-11 13:54:27,310 - services.trade_store - INFO - 날짜: 20241226, 포지션 수: 7건
2025-03-11 13:54:27,310 - services.trade_store - INFO - 날짜: 20241227, 포지션 수: 7건
2025-03-11 13:54:27,311 - services.trade_store - INFO - 날짜: 20241228, 포지션 수: 4건
2025-03-11 13:54:27,311 - services.trade_store - INFO - 날짜: 20241229, 포지션 수: 0건
2025-03-11 13:54:27,312 - services.trade_store - INFO - 날짜: 20241230, 포지션 수: 15건
2025-03-11 13:54:27,312 - services.trade_store - INFO - 날짜: 20241231, 포지션 수: 8건
2025-03-11 13:54:27,313 - services.trade_store - INFO - 날짜: 20250101, 포지션 수: 0건
2025-03-11 13:54:27,313 - services.trade_store - INFO - 날짜: 20250102, 포지션 수: 0건
2025-03-11 13:54:27,313 - services.trade_store - INFO - 날짜: 20250103, 포지션 수: 0건
2025-03-11 13:54:27,313 - services.trade_store - INFO - 날짜: 20250104, 포지션 수: 0건
2025-03-11 13:54:27,313 - services.trade_store - INFO - 날짜: 20250105, 포지션 수: 0건
2025-03-11 13:54:27,315 - services.trade_store - INFO - 날짜: 20250106, 포지션 수: 0건
2025-03-11 13:54:27,315 - services.trade_store - INFO - 날짜: 20250107, 포지션 수: 0건
2025-03-11 13:54:27,315 - services.trade_store - INFO - 날짜: 20250108, 포지션 수: 0건
2025-03-11 13:54:27,315 - services.trade_store - INFO - 날짜: 20250109, 포지션 수: 0건
2025-03-11 13:54:27,315 - services.trade_store - INFO - 날짜: 20250110, 포지션 수: 0건
2025-03-11 13:54:27,315 - services.trade_store - INFO - 날짜: 20250111, 포지션 수: 0건
2025-03-11 13:54:27,316 - services.trade_store - INFO - 날짜: 20250112, 포지션 수: 0건
2025-03-11 13:54:27,316 - services.trade_store - INFO - 날짜: 20250113, 포지션 수: 0건
2025-03-11 13:54:27,316 - services.trade_store - INFO - 날짜: 20250114, 포지션 수: 0건
2025-03-11 13:54:27,316 - services.trade_store - INFO - 날짜: 20250115, 포지션 수: 0건
2025-03-11 13:54:27,318 - services.trade_store - INFO - 날짜: 20250116, 포지션 수: 0건
2025-03-11 13:54:27,318 - services.trade_store - INFO - 날짜: 20250117, 포지션 수: 0건
2025-03-11 13:54:27,318 - services.trade_store - INFO - 날짜: 20250118, 포지션 수: 0건
2025-03-11 13:54:27,318 - services.trade_store - INFO - 날짜: 20250119, 포지션 수: 0건
2025-03-11 13:54:27,319 - services.trade_store - INFO - 날짜: 20250120, 포지션 수: 0건
2025-03-11 13:54:27,319 - services.trade_store - INFO - 날짜: 20250121, 포지션 수: 0건
2025-03-11 13:54:27,319 - services.trade_store - INFO - 날짜: 20250122, 포지션 수: 0건
2025-03-11 13:54:27,319 - services.trade_store - INFO - 날짜: 20250123, 포지션 수: 0건
2025-03-11 13:54:27,320 - services.trade_store - INFO - 날짜: 20250124, 포지션 수: 0건
2025-03-11 13:54:27,320 - services.trade_store - INFO - 날짜: 20250125, 포지션 수: 0건
2025-03-11 13:54:27,320 - services.trade_store - INFO - 날짜: 20250126, 포지션 수: 0건
2025-03-11 13:54:27,320 - services.trade_store - INFO - 날짜: 20250127, 포지션 수: 0건
2025-03-11 13:54:27,321 - services.trade_store - INFO - 날짜: 20250128, 포지션 수: 0건
2025-03-11 13:54:27,321 - services.trade_store - INFO - 날짜: 20250129, 포지션 수: 0건
2025-03-11 13:54:27,321 - services.trade_store - INFO - 날짜: 20250130, 포지션 수: 0건
2025-03-11 13:54:27,321 - services.trade_store - INFO - 날짜: 20250131, 포지션 수: 0건
2025-03-11 13:54:27,321 - services.trade_store - INFO - 날짜: 20250201, 포지션 수: 0건
2025-03-11 13:54:27,322 - services.trade_store - INFO - 날짜: 20250202, 포지션 수: 0건
2025-03-11 13:54:27,322 - services.trade_store - INFO - 날짜: 20250203, 포지션 수: 0건
2025-03-11 13:54:27,322 - services.trade_store - INFO - 날짜: 20250204, 포지션 수: 0건
2025-03-11 13:54:27,323 - services.trade_store - INFO - 날짜: 20250205, 포지션 수: 0건
2025-03-11 13:54:27,323 - services.trade_store - INFO - 날짜: 20250206, 포지션 수: 0건
2025-03-11 13:54:27,323 - services.trade_store - INFO - 날짜: 20250207, 포지션 수: 0건
2025-03-11 13:54:27,323 - services.trade_store - INFO - 날짜: 20250208, 포지션 수: 0건
2025-03-11 13:54:27,324 - services.trade_store - INFO - 날짜: 20250209, 포지션 수: 0건
2025-03-11 13:54:27,324 - services.trade_store - INFO - 날짜: 20250210, 포지션 수: 0건
2025-03-11 13:54:27,324 - services.trade_store - INFO - 날짜: 20250211, 포지션 수: 0건
2025-03-11 13:54:27,324 - services.trade_store - INFO - 날짜: 20250212, 포지션 수: 0건
2025-03-11 13:54:27,326 - services.trade_store - INFO - 날짜: 20250213, 포지션 수: 0건
2025-03-11 13:54:27,326 - services.trade_store - INFO - 날짜: 20250214, 포지션 수: 2건
2025-03-11 13:54:27,327 - services.trade_store - INFO - 날짜: 20250215, 포지션 수: 2건
2025-03-11 13:54:27,328 - services.trade_store - INFO - 날짜: 20250216, 포지션 수: 0건
2025-03-11 13:54:27,328 - services.trade_store - INFO - 날짜: 20250217, 포지션 수: 2건
2025-03-11 13:54:27,328 - services.trade_store - INFO - 날짜: 20250218, 포지션 수: 0건
2025-03-11 13:54:27,328 - services.trade_store - INFO - 날짜: 20250219, 포지션 수: 0건
2025-03-11 13:54:27,328 - services.trade_store - INFO - 날짜: 20250220, 포지션 수: 0건
2025-03-11 13:54:27,328 - services.trade_store - INFO - 날짜: 20250221, 포지션 수: 2건
2025-03-11 13:54:27,328 - services.trade_store - INFO - 날짜: 20250222, 포지션 수: 0건
2025-03-11 13:54:27,328 - services.trade_store - INFO - 날짜: 20250223, 포지션 수: 0건
2025-03-11 13:54:27,328 - services.trade_store - INFO - 날짜: 20250224, 포지션 수: 0건
2025-03-11 13:54:27,328 - services.trade_store - INFO - 날짜: 20250225, 포지션 수: 0건
2025-03-11 13:54:27,328 - services.trade_store - INFO - 날짜: 20250226, 포지션 수: 0건
2025-03-11 13:54:27,328 - services.trade_store - INFO - 날짜: 20250227, 포지션 수: 0건
2025-03-11 13:54:27,328 - services.trade_store - INFO - 날짜: 20250228, 포지션 수: 0건
2025-03-11 13:54:27,328 - services.trade_store - INFO - 날짜: 20250301, 포지션 수: 0건
2025-03-11 13:54:27,328 - services.trade_store - INFO - 날짜: 20250302, 포지션 수: 0건
2025-03-11 13:54:27,328 - services.trade_store - INFO - 날짜: 20250303, 포지션 수: 0건
2025-03-11 13:54:27,328 - services.trade_store - INFO - 날짜: 20250304, 포지션 수: 0건
2025-03-11 13:54:27,328 - services.trade_store - INFO - 날짜: 20250305, 포지션 수: 0건
2025-03-11 13:54:27,328 - services.trade_store - INFO - 날짜: 20250306, 포지션 수: 0건
2025-03-11 13:54:27,334 - services.trade_store - INFO - 날짜: 20250307, 포지션 수: 0건
2025-03-11 13:54:27,334 - services.trade_store - INFO - 날짜: 20250308, 포지션 수: 0건
2025-03-11 13:54:27,334 - services.trade_store - INFO - 날짜: 20250309, 포지션 수: 0건
2025-03-11 13:54:27,334 - services.trade_store - INFO - 날짜: 20250310, 포지션 수: 0건
2025-03-11 13:54:27,334 - services.trade_store - INFO - 날짜: 20250311, 포지션 수: 0건
2025-03-11 13:54:27,334 - services.trade_store - INFO - 총 135건의 포지션 데이터 로드됨
2025-03-11 13:54:27,334 - services.trade_history_service - INFO - 기존 데이터: 135건
2025-03-11 13:54:27,334 - telegram_bot.bot - INFO - Application 빌드 시작...
2025-03-11 13:54:27,873 - telegram_bot.bot - INFO - 봇 초기화 완료, 시작 준비 중...
2025-03-11 13:54:27,873 - telegram_bot.bot - ERROR - 봇 초기화 실패: 'TelegramBot' object has no attribute 'send_message_to_admin'
2025-03-11 13:54:27,873 - telegram_bot.bot - ERROR - 봇 실행 중 오류: 'TelegramBot' object has no attribute 'send_message_to_admin'
2025-03-11 13:54:27,894 - telegram_bot.bot - ERROR - Traceback (most recent call last):
  File "C:\Users\oasis\Aibybit_2\src\telegram_bot\bot.py", line 233, in run
    await self.initialize()
  File "C:\Users\oasis\Aibybit_2\src\telegram_bot\bot.py", line 220, in initialize
    await self.send_message_to_admin("🤖 바이빗 트레이딩 봇이 시작되었습니다")
          ^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'TelegramBot' object has no attribute 'send_message_to_admin'

2025-03-11 13:54:27,895 - main - ERROR - 실행 중 에러 발생: 'TelegramBot' object has no attribute 'send_message_to_admin'
2025-03-11 13:54:27,908 - main - ERROR - Traceback (most recent call last):
  File "C:\Users\oasis\Aibybit_2\src\main.py", line 98, in main
    await telegram_bot.run()
  File "C:\Users\oasis\Aibybit_2\src\telegram_bot\bot.py", line 233, in run
    await self.initialize()
  File "C:\Users\oasis\Aibybit_2\src\telegram_bot\bot.py", line 220, in initialize
    await self.send_message_to_admin("🤖 바이빗 트레이딩 봇이 시작되었습니다")
          ^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'TelegramBot' object has no attribute 'send_message_to_admin'

2025-03-11 13:55:43,138 - main - INFO - 환경변수 및 설정 초기화 중...
2025-03-11 13:55:43,138 - main - INFO - Bybit 테스트넷 클라이언트 초기화 중...
2025-03-11 13:55:43,370 - main - INFO - 서비스 초기화 중...
2025-03-11 13:55:43,370 - main - INFO - 마켓 데이터 서비스 중...
2025-03-11 13:55:45,450 - services.market_data_service - INFO - 마켓 데이터 로드 완료
2025-03-11 13:55:48,192 - telegram_bot.bot - INFO - 텔레그램 설정 로드:
2025-03-11 13:55:48,192 - telegram_bot.bot - INFO - - admin_chat_id: 583881676
2025-03-11 13:55:48,192 - telegram_bot.bot - INFO - - alert_chat_ids: [-1002464784986]
2025-03-11 13:55:48,639 - telegram_bot.monitors.auto_analyzer - INFO - AutoAnalyzer 초기화 시작
2025-03-11 13:55:48,639 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 설정 시작
2025-03-11 13:55:48,660 - telegram_bot.monitors.auto_analyzer - INFO - 다음 실행 예정 시간: 2025-03-11 14:00:00
2025-03-11 13:55:48,662 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-03-11 13:55:48,662 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 설정 완료
2025-03-11 13:55:48,663 - telegram_bot.bot - INFO - 봇 초기화 시작...
2025-03-11 13:55:48,664 - services.trade_history_service - INFO - === 포지션 정보 초기화 시작 ===
2025-03-11 13:55:48,664 - services.trade_history_service - INFO - 조회 기간: 2024-12-11 ~ 2025-03-11
2025-03-11 13:55:48,664 - services.trade_store - INFO - 날짜 범위 조회: 20241211 ~ 20250311
2025-03-11 13:55:48,671 - services.trade_store - INFO - 날짜: 20241211, 포지션 수: 1건
2025-03-11 13:55:48,682 - services.trade_store - INFO - 날짜: 20241212, 포지션 수: 1건
2025-03-11 13:55:48,687 - services.trade_store - INFO - 날짜: 20241213, 포지션 수: 2건
2025-03-11 13:55:48,700 - services.trade_store - INFO - 날짜: 20241214, 포지션 수: 2건
2025-03-11 13:55:48,701 - services.trade_store - INFO - 날짜: 20241215, 포지션 수: 0건
2025-03-11 13:55:48,701 - services.trade_store - INFO - 날짜: 20241216, 포지션 수: 0건
2025-03-11 13:55:48,710 - services.trade_store - INFO - 날짜: 20241217, 포지션 수: 10건
2025-03-11 13:55:48,717 - services.trade_store - INFO - 날짜: 20241218, 포지션 수: 5건
2025-03-11 13:55:48,728 - services.trade_store - INFO - 날짜: 20241219, 포지션 수: 1건
2025-03-11 13:55:48,736 - services.trade_store - INFO - 날짜: 20241220, 포지션 수: 31건
2025-03-11 13:55:48,747 - services.trade_store - INFO - 날짜: 20241221, 포지션 수: 3건
2025-03-11 13:55:48,759 - services.trade_store - INFO - 날짜: 20241222, 포지션 수: 10건
2025-03-11 13:55:48,760 - services.trade_store - INFO - 날짜: 20241223, 포지션 수: 7건
2025-03-11 13:55:48,777 - services.trade_store - INFO - 날짜: 20241224, 포지션 수: 11건
2025-03-11 13:55:48,786 - services.trade_store - INFO - 날짜: 20241225, 포지션 수: 2건
2025-03-11 13:55:48,799 - services.trade_store - INFO - 날짜: 20241226, 포지션 수: 7건
2025-03-11 13:55:48,817 - services.trade_store - INFO - 날짜: 20241227, 포지션 수: 7건
2025-03-11 13:55:48,827 - services.trade_store - INFO - 날짜: 20241228, 포지션 수: 4건
2025-03-11 13:55:48,827 - services.trade_store - INFO - 날짜: 20241229, 포지션 수: 0건
2025-03-11 13:55:48,836 - services.trade_store - INFO - 날짜: 20241230, 포지션 수: 15건
2025-03-11 13:55:48,847 - services.trade_store - INFO - 날짜: 20241231, 포지션 수: 8건
2025-03-11 13:55:48,847 - services.trade_store - INFO - 날짜: 20250101, 포지션 수: 0건
2025-03-11 13:55:48,847 - services.trade_store - INFO - 날짜: 20250102, 포지션 수: 0건
2025-03-11 13:55:48,848 - services.trade_store - INFO - 날짜: 20250103, 포지션 수: 0건
2025-03-11 13:55:48,849 - services.trade_store - INFO - 날짜: 20250104, 포지션 수: 0건
2025-03-11 13:55:48,849 - services.trade_store - INFO - 날짜: 20250105, 포지션 수: 0건
2025-03-11 13:55:48,849 - services.trade_store - INFO - 날짜: 20250106, 포지션 수: 0건
2025-03-11 13:55:48,849 - services.trade_store - INFO - 날짜: 20250107, 포지션 수: 0건
2025-03-11 13:55:48,850 - services.trade_store - INFO - 날짜: 20250108, 포지션 수: 0건
2025-03-11 13:55:48,850 - services.trade_store - INFO - 날짜: 20250109, 포지션 수: 0건
2025-03-11 13:55:48,850 - services.trade_store - INFO - 날짜: 20250110, 포지션 수: 0건
2025-03-11 13:55:48,850 - services.trade_store - INFO - 날짜: 20250111, 포지션 수: 0건
2025-03-11 13:55:48,850 - services.trade_store - INFO - 날짜: 20250112, 포지션 수: 0건
2025-03-11 13:55:48,850 - services.trade_store - INFO - 날짜: 20250113, 포지션 수: 0건
2025-03-11 13:55:48,850 - services.trade_store - INFO - 날짜: 20250114, 포지션 수: 0건
2025-03-11 13:55:48,851 - services.trade_store - INFO - 날짜: 20250115, 포지션 수: 0건
2025-03-11 13:55:48,851 - services.trade_store - INFO - 날짜: 20250116, 포지션 수: 0건
2025-03-11 13:55:48,851 - services.trade_store - INFO - 날짜: 20250117, 포지션 수: 0건
2025-03-11 13:55:48,851 - services.trade_store - INFO - 날짜: 20250118, 포지션 수: 0건
2025-03-11 13:55:48,851 - services.trade_store - INFO - 날짜: 20250119, 포지션 수: 0건
2025-03-11 13:55:48,851 - services.trade_store - INFO - 날짜: 20250120, 포지션 수: 0건
2025-03-11 13:55:48,851 - services.trade_store - INFO - 날짜: 20250121, 포지션 수: 0건
2025-03-11 13:55:48,851 - services.trade_store - INFO - 날짜: 20250122, 포지션 수: 0건
2025-03-11 13:55:48,851 - services.trade_store - INFO - 날짜: 20250123, 포지션 수: 0건
2025-03-11 13:55:48,852 - services.trade_store - INFO - 날짜: 20250124, 포지션 수: 0건
2025-03-11 13:55:48,852 - services.trade_store - INFO - 날짜: 20250125, 포지션 수: 0건
2025-03-11 13:55:48,852 - services.trade_store - INFO - 날짜: 20250126, 포지션 수: 0건
2025-03-11 13:55:48,852 - services.trade_store - INFO - 날짜: 20250127, 포지션 수: 0건
2025-03-11 13:55:48,852 - services.trade_store - INFO - 날짜: 20250128, 포지션 수: 0건
2025-03-11 13:55:48,852 - services.trade_store - INFO - 날짜: 20250129, 포지션 수: 0건
2025-03-11 13:55:48,852 - services.trade_store - INFO - 날짜: 20250130, 포지션 수: 0건
2025-03-11 13:55:48,852 - services.trade_store - INFO - 날짜: 20250131, 포지션 수: 0건
2025-03-11 13:55:48,852 - services.trade_store - INFO - 날짜: 20250201, 포지션 수: 0건
2025-03-11 13:55:48,852 - services.trade_store - INFO - 날짜: 20250202, 포지션 수: 0건
2025-03-11 13:55:48,852 - services.trade_store - INFO - 날짜: 20250203, 포지션 수: 0건
2025-03-11 13:55:48,852 - services.trade_store - INFO - 날짜: 20250204, 포지션 수: 0건
2025-03-11 13:55:48,852 - services.trade_store - INFO - 날짜: 20250205, 포지션 수: 0건
2025-03-11 13:55:48,852 - services.trade_store - INFO - 날짜: 20250206, 포지션 수: 0건
2025-03-11 13:55:48,852 - services.trade_store - INFO - 날짜: 20250207, 포지션 수: 0건
2025-03-11 13:55:48,852 - services.trade_store - INFO - 날짜: 20250208, 포지션 수: 0건
2025-03-11 13:55:48,852 - services.trade_store - INFO - 날짜: 20250209, 포지션 수: 0건
2025-03-11 13:55:48,852 - services.trade_store - INFO - 날짜: 20250210, 포지션 수: 0건
2025-03-11 13:55:48,854 - services.trade_store - INFO - 날짜: 20250211, 포지션 수: 0건
2025-03-11 13:55:48,854 - services.trade_store - INFO - 날짜: 20250212, 포지션 수: 0건
2025-03-11 13:55:48,854 - services.trade_store - INFO - 날짜: 20250213, 포지션 수: 0건
2025-03-11 13:55:48,862 - services.trade_store - INFO - 날짜: 20250214, 포지션 수: 2건
2025-03-11 13:55:48,870 - services.trade_store - INFO - 날짜: 20250215, 포지션 수: 2건
2025-03-11 13:55:48,870 - services.trade_store - INFO - 날짜: 20250216, 포지션 수: 0건
2025-03-11 13:55:48,875 - services.trade_store - INFO - 날짜: 20250217, 포지션 수: 2건
2025-03-11 13:55:48,875 - services.trade_store - INFO - 날짜: 20250218, 포지션 수: 0건
2025-03-11 13:55:48,875 - services.trade_store - INFO - 날짜: 20250219, 포지션 수: 0건
2025-03-11 13:55:48,875 - services.trade_store - INFO - 날짜: 20250220, 포지션 수: 0건
2025-03-11 13:55:48,888 - services.trade_store - INFO - 날짜: 20250221, 포지션 수: 2건
2025-03-11 13:55:48,889 - services.trade_store - INFO - 날짜: 20250222, 포지션 수: 0건
2025-03-11 13:55:48,889 - services.trade_store - INFO - 날짜: 20250223, 포지션 수: 0건
2025-03-11 13:55:48,890 - services.trade_store - INFO - 날짜: 20250224, 포지션 수: 0건
2025-03-11 13:55:48,890 - services.trade_store - INFO - 날짜: 20250225, 포지션 수: 0건
2025-03-11 13:55:48,890 - services.trade_store - INFO - 날짜: 20250226, 포지션 수: 0건
2025-03-11 13:55:48,890 - services.trade_store - INFO - 날짜: 20250227, 포지션 수: 0건
2025-03-11 13:55:48,890 - services.trade_store - INFO - 날짜: 20250228, 포지션 수: 0건
2025-03-11 13:55:48,890 - services.trade_store - INFO - 날짜: 20250301, 포지션 수: 0건
2025-03-11 13:55:48,891 - services.trade_store - INFO - 날짜: 20250302, 포지션 수: 0건
2025-03-11 13:55:48,891 - services.trade_store - INFO - 날짜: 20250303, 포지션 수: 0건
2025-03-11 13:55:48,891 - services.trade_store - INFO - 날짜: 20250304, 포지션 수: 0건
2025-03-11 13:55:48,891 - services.trade_store - INFO - 날짜: 20250305, 포지션 수: 0건
2025-03-11 13:55:48,891 - services.trade_store - INFO - 날짜: 20250306, 포지션 수: 0건
2025-03-11 13:55:48,892 - services.trade_store - INFO - 날짜: 20250307, 포지션 수: 0건
2025-03-11 13:55:48,892 - services.trade_store - INFO - 날짜: 20250308, 포지션 수: 0건
2025-03-11 13:55:48,892 - services.trade_store - INFO - 날짜: 20250309, 포지션 수: 0건
2025-03-11 13:55:48,892 - services.trade_store - INFO - 날짜: 20250310, 포지션 수: 0건
2025-03-11 13:55:48,892 - services.trade_store - INFO - 날짜: 20250311, 포지션 수: 0건
2025-03-11 13:55:48,892 - services.trade_store - INFO - 총 135건의 포지션 데이터 로드됨
2025-03-11 13:55:48,892 - services.trade_history_service - INFO - 기존 데이터: 135건
2025-03-11 13:55:48,892 - telegram_bot.bot - INFO - Application 빌드 시작...
2025-03-11 13:55:49,335 - telegram_bot.bot - INFO - 봇 초기화 완료, 시작 준비 중...
2025-03-11 13:55:49,336 - telegram_bot.bot - ERROR - 관리자 메시지 전송 실패: name 'ParseMode' is not defined
2025-03-11 13:55:49,336 - telegram_bot.monitors.auto_analyzer - INFO - AutoAnalyzer 시작 요청됨
2025-03-11 13:55:49,336 - apscheduler.scheduler - INFO - Added job "AutoAnalyzer._scheduled_analysis" to job store "default"
2025-03-11 13:55:49,336 - apscheduler.scheduler - INFO - Scheduler started
2025-03-11 13:55:49,336 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 시작됨. 다음 실행 시간: 2025-03-11 14:00:00+09:00
2025-03-11 13:55:49,336 - telegram_bot.monitors.auto_analyzer - INFO - 초기 분석 실행 시작
2025-03-11 13:55:49,336 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄된 분석 시작 - 2025-03-11 13:55:49.336224
2025-03-11 13:55:49,336 - telegram_bot.monitors.auto_analyzer - INFO - 🔄' 1시간봉 분석 시작 (자동) ...
2025-03-11 13:55:49,336 - services.market_data_service - INFO - OHLCV 데이터 조회 시작 - 심볼: BTCUSDT, 시간대: 1h
2025-03-11 13:55:49,608 - ai.gpt_analyzer - INFO - 계산된 지표: ['open', 'high', 'low', 'close', 'volume', 'price_change_24h', 'volume_change_24h', 'rsi', 'macd', 'macd_signal', 'bb_upper', 'bb_middle', 'bb_lower', 'sma_10', 'sma_30', 'adx', 'di_plus', 'di_minus', 'trend', 'trend_strength', 'divergence_type', 'divergence_desc']
2025-03-11 13:55:49,608 - ai.gpt_analyzer - INFO - 시장 데이터: {'symbol': 'BTCUSDT', 'last_price': 55800.0, 'bid': 55710.0, 'ask': 55888.1, 'volume': 863394.985, 'timestamp': None}
2025-03-11 13:55:49,608 - ai.gpt_client - INFO - GPT API 호출 시작 (캐시 사용: False)
2025-03-11 13:55:49,608 - ai.gpt_client - INFO - 캐시 사용하지 않음 - 실제 API 호출
2025-03-11 13:55:51,478 - telegram_bot.formatters.storage_formatter - INFO - 1h 분석 결과 저장 완료: C:\Users\oasis\Aibybit_2\src\data\analysis\analysis_1h.json
2025-03-11 13:55:53,052 - telegram_bot.monitors.auto_analyzer - INFO - 분석 결과 position_suggestion: SELL
2025-03-11 13:55:53,052 - telegram_bot.monitors.auto_analyzer - INFO - 매매 신호 감지: SELL
2025-03-11 13:55:53,052 - order_service - INFO - 매매 신호 실행: {'position_suggestion': 'SELL', 'leverage': 5, 'position_size': 10, 'entry_price': 55800.0, 'stop_loss': 56000.0, 'take_profit1': 54800.0, 'take_profit2': 53800.0, 'reason': '하락 추세 및 부정적인 지표'}
2025-03-11 13:55:53,052 - order_service - INFO - 주문 시도: {'symbol': 'BTCUSDT', 'side': 'Sell', 'leverage': 5, 'position_size': 10, 'entry_price': 55800.0, 'stop_loss': 56000.0, 'take_profit': 54800.0, 'is_btc_unit': False}
2025-03-11 13:55:53,052 - order_service - INFO - 주문 상세 정보: {
  "symbol": "BTCUSDT",
  "side": "Sell",
  "leverage": 5,
  "position_size": 10,
  "entry_price": 55800.0,
  "stop_loss": 56000.0,
  "take_profit": 54800.0,
  "is_btc_unit": false
}
2025-03-11 13:55:53,052 - order_service - INFO - 주문 시도: {'symbol': 'BTCUSDT', 'side': 'Sell', 'leverage': 5, 'position_size': 10, 'entry_price': 55800.0, 'stop_loss': 56000.0, 'take_profit': 54800.0, 'is_btc_unit': False}
2025-03-11 13:55:53,507 - order_service - INFO - 현재 포지션: {}
2025-03-11 13:55:53,507 - order_service - INFO - 포지션 없음 - 신규 진입 시도
2025-03-11 13:55:53,507 - order_service - INFO - 신규 포지션 생성 시도: {'symbol': 'BTCUSDT', 'side': 'Sell', 'leverage': 5, 'position_size': 10, 'entry_price': 55800.0, 'stop_loss': 56000.0, 'take_profit': 54800.0, 'is_btc_unit': False}
2025-03-11 13:55:53,507 - order_service - INFO - 레버리지 설정 시도: 5x
2025-03-11 13:55:53,625 - exchange.bybit_client - INFO - 서버 시간 동기화 완료: server_time=1741668953000, local_time=1741668953625, offset=-625ms
2025-03-11 13:55:53,743 - order_service - INFO - 레버리지 설정 확인: 5x
2025-03-11 13:55:53,928 - exchange.bybit_client - INFO - USDT 잔고 - 총자산: $53,354.57, 가용잔고: $0.00, 사용중: $0.00
2025-03-11 13:55:54,106 - order_service - INFO - 계산 입력값 - 총자산: $53354.56826153, 미실현손익: $0.0, 비율: 10%, 레버리지: 5배, 진입가: $55800.0
2025-03-11 13:55:54,106 - order_service - INFO - 순수 자산: $53354.56826153
2025-03-11 13:55:54,106 - order_service - INFO - 포지션 가치(USDT): $26677.284130765
2025-03-11 13:55:54,106 - order_service - INFO - 계산된 BTC 수량: 0.4780875292251792
2025-03-11 13:55:54,106 - order_service - INFO - 최종 BTC 수량(반올림): 0.478
2025-03-11 13:55:54,106 - order_service - INFO - 계산된 BTC 수량: 0.478 (총자산: $53354.56826153, 목표비율: 10%, 레버리지: 5x)
2025-03-11 13:55:54,106 - exchange.bybit_client - INFO - 주문 파라미터: {'category': 'linear', 'symbol': 'BTCUSDT', 'side': 'Sell', 'qty': '0.478', 'price': '55800.0', 'orderType': 'Limit', 'timeInForce': 'GTC', 'positionIdx': 0, 'stopLoss': '56000.0', 'takeProfit': '54800.0'}
2025-03-11 13:55:54,230 - exchange.bybit_client - INFO - 주문 API 응답: {'retCode': 0, 'retMsg': 'OK', 'result': {'orderId': '9500c4f7-fbcb-4b3a-938e-3b7397dbdc42', 'orderLinkId': ''}, 'retExtInfo': {}, 'time': 1741668954433}
2025-03-11 13:55:54,230 - order_service - INFO - 신규 포지션 생성 성공: {'category': 'linear', 'symbol': 'BTCUSDT', 'side': 'Sell', 'qty': '0.478', 'price': '55800.0', 'orderType': 'Limit', 'timeInForce': 'GTC', 'positionIdx': 0, 'stopLoss': '56000.0', 'takeProfit': '54800.0'}
2025-03-11 13:55:54,230 - order_service - INFO - 주문 결과:
2025-03-11 13:55:54,230 - order_service - INFO - {
  "retCode": 0,
  "retMsg": "OK",
  "result": {
    "orderId": "9500c4f7-fbcb-4b3a-938e-3b7397dbdc42",
    "orderLinkId": ""
  },
  "retExtInfo": {},
  "time": 1741668954433
}
2025-03-11 13:55:55,213 - telegram_bot.monitors.auto_analyzer - INFO - 초기 분석 실행 완료
2025-03-11 13:55:55,213 - telegram_bot.bot - INFO - 봇 시작 시도...
2025-03-11 13:55:55,213 - telegram_bot.bot - INFO - === 봇 시작 시도 ===
2025-03-11 13:55:55,782 - apscheduler.scheduler - INFO - Scheduler started
2025-03-11 13:55:55,783 - telegram.ext.Application - INFO - Application started
2025-03-11 13:55:56,058 - telegram_bot.bot - INFO - 🤖 바이빗 트레이딩 봇이 시작되었습니다
2025-03-11 13:57:55,729 - telegram_bot.bot - INFO - 봇 실행이 취소되었습니다
2025-03-11 13:57:55,734 - telegram.ext.Application - WARNING - Fetching updates got a asyncio.CancelledError. Ignoring as this task may onlybe closed via `Application.stop`.
2025-03-11 13:58:21,683 - main - INFO - 환경변수 및 설정 초기화 중...
2025-03-11 13:58:21,694 - main - INFO - Bybit 테스트넷 클라이언트 초기화 중...
2025-03-11 13:58:21,909 - main - INFO - 서비스 초기화 중...
2025-03-11 13:58:21,909 - main - INFO - 마켓 데이터 서비스 중...
2025-03-11 13:58:24,087 - services.market_data_service - INFO - 마켓 데이터 로드 완료
2025-03-11 13:58:24,366 - telegram_bot.bot - INFO - 텔레그램 설정 로드:
2025-03-11 13:58:24,367 - telegram_bot.bot - INFO - - admin_chat_id: 583881676
2025-03-11 13:58:24,367 - telegram_bot.bot - INFO - - alert_chat_ids: [-1002464784986]
2025-03-11 13:58:24,816 - telegram_bot.monitors.auto_analyzer - INFO - AutoAnalyzer 초기화 시작
2025-03-11 13:58:24,816 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 설정 시작
2025-03-11 13:58:24,816 - telegram_bot.monitors.auto_analyzer - INFO - 다음 실행 예정 시간: 2025-03-11 14:00:00
2025-03-11 13:58:24,816 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-03-11 13:58:24,816 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 설정 완료
2025-03-11 13:58:24,816 - telegram_bot.bot - INFO - 봇 초기화 시작...
2025-03-11 13:58:24,816 - services.trade_history_service - INFO - === 포지션 정보 초기화 시작 ===
2025-03-11 13:58:24,816 - services.trade_history_service - INFO - 조회 기간: 2024-12-11 ~ 2025-03-11
2025-03-11 13:58:24,816 - services.trade_store - INFO - 날짜 범위 조회: 20241211 ~ 20250311
2025-03-11 13:58:24,816 - services.trade_store - INFO - 날짜: 20241211, 포지션 수: 1건
2025-03-11 13:58:24,816 - services.trade_store - INFO - 날짜: 20241212, 포지션 수: 1건
2025-03-11 13:58:24,828 - services.trade_store - INFO - 날짜: 20241213, 포지션 수: 2건
2025-03-11 13:58:24,828 - services.trade_store - INFO - 날짜: 20241214, 포지션 수: 2건
2025-03-11 13:58:24,828 - services.trade_store - INFO - 날짜: 20241215, 포지션 수: 0건
2025-03-11 13:58:24,829 - services.trade_store - INFO - 날짜: 20241216, 포지션 수: 0건
2025-03-11 13:58:24,829 - services.trade_store - INFO - 날짜: 20241217, 포지션 수: 10건
2025-03-11 13:58:24,829 - services.trade_store - INFO - 날짜: 20241218, 포지션 수: 5건
2025-03-11 13:58:24,831 - services.trade_store - INFO - 날짜: 20241219, 포지션 수: 1건
2025-03-11 13:58:24,831 - services.trade_store - INFO - 날짜: 20241220, 포지션 수: 31건
2025-03-11 13:58:24,832 - services.trade_store - INFO - 날짜: 20241221, 포지션 수: 3건
2025-03-11 13:58:24,832 - services.trade_store - INFO - 날짜: 20241222, 포지션 수: 10건
2025-03-11 13:58:24,833 - services.trade_store - INFO - 날짜: 20241223, 포지션 수: 7건
2025-03-11 13:58:24,833 - services.trade_store - INFO - 날짜: 20241224, 포지션 수: 11건
2025-03-11 13:58:24,833 - services.trade_store - INFO - 날짜: 20241225, 포지션 수: 2건
2025-03-11 13:58:24,834 - services.trade_store - INFO - 날짜: 20241226, 포지션 수: 7건
2025-03-11 13:58:24,834 - services.trade_store - INFO - 날짜: 20241227, 포지션 수: 7건
2025-03-11 13:58:24,835 - services.trade_store - INFO - 날짜: 20241228, 포지션 수: 4건
2025-03-11 13:58:24,835 - services.trade_store - INFO - 날짜: 20241229, 포지션 수: 0건
2025-03-11 13:58:24,836 - services.trade_store - INFO - 날짜: 20241230, 포지션 수: 15건
2025-03-11 13:58:24,836 - services.trade_store - INFO - 날짜: 20241231, 포지션 수: 8건
2025-03-11 13:58:24,836 - services.trade_store - INFO - 날짜: 20250101, 포지션 수: 0건
2025-03-11 13:58:24,837 - services.trade_store - INFO - 날짜: 20250102, 포지션 수: 0건
2025-03-11 13:58:24,837 - services.trade_store - INFO - 날짜: 20250103, 포지션 수: 0건
2025-03-11 13:58:24,837 - services.trade_store - INFO - 날짜: 20250104, 포지션 수: 0건
2025-03-11 13:58:24,837 - services.trade_store - INFO - 날짜: 20250105, 포지션 수: 0건
2025-03-11 13:58:24,837 - services.trade_store - INFO - 날짜: 20250106, 포지션 수: 0건
2025-03-11 13:58:24,837 - services.trade_store - INFO - 날짜: 20250107, 포지션 수: 0건
2025-03-11 13:58:24,838 - services.trade_store - INFO - 날짜: 20250108, 포지션 수: 0건
2025-03-11 13:58:24,838 - services.trade_store - INFO - 날짜: 20250109, 포지션 수: 0건
2025-03-11 13:58:24,838 - services.trade_store - INFO - 날짜: 20250110, 포지션 수: 0건
2025-03-11 13:58:24,838 - services.trade_store - INFO - 날짜: 20250111, 포지션 수: 0건
2025-03-11 13:58:24,838 - services.trade_store - INFO - 날짜: 20250112, 포지션 수: 0건
2025-03-11 13:58:24,838 - services.trade_store - INFO - 날짜: 20250113, 포지션 수: 0건
2025-03-11 13:58:24,838 - services.trade_store - INFO - 날짜: 20250114, 포지션 수: 0건
2025-03-11 13:58:24,839 - services.trade_store - INFO - 날짜: 20250115, 포지션 수: 0건
2025-03-11 13:58:24,839 - services.trade_store - INFO - 날짜: 20250116, 포지션 수: 0건
2025-03-11 13:58:24,839 - services.trade_store - INFO - 날짜: 20250117, 포지션 수: 0건
2025-03-11 13:58:24,839 - services.trade_store - INFO - 날짜: 20250118, 포지션 수: 0건
2025-03-11 13:58:24,839 - services.trade_store - INFO - 날짜: 20250119, 포지션 수: 0건
2025-03-11 13:58:24,839 - services.trade_store - INFO - 날짜: 20250120, 포지션 수: 0건
2025-03-11 13:58:24,839 - services.trade_store - INFO - 날짜: 20250121, 포지션 수: 0건
2025-03-11 13:58:24,839 - services.trade_store - INFO - 날짜: 20250122, 포지션 수: 0건
2025-03-11 13:58:24,839 - services.trade_store - INFO - 날짜: 20250123, 포지션 수: 0건
2025-03-11 13:58:24,840 - services.trade_store - INFO - 날짜: 20250124, 포지션 수: 0건
2025-03-11 13:58:24,840 - services.trade_store - INFO - 날짜: 20250125, 포지션 수: 0건
2025-03-11 13:58:24,840 - services.trade_store - INFO - 날짜: 20250126, 포지션 수: 0건
2025-03-11 13:58:24,840 - services.trade_store - INFO - 날짜: 20250127, 포지션 수: 0건
2025-03-11 13:58:24,840 - services.trade_store - INFO - 날짜: 20250128, 포지션 수: 0건
2025-03-11 13:58:24,840 - services.trade_store - INFO - 날짜: 20250129, 포지션 수: 0건
2025-03-11 13:58:24,840 - services.trade_store - INFO - 날짜: 20250130, 포지션 수: 0건
2025-03-11 13:58:24,840 - services.trade_store - INFO - 날짜: 20250131, 포지션 수: 0건
2025-03-11 13:58:24,840 - services.trade_store - INFO - 날짜: 20250201, 포지션 수: 0건
2025-03-11 13:58:24,840 - services.trade_store - INFO - 날짜: 20250202, 포지션 수: 0건
2025-03-11 13:58:24,841 - services.trade_store - INFO - 날짜: 20250203, 포지션 수: 0건
2025-03-11 13:58:24,841 - services.trade_store - INFO - 날짜: 20250204, 포지션 수: 0건
2025-03-11 13:58:24,841 - services.trade_store - INFO - 날짜: 20250205, 포지션 수: 0건
2025-03-11 13:58:24,841 - services.trade_store - INFO - 날짜: 20250206, 포지션 수: 0건
2025-03-11 13:58:24,841 - services.trade_store - INFO - 날짜: 20250207, 포지션 수: 0건
2025-03-11 13:58:24,841 - services.trade_store - INFO - 날짜: 20250208, 포지션 수: 0건
2025-03-11 13:58:24,841 - services.trade_store - INFO - 날짜: 20250209, 포지션 수: 0건
2025-03-11 13:58:24,841 - services.trade_store - INFO - 날짜: 20250210, 포지션 수: 0건
2025-03-11 13:58:24,841 - services.trade_store - INFO - 날짜: 20250211, 포지션 수: 0건
2025-03-11 13:58:24,841 - services.trade_store - INFO - 날짜: 20250212, 포지션 수: 0건
2025-03-11 13:58:24,841 - services.trade_store - INFO - 날짜: 20250213, 포지션 수: 0건
2025-03-11 13:58:24,843 - services.trade_store - INFO - 날짜: 20250214, 포지션 수: 2건
2025-03-11 13:58:24,843 - services.trade_store - INFO - 날짜: 20250215, 포지션 수: 2건
2025-03-11 13:58:24,843 - services.trade_store - INFO - 날짜: 20250216, 포지션 수: 0건
2025-03-11 13:58:24,844 - services.trade_store - INFO - 날짜: 20250217, 포지션 수: 2건
2025-03-11 13:58:24,844 - services.trade_store - INFO - 날짜: 20250218, 포지션 수: 0건
2025-03-11 13:58:24,844 - services.trade_store - INFO - 날짜: 20250219, 포지션 수: 0건
2025-03-11 13:58:24,844 - services.trade_store - INFO - 날짜: 20250220, 포지션 수: 0건
2025-03-11 13:58:24,845 - services.trade_store - INFO - 날짜: 20250221, 포지션 수: 2건
2025-03-11 13:58:24,845 - services.trade_store - INFO - 날짜: 20250222, 포지션 수: 0건
2025-03-11 13:58:24,845 - services.trade_store - INFO - 날짜: 20250223, 포지션 수: 0건
2025-03-11 13:58:24,846 - services.trade_store - INFO - 날짜: 20250224, 포지션 수: 0건
2025-03-11 13:58:24,846 - services.trade_store - INFO - 날짜: 20250225, 포지션 수: 0건
2025-03-11 13:58:24,846 - services.trade_store - INFO - 날짜: 20250226, 포지션 수: 0건
2025-03-11 13:58:24,846 - services.trade_store - INFO - 날짜: 20250227, 포지션 수: 0건
2025-03-11 13:58:24,846 - services.trade_store - INFO - 날짜: 20250228, 포지션 수: 0건
2025-03-11 13:58:24,846 - services.trade_store - INFO - 날짜: 20250301, 포지션 수: 0건
2025-03-11 13:58:24,846 - services.trade_store - INFO - 날짜: 20250302, 포지션 수: 0건
2025-03-11 13:58:24,847 - services.trade_store - INFO - 날짜: 20250303, 포지션 수: 0건
2025-03-11 13:58:24,847 - services.trade_store - INFO - 날짜: 20250304, 포지션 수: 0건
2025-03-11 13:58:24,847 - services.trade_store - INFO - 날짜: 20250305, 포지션 수: 0건
2025-03-11 13:58:24,847 - services.trade_store - INFO - 날짜: 20250306, 포지션 수: 0건
2025-03-11 13:58:24,847 - services.trade_store - INFO - 날짜: 20250307, 포지션 수: 0건
2025-03-11 13:58:24,847 - services.trade_store - INFO - 날짜: 20250308, 포지션 수: 0건
2025-03-11 13:58:24,848 - services.trade_store - INFO - 날짜: 20250309, 포지션 수: 0건
2025-03-11 13:58:24,848 - services.trade_store - INFO - 날짜: 20250310, 포지션 수: 0건
2025-03-11 13:58:24,848 - services.trade_store - INFO - 날짜: 20250311, 포지션 수: 0건
2025-03-11 13:58:24,848 - services.trade_store - INFO - 총 135건의 포지션 데이터 로드됨
2025-03-11 13:58:24,848 - services.trade_history_service - INFO - 기존 데이터: 135건
2025-03-11 13:58:24,848 - telegram_bot.bot - INFO - Application 빌드 시작...
2025-03-11 13:58:25,300 - telegram_bot.bot - INFO - 봇 초기화 완료, 시작 준비 중...
2025-03-11 13:58:25,301 - telegram_bot.bot - ERROR - 관리자 메시지 전송 실패: name 'ParseMode' is not defined
2025-03-11 13:58:25,302 - telegram_bot.monitors.auto_analyzer - INFO - AutoAnalyzer 시작 요청됨
2025-03-11 13:58:25,302 - apscheduler.scheduler - INFO - Added job "AutoAnalyzer._scheduled_analysis" to job store "default"
2025-03-11 13:58:25,302 - apscheduler.scheduler - INFO - Scheduler started
2025-03-11 13:58:25,303 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 시작됨. 다음 실행 시간: 2025-03-11 14:00:00+09:00
2025-03-11 13:58:25,303 - telegram_bot.monitors.auto_analyzer - INFO - 초기 분석 실행 시작
2025-03-11 13:58:25,303 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄된 분석 시작 - 2025-03-11 13:58:25.303283
2025-03-11 13:58:25,303 - telegram_bot.monitors.auto_analyzer - INFO - 🔄' 1시간봉 분석 시작 (자동) ...
2025-03-11 13:58:25,303 - services.market_data_service - INFO - OHLCV 데이터 조회 시작 - 심볼: BTCUSDT, 시간대: 1h
2025-03-11 13:58:25,587 - ai.gpt_analyzer - INFO - 계산된 지표: ['open', 'high', 'low', 'close', 'volume', 'price_change_24h', 'volume_change_24h', 'rsi', 'macd', 'macd_signal', 'bb_upper', 'bb_middle', 'bb_lower', 'sma_10', 'sma_30', 'adx', 'di_plus', 'di_minus', 'trend', 'trend_strength', 'divergence_type', 'divergence_desc']
2025-03-11 13:58:25,587 - ai.gpt_analyzer - INFO - 시장 데이터: {'symbol': 'BTCUSDT', 'last_price': 55700.0, 'bid': 55700.0, 'ask': 55878.1, 'volume': 863395.327, 'timestamp': None}
2025-03-11 13:58:25,595 - ai.gpt_client - INFO - GPT API 호출 시작 (캐시 사용: False)
2025-03-11 13:58:25,595 - ai.gpt_client - INFO - 캐시 사용하지 않음 - 실제 API 호출
2025-03-11 13:58:33,114 - telegram_bot.formatters.storage_formatter - INFO - 1h 분석 결과 저장 완료: C:\Users\oasis\Aibybit_2\src\data\analysis\analysis_1h.json
2025-03-11 13:58:34,736 - telegram_bot.monitors.auto_analyzer - INFO - 분석 결과 position_suggestion: SELL
2025-03-11 13:58:34,736 - telegram_bot.monitors.auto_analyzer - INFO - 매매 신호 감지: SELL
2025-03-11 13:58:34,736 - order_service - INFO - 매매 신호 실행: {'position_suggestion': 'SELL', 'leverage': 5, 'position_size': 10, 'entry_price': 55700.0, 'stop_loss': 56000.0, 'take_profit1': 54700.0, 'take_profit2': 53700.0, 'reason': '하락 추세 및 부정적인 지표'}
2025-03-11 13:58:34,737 - order_service - INFO - 주문 시도: {'symbol': 'BTCUSDT', 'side': 'Sell', 'leverage': 5, 'position_size': 10, 'entry_price': 55700.0, 'stop_loss': 56000.0, 'take_profit': 54700.0, 'is_btc_unit': False}
2025-03-11 13:58:34,737 - order_service - INFO - 주문 상세 정보: {
  "symbol": "BTCUSDT",
  "side": "Sell",
  "leverage": 5,
  "position_size": 10,
  "entry_price": 55700.0,
  "stop_loss": 56000.0,
  "take_profit": 54700.0,
  "is_btc_unit": false
}
2025-03-11 13:58:34,737 - order_service - INFO - 주문 시도: {'symbol': 'BTCUSDT', 'side': 'Sell', 'leverage': 5, 'position_size': 10, 'entry_price': 55700.0, 'stop_loss': 56000.0, 'take_profit': 54700.0, 'is_btc_unit': False}
2025-03-11 13:58:35,197 - order_service - INFO - 현재 포지션: {'symbol': 'BTC/USDT:USDT', 'side': 'Short', 'size': 0.051, 'leverage': 5, 'entryPrice': 55800.0, 'markPrice': 55722.57, 'unrealisedPnl': 3.94893, 'stopLoss': 0.0, 'takeProfit': 0.0}
2025-03-11 13:58:35,197 - order_service - INFO - 포지션 방향이 다름 - 시장가 청산 후 신규 진입
2025-03-11 13:58:35,197 - order_service - ERROR - 포지션 관리 중 오류: 'OrderService' object has no attribute 'create_market_order'
2025-03-11 13:58:35,224 - order_service - ERROR - Traceback (most recent call last):
  File "C:\Users\oasis\Aibybit_2\src\services\order_service.py", line 129, in manage_existing_position
    if not await self.create_market_order(
                 ^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'OrderService' object has no attribute 'create_market_order'

2025-03-11 13:58:36,175 - telegram_bot.monitors.auto_analyzer - INFO - 초기 분석 실행 완료
2025-03-11 13:58:36,175 - telegram_bot.bot - INFO - 봇 시작 시도...
2025-03-11 13:58:36,183 - telegram_bot.bot - INFO - === 봇 시작 시도 ===
2025-03-11 13:58:36,727 - apscheduler.scheduler - INFO - Scheduler started
2025-03-11 13:58:36,727 - telegram.ext.Application - INFO - Application started
2025-03-11 13:58:37,004 - telegram_bot.bot - INFO - 🤖 바이빗 트레이딩 봇이 시작되었습니다
2025-03-11 14:00:00,012 - apscheduler.executors.default - INFO - Running job "AutoAnalyzer._scheduled_analysis (trigger: interval[1:00:00], next run at: 2025-03-11 15:00:00 KST)" (scheduled at 2025-03-11 14:00:00+09:00)
2025-03-11 14:00:00,013 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄된 분석 시작 - 2025-03-11 14:00:00.013444
2025-03-11 14:00:00,013 - telegram_bot.monitors.auto_analyzer - INFO - 마지막 실행 후 94.710161초 경과 - 스킵
2025-03-11 14:00:00,013 - apscheduler.executors.default - INFO - Job "AutoAnalyzer._scheduled_analysis (trigger: interval[1:00:00], next run at: 2025-03-11 15:00:00 KST)" executed successfully
2025-03-11 14:12:09,832 - main - INFO - 환경변수 및 설정 초기화 중...
2025-03-11 14:12:09,832 - main - INFO - Bybit 테스트넷 클라이언트 초기화 중...
2025-03-11 14:12:10,065 - main - INFO - 서비스 초기화 중...
2025-03-11 14:12:10,065 - main - INFO - 마켓 데이터 서비스 중...
2025-03-11 14:12:11,756 - services.market_data_service - INFO - 마켓 데이터 로드 완료
2025-03-11 14:12:12,004 - telegram_bot.bot - INFO - 텔레그램 설정 로드:
2025-03-11 14:12:12,004 - telegram_bot.bot - INFO - - admin_chat_id: 583881676
2025-03-11 14:12:12,004 - telegram_bot.bot - INFO - - alert_chat_ids: [-1002464784986]
2025-03-11 14:12:12,472 - telegram_bot.monitors.auto_analyzer - INFO - AutoAnalyzer 초기화 시작
2025-03-11 14:12:12,473 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 설정 시작
2025-03-11 14:12:12,474 - telegram_bot.monitors.auto_analyzer - INFO - 다음 실행 예정 시간: 2025-03-11 15:00:00
2025-03-11 14:12:12,474 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-03-11 14:12:12,474 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 설정 완료
2025-03-11 14:12:12,478 - telegram_bot.bot - INFO - 봇 초기화 시작...
2025-03-11 14:12:12,478 - services.trade_history_service - INFO - === 포지션 정보 초기화 시작 ===
2025-03-11 14:12:12,478 - services.trade_history_service - INFO - 조회 기간: 2024-12-11 ~ 2025-03-11
2025-03-11 14:12:12,479 - services.trade_store - INFO - 날짜 범위 조회: 20241211 ~ 20250311
2025-03-11 14:12:12,479 - services.trade_store - INFO - 날짜: 20241211, 포지션 수: 1건
2025-03-11 14:12:12,479 - services.trade_store - INFO - 날짜: 20241212, 포지션 수: 1건
2025-03-11 14:12:12,480 - services.trade_store - INFO - 날짜: 20241213, 포지션 수: 2건
2025-03-11 14:12:12,480 - services.trade_store - INFO - 날짜: 20241214, 포지션 수: 2건
2025-03-11 14:12:12,480 - services.trade_store - INFO - 날짜: 20241215, 포지션 수: 0건
2025-03-11 14:12:12,480 - services.trade_store - INFO - 날짜: 20241216, 포지션 수: 0건
2025-03-11 14:12:12,480 - services.trade_store - INFO - 날짜: 20241217, 포지션 수: 10건
2025-03-11 14:12:12,482 - services.trade_store - INFO - 날짜: 20241218, 포지션 수: 5건
2025-03-11 14:12:12,482 - services.trade_store - INFO - 날짜: 20241219, 포지션 수: 1건
2025-03-11 14:12:12,483 - services.trade_store - INFO - 날짜: 20241220, 포지션 수: 31건
2025-03-11 14:12:12,483 - services.trade_store - INFO - 날짜: 20241221, 포지션 수: 3건
2025-03-11 14:12:12,483 - services.trade_store - INFO - 날짜: 20241222, 포지션 수: 10건
2025-03-11 14:12:12,483 - services.trade_store - INFO - 날짜: 20241223, 포지션 수: 7건
2025-03-11 14:12:12,483 - services.trade_store - INFO - 날짜: 20241224, 포지션 수: 11건
2025-03-11 14:12:12,483 - services.trade_store - INFO - 날짜: 20241225, 포지션 수: 2건
2025-03-11 14:12:12,483 - services.trade_store - INFO - 날짜: 20241226, 포지션 수: 7건
2025-03-11 14:12:12,483 - services.trade_store - INFO - 날짜: 20241227, 포지션 수: 7건
2025-03-11 14:12:12,483 - services.trade_store - INFO - 날짜: 20241228, 포지션 수: 4건
2025-03-11 14:12:12,483 - services.trade_store - INFO - 날짜: 20241229, 포지션 수: 0건
2025-03-11 14:12:12,483 - services.trade_store - INFO - 날짜: 20241230, 포지션 수: 15건
2025-03-11 14:12:12,483 - services.trade_store - INFO - 날짜: 20241231, 포지션 수: 8건
2025-03-11 14:12:12,483 - services.trade_store - INFO - 날짜: 20250101, 포지션 수: 0건
2025-03-11 14:12:12,483 - services.trade_store - INFO - 날짜: 20250102, 포지션 수: 0건
2025-03-11 14:12:12,483 - services.trade_store - INFO - 날짜: 20250103, 포지션 수: 0건
2025-03-11 14:12:12,483 - services.trade_store - INFO - 날짜: 20250104, 포지션 수: 0건
2025-03-11 14:12:12,483 - services.trade_store - INFO - 날짜: 20250105, 포지션 수: 0건
2025-03-11 14:12:12,488 - services.trade_store - INFO - 날짜: 20250106, 포지션 수: 0건
2025-03-11 14:12:12,488 - services.trade_store - INFO - 날짜: 20250107, 포지션 수: 0건
2025-03-11 14:12:12,488 - services.trade_store - INFO - 날짜: 20250108, 포지션 수: 0건
2025-03-11 14:12:12,488 - services.trade_store - INFO - 날짜: 20250109, 포지션 수: 0건
2025-03-11 14:12:12,488 - services.trade_store - INFO - 날짜: 20250110, 포지션 수: 0건
2025-03-11 14:12:12,488 - services.trade_store - INFO - 날짜: 20250111, 포지션 수: 0건
2025-03-11 14:12:12,488 - services.trade_store - INFO - 날짜: 20250112, 포지션 수: 0건
2025-03-11 14:12:12,489 - services.trade_store - INFO - 날짜: 20250113, 포지션 수: 0건
2025-03-11 14:12:12,489 - services.trade_store - INFO - 날짜: 20250114, 포지션 수: 0건
2025-03-11 14:12:12,489 - services.trade_store - INFO - 날짜: 20250115, 포지션 수: 0건
2025-03-11 14:12:12,489 - services.trade_store - INFO - 날짜: 20250116, 포지션 수: 0건
2025-03-11 14:12:12,489 - services.trade_store - INFO - 날짜: 20250117, 포지션 수: 0건
2025-03-11 14:12:12,489 - services.trade_store - INFO - 날짜: 20250118, 포지션 수: 0건
2025-03-11 14:12:12,489 - services.trade_store - INFO - 날짜: 20250119, 포지션 수: 0건
2025-03-11 14:12:12,489 - services.trade_store - INFO - 날짜: 20250120, 포지션 수: 0건
2025-03-11 14:12:12,490 - services.trade_store - INFO - 날짜: 20250121, 포지션 수: 0건
2025-03-11 14:12:12,490 - services.trade_store - INFO - 날짜: 20250122, 포지션 수: 0건
2025-03-11 14:12:12,490 - services.trade_store - INFO - 날짜: 20250123, 포지션 수: 0건
2025-03-11 14:12:12,490 - services.trade_store - INFO - 날짜: 20250124, 포지션 수: 0건
2025-03-11 14:12:12,490 - services.trade_store - INFO - 날짜: 20250125, 포지션 수: 0건
2025-03-11 14:12:12,490 - services.trade_store - INFO - 날짜: 20250126, 포지션 수: 0건
2025-03-11 14:12:12,490 - services.trade_store - INFO - 날짜: 20250127, 포지션 수: 0건
2025-03-11 14:12:12,491 - services.trade_store - INFO - 날짜: 20250128, 포지션 수: 0건
2025-03-11 14:12:12,491 - services.trade_store - INFO - 날짜: 20250129, 포지션 수: 0건
2025-03-11 14:12:12,491 - services.trade_store - INFO - 날짜: 20250130, 포지션 수: 0건
2025-03-11 14:12:12,491 - services.trade_store - INFO - 날짜: 20250131, 포지션 수: 0건
2025-03-11 14:12:12,491 - services.trade_store - INFO - 날짜: 20250201, 포지션 수: 0건
2025-03-11 14:12:12,492 - services.trade_store - INFO - 날짜: 20250202, 포지션 수: 0건
2025-03-11 14:12:12,492 - services.trade_store - INFO - 날짜: 20250203, 포지션 수: 0건
2025-03-11 14:12:12,492 - services.trade_store - INFO - 날짜: 20250204, 포지션 수: 0건
2025-03-11 14:12:12,492 - services.trade_store - INFO - 날짜: 20250205, 포지션 수: 0건
2025-03-11 14:12:12,492 - services.trade_store - INFO - 날짜: 20250206, 포지션 수: 0건
2025-03-11 14:12:12,492 - services.trade_store - INFO - 날짜: 20250207, 포지션 수: 0건
2025-03-11 14:12:12,492 - services.trade_store - INFO - 날짜: 20250208, 포지션 수: 0건
2025-03-11 14:12:12,494 - services.trade_store - INFO - 날짜: 20250209, 포지션 수: 0건
2025-03-11 14:12:12,494 - services.trade_store - INFO - 날짜: 20250210, 포지션 수: 0건
2025-03-11 14:12:12,494 - services.trade_store - INFO - 날짜: 20250211, 포지션 수: 0건
2025-03-11 14:12:12,494 - services.trade_store - INFO - 날짜: 20250212, 포지션 수: 0건
2025-03-11 14:12:12,494 - services.trade_store - INFO - 날짜: 20250213, 포지션 수: 0건
2025-03-11 14:12:12,494 - services.trade_store - INFO - 날짜: 20250214, 포지션 수: 2건
2025-03-11 14:12:12,495 - services.trade_store - INFO - 날짜: 20250215, 포지션 수: 2건
2025-03-11 14:12:12,495 - services.trade_store - INFO - 날짜: 20250216, 포지션 수: 0건
2025-03-11 14:12:12,495 - services.trade_store - INFO - 날짜: 20250217, 포지션 수: 2건
2025-03-11 14:12:12,495 - services.trade_store - INFO - 날짜: 20250218, 포지션 수: 0건
2025-03-11 14:12:12,495 - services.trade_store - INFO - 날짜: 20250219, 포지션 수: 0건
2025-03-11 14:12:12,495 - services.trade_store - INFO - 날짜: 20250220, 포지션 수: 0건
2025-03-11 14:12:12,496 - services.trade_store - INFO - 날짜: 20250221, 포지션 수: 2건
2025-03-11 14:12:12,496 - services.trade_store - INFO - 날짜: 20250222, 포지션 수: 0건
2025-03-11 14:12:12,496 - services.trade_store - INFO - 날짜: 20250223, 포지션 수: 0건
2025-03-11 14:12:12,496 - services.trade_store - INFO - 날짜: 20250224, 포지션 수: 0건
2025-03-11 14:12:12,496 - services.trade_store - INFO - 날짜: 20250225, 포지션 수: 0건
2025-03-11 14:12:12,497 - services.trade_store - INFO - 날짜: 20250226, 포지션 수: 0건
2025-03-11 14:12:12,497 - services.trade_store - INFO - 날짜: 20250227, 포지션 수: 0건
2025-03-11 14:12:12,497 - services.trade_store - INFO - 날짜: 20250228, 포지션 수: 0건
2025-03-11 14:12:12,498 - services.trade_store - INFO - 날짜: 20250301, 포지션 수: 0건
2025-03-11 14:12:12,498 - services.trade_store - INFO - 날짜: 20250302, 포지션 수: 0건
2025-03-11 14:12:12,498 - services.trade_store - INFO - 날짜: 20250303, 포지션 수: 0건
2025-03-11 14:12:12,498 - services.trade_store - INFO - 날짜: 20250304, 포지션 수: 0건
2025-03-11 14:12:12,498 - services.trade_store - INFO - 날짜: 20250305, 포지션 수: 0건
2025-03-11 14:12:12,498 - services.trade_store - INFO - 날짜: 20250306, 포지션 수: 0건
2025-03-11 14:12:12,498 - services.trade_store - INFO - 날짜: 20250307, 포지션 수: 0건
2025-03-11 14:12:12,498 - services.trade_store - INFO - 날짜: 20250308, 포지션 수: 0건
2025-03-11 14:12:12,500 - services.trade_store - INFO - 날짜: 20250309, 포지션 수: 0건
2025-03-11 14:12:12,500 - services.trade_store - INFO - 날짜: 20250310, 포지션 수: 0건
2025-03-11 14:12:12,500 - services.trade_store - INFO - 날짜: 20250311, 포지션 수: 0건
2025-03-11 14:12:12,500 - services.trade_store - INFO - 총 135건의 포지션 데이터 로드됨
2025-03-11 14:12:12,500 - services.trade_history_service - INFO - 기존 데이터: 135건
2025-03-11 14:12:12,500 - telegram_bot.bot - INFO - Application 빌드 시작...
2025-03-11 14:12:12,944 - telegram_bot.bot - INFO - 봇 초기화 완료, 시작 준비 중...
2025-03-11 14:12:14,008 - telegram_bot.monitors.auto_analyzer - INFO - AutoAnalyzer 시작 요청됨
2025-03-11 14:12:14,008 - apscheduler.scheduler - INFO - Added job "AutoAnalyzer._scheduled_analysis" to job store "default"
2025-03-11 14:12:14,008 - apscheduler.scheduler - INFO - Scheduler started
2025-03-11 14:12:14,008 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 시작됨. 다음 실행 시간: 2025-03-11 15:00:00+09:00
2025-03-11 14:12:14,008 - telegram_bot.monitors.auto_analyzer - INFO - 초기 분석 실행 시작
2025-03-11 14:12:14,008 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄된 분석 시작 - 2025-03-11 14:12:14.008276
2025-03-11 14:12:14,008 - telegram_bot.monitors.auto_analyzer - INFO - 🔄' 1시간봉 분석 시작 (자동) ...
2025-03-11 14:12:14,008 - services.market_data_service - INFO - OHLCV 데이터 조회 시작 - 심볼: BTCUSDT, 시간대: 1h
2025-03-11 14:12:14,275 - ai.gpt_analyzer - INFO - 계산된 지표: ['open', 'high', 'low', 'close', 'volume', 'price_change_24h', 'volume_change_24h', 'rsi', 'macd', 'macd_signal', 'bb_upper', 'bb_middle', 'bb_lower', 'sma_10', 'sma_30', 'adx', 'di_plus', 'di_minus', 'trend', 'trend_strength', 'divergence_type', 'divergence_desc']
2025-03-11 14:12:14,275 - ai.gpt_analyzer - INFO - 시장 데이터: {'symbol': 'BTCUSDT', 'last_price': 55636.1, 'bid': 55626.1, 'ask': 55888.1, 'volume': 863398.416, 'timestamp': None}
2025-03-11 14:12:14,275 - ai.gpt_client - INFO - GPT API 호출 시작 (캐시 사용: False)
2025-03-11 14:12:14,275 - ai.gpt_client - INFO - 캐시 사용하지 않음 - 실제 API 호출
2025-03-11 14:12:18,990 - telegram_bot.formatters.storage_formatter - INFO - 1h 분석 결과 저장 완료: C:\Users\oasis\Aibybit_2\src\data\analysis\analysis_1h.json
2025-03-11 14:12:19,963 - telegram_bot.monitors.auto_analyzer - INFO - 분석 결과 position_suggestion: SELL
2025-03-11 14:12:19,973 - telegram_bot.monitors.auto_analyzer - INFO - 매매 신호 감지: SELL
2025-03-11 14:12:19,973 - order_service - INFO - 매매 신호 실행: {'position_suggestion': 'SELL', 'leverage': 5, 'position_size': 10, 'entry_price': 55636.1, 'stop_loss': 56000.0, 'take_profit1': 54600.0, 'take_profit2': 53600.0, 'reason': '하락 추세 및 부정적인 지표'}
2025-03-11 14:12:19,974 - order_service - INFO - 주문 시도: {'symbol': 'BTCUSDT', 'side': 'Sell', 'leverage': 5, 'position_size': 10, 'entry_price': 55636.1, 'stop_loss': 56000.0, 'take_profit': 54600.0, 'is_btc_unit': False}
2025-03-11 14:12:19,974 - order_service - INFO - 주문 상세 정보: {
  "symbol": "BTCUSDT",
  "side": "Sell",
  "leverage": 5,
  "position_size": 10,
  "entry_price": 55636.1,
  "stop_loss": 56000.0,
  "take_profit": 54600.0,
  "is_btc_unit": false
}
2025-03-11 14:12:19,974 - order_service - INFO - 주문 시도: {'symbol': 'BTCUSDT', 'side': 'Sell', 'leverage': 5, 'position_size': 10, 'entry_price': 55636.1, 'stop_loss': 56000.0, 'take_profit': 54600.0, 'is_btc_unit': False}
2025-03-11 14:12:20,343 - order_service - INFO - 현재 포지션: {'symbol': 'BTC/USDT:USDT', 'side': 'Short', 'size': 0.051, 'leverage': 5, 'entryPrice': 55800.0, 'markPrice': 55934.57, 'unrealisedPnl': -6.86307, 'stopLoss': 0.0, 'takeProfit': 0.0}
2025-03-11 14:12:20,344 - order_service - INFO - 레버리지 차이가 작음(0) - 크기만 조정
2025-03-11 14:12:20,344 - order_service - INFO - 현재 포지션 크기: 0.051 BTC
2025-03-11 14:12:20,526 - exchange.bybit_client - INFO - USDT 잔고 - 총자산: $53,354.00, 가용잔고: $0.00, 사용중: $0.00
2025-03-11 14:12:20,719 - order_service - INFO - 가용 잔고: $0.0, 총 자산: $53353.99910153, 미실현 손익: $0.0
2025-03-11 14:12:20,914 - order_service - INFO - 계산 입력값 - 총자산: $53353.99910153, 미실현손익: $0.0, 비율: 10%, 레버리지: 5배, 진입가: $55636.1
2025-03-11 14:12:20,914 - order_service - INFO - 순수 자산: $53353.99910153
2025-03-11 14:12:20,914 - order_service - INFO - 포지션 가치(USDT): $26676.999550765
2025-03-11 14:12:20,914 - order_service - INFO - 계산된 BTC 수량: 0.4794908261140698
2025-03-11 14:12:20,914 - order_service - INFO - 최종 BTC 수량(반올림): 0.479
2025-03-11 14:12:20,914 - order_service - INFO - 목표 포지션 크기: 0.479 BTC
2025-03-11 14:12:20,914 - order_service - INFO - 계산된 크기 차이(원본): 0.428 BTC
2025-03-11 14:12:20,914 - order_service - INFO - 조정된 크기 차이(반올림): 0.428 BTC
2025-03-11 14:12:20,914 - order_service - INFO - 주문 시도: {'category': 'linear', 'symbol': 'BTCUSDT', 'side': 'Buy', 'orderType': 'Limit', 'qty': '0.428', 'price': '55636.1', 'timeInForce': 'GTC', 'positionIdx': 0, 'reduceOnly': False, 'stopLoss': '56000.0', 'takeProfit': '54600.0'}
2025-03-11 14:12:20,914 - exchange.bybit_client - INFO - 주문 파라미터: {'category': 'linear', 'symbol': 'BTCUSDT', 'side': 'Buy', 'orderType': 'Limit', 'qty': '0.428', 'price': '55636.1', 'timeInForce': 'GTC', 'positionIdx': 0, 'reduceOnly': False, 'stopLoss': '56000.0', 'takeProfit': '54600.0'}
2025-03-11 14:12:21,185 - exchange.bybit_client - INFO - 서버 시간 동기화 완료: server_time=1741669941000, local_time=1741669941185, offset=-185ms
2025-03-11 14:12:21,315 - exchange.bybit_client - ERROR - 주문 API 오류: {'retCode': 10001, 'retMsg': 'TakeProfit:546000000 set for Buy position should be higher than base_price:556361000??LastPrice', 'result': {}, 'retExtInfo': {}, 'time': 1741669941463}
2025-03-11 14:12:21,316 - order_service - ERROR - 포지션 크기 조정 실패: None
2025-03-11 14:12:22,271 - telegram_bot.monitors.auto_analyzer - INFO - 초기 분석 실행 완료
2025-03-11 14:12:22,271 - telegram_bot.bot - INFO - 봇 시작 시도...
2025-03-11 14:12:22,278 - telegram_bot.bot - INFO - === 봇 시작 시도 ===
2025-03-11 14:12:22,821 - apscheduler.scheduler - INFO - Scheduler started
2025-03-11 14:12:22,822 - telegram.ext.Application - INFO - Application started
2025-03-11 14:12:23,097 - telegram_bot.bot - INFO - 🤖 바이빗 트레이딩 봇이 시작되었습니다
2025-03-11 14:17:46,846 - main - INFO - 환경변수 및 설정 초기화 중...
2025-03-11 14:17:46,847 - main - INFO - Bybit 테스트넷 클라이언트 초기화 중...
2025-03-11 14:17:47,077 - main - INFO - 서비스 초기화 중...
2025-03-11 14:17:47,078 - main - INFO - 마켓 데이터 서비스 중...
2025-03-11 14:17:49,131 - services.market_data_service - INFO - 마켓 데이터 로드 완료
2025-03-11 14:17:49,364 - telegram_bot.bot - INFO - 텔레그램 설정 로드:
2025-03-11 14:17:49,378 - telegram_bot.bot - INFO - - admin_chat_id: 583881676
2025-03-11 14:17:49,378 - telegram_bot.bot - INFO - - alert_chat_ids: [-1002464784986]
2025-03-11 14:17:49,807 - telegram_bot.monitors.auto_analyzer - INFO - AutoAnalyzer 초기화 시작
2025-03-11 14:17:49,807 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 설정 시작
2025-03-11 14:17:49,809 - telegram_bot.monitors.auto_analyzer - INFO - 다음 실행 예정 시간: 2025-03-11 15:00:00
2025-03-11 14:17:49,809 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-03-11 14:17:49,809 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 설정 완료
2025-03-11 14:17:49,810 - main - ERROR - 실행 중 에러 발생: 'TelegramBot' object has no attribute 'run'
2025-03-11 14:17:49,810 - main - ERROR - Traceback (most recent call last):
  File "C:\Users\oasis\Aibybit_2\src\main.py", line 98, in main
    await telegram_bot.run()
          ^^^^^^^^^^^^^^^^
AttributeError: 'TelegramBot' object has no attribute 'run'

2025-03-11 14:18:59,662 - main - INFO - 환경변수 및 설정 초기화 중...
2025-03-11 14:18:59,662 - main - INFO - Bybit 테스트넷 클라이언트 초기화 중...
2025-03-11 14:18:59,882 - main - INFO - 서비스 초기화 중...
2025-03-11 14:18:59,882 - main - INFO - 마켓 데이터 서비스 중...
2025-03-11 14:19:01,988 - services.market_data_service - INFO - 마켓 데이터 로드 완료
2025-03-11 14:19:02,262 - telegram_bot.bot - INFO - 텔레그램 설정 로드:
2025-03-11 14:19:02,270 - telegram_bot.bot - INFO - - admin_chat_id: 583881676
2025-03-11 14:19:02,270 - telegram_bot.bot - INFO - - alert_chat_ids: [-1002464784986]
2025-03-11 14:19:02,771 - telegram_bot.monitors.auto_analyzer - INFO - AutoAnalyzer 초기화 시작
2025-03-11 14:19:02,771 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 설정 시작
2025-03-11 14:19:02,771 - telegram_bot.monitors.auto_analyzer - INFO - 다음 실행 예정 시간: 2025-03-11 15:00:00
2025-03-11 14:19:02,771 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-03-11 14:19:02,771 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 설정 완료
2025-03-11 14:19:02,771 - telegram_bot.bot - INFO - 봇 초기화 시작...
2025-03-11 14:19:02,776 - services.trade_history_service - INFO - === 포지션 정보 초기화 시작 ===
2025-03-11 14:19:02,776 - services.trade_history_service - INFO - 조회 기간: 2024-12-11 ~ 2025-03-11
2025-03-11 14:19:02,777 - services.trade_store - INFO - 날짜 범위 조회: 20241211 ~ 20250311
2025-03-11 14:19:02,777 - services.trade_store - INFO - 날짜: 20241211, 포지션 수: 1건
2025-03-11 14:19:02,778 - services.trade_store - INFO - 날짜: 20241212, 포지션 수: 1건
2025-03-11 14:19:02,778 - services.trade_store - INFO - 날짜: 20241213, 포지션 수: 2건
2025-03-11 14:19:02,778 - services.trade_store - INFO - 날짜: 20241214, 포지션 수: 2건
2025-03-11 14:19:02,778 - services.trade_store - INFO - 날짜: 20241215, 포지션 수: 0건
2025-03-11 14:19:02,779 - services.trade_store - INFO - 날짜: 20241216, 포지션 수: 0건
2025-03-11 14:19:02,779 - services.trade_store - INFO - 날짜: 20241217, 포지션 수: 10건
2025-03-11 14:19:02,779 - services.trade_store - INFO - 날짜: 20241218, 포지션 수: 5건
2025-03-11 14:19:02,780 - services.trade_store - INFO - 날짜: 20241219, 포지션 수: 1건
2025-03-11 14:19:02,780 - services.trade_store - INFO - 날짜: 20241220, 포지션 수: 31건
2025-03-11 14:19:02,780 - services.trade_store - INFO - 날짜: 20241221, 포지션 수: 3건
2025-03-11 14:19:02,781 - services.trade_store - INFO - 날짜: 20241222, 포지션 수: 10건
2025-03-11 14:19:02,781 - services.trade_store - INFO - 날짜: 20241223, 포지션 수: 7건
2025-03-11 14:19:02,782 - services.trade_store - INFO - 날짜: 20241224, 포지션 수: 11건
2025-03-11 14:19:02,783 - services.trade_store - INFO - 날짜: 20241225, 포지션 수: 2건
2025-03-11 14:19:02,783 - services.trade_store - INFO - 날짜: 20241226, 포지션 수: 7건
2025-03-11 14:19:02,783 - services.trade_store - INFO - 날짜: 20241227, 포지션 수: 7건
2025-03-11 14:19:02,784 - services.trade_store - INFO - 날짜: 20241228, 포지션 수: 4건
2025-03-11 14:19:02,784 - services.trade_store - INFO - 날짜: 20241229, 포지션 수: 0건
2025-03-11 14:19:02,785 - services.trade_store - INFO - 날짜: 20241230, 포지션 수: 15건
2025-03-11 14:19:02,785 - services.trade_store - INFO - 날짜: 20241231, 포지션 수: 8건
2025-03-11 14:19:02,785 - services.trade_store - INFO - 날짜: 20250101, 포지션 수: 0건
2025-03-11 14:19:02,786 - services.trade_store - INFO - 날짜: 20250102, 포지션 수: 0건
2025-03-11 14:19:02,786 - services.trade_store - INFO - 날짜: 20250103, 포지션 수: 0건
2025-03-11 14:19:02,786 - services.trade_store - INFO - 날짜: 20250104, 포지션 수: 0건
2025-03-11 14:19:02,786 - services.trade_store - INFO - 날짜: 20250105, 포지션 수: 0건
2025-03-11 14:19:02,786 - services.trade_store - INFO - 날짜: 20250106, 포지션 수: 0건
2025-03-11 14:19:02,786 - services.trade_store - INFO - 날짜: 20250107, 포지션 수: 0건
2025-03-11 14:19:02,786 - services.trade_store - INFO - 날짜: 20250108, 포지션 수: 0건
2025-03-11 14:19:02,786 - services.trade_store - INFO - 날짜: 20250109, 포지션 수: 0건
2025-03-11 14:19:02,787 - services.trade_store - INFO - 날짜: 20250110, 포지션 수: 0건
2025-03-11 14:19:02,787 - services.trade_store - INFO - 날짜: 20250111, 포지션 수: 0건
2025-03-11 14:19:02,787 - services.trade_store - INFO - 날짜: 20250112, 포지션 수: 0건
2025-03-11 14:19:02,787 - services.trade_store - INFO - 날짜: 20250113, 포지션 수: 0건
2025-03-11 14:19:02,787 - services.trade_store - INFO - 날짜: 20250114, 포지션 수: 0건
2025-03-11 14:19:02,787 - services.trade_store - INFO - 날짜: 20250115, 포지션 수: 0건
2025-03-11 14:19:02,788 - services.trade_store - INFO - 날짜: 20250116, 포지션 수: 0건
2025-03-11 14:19:02,788 - services.trade_store - INFO - 날짜: 20250117, 포지션 수: 0건
2025-03-11 14:19:02,788 - services.trade_store - INFO - 날짜: 20250118, 포지션 수: 0건
2025-03-11 14:19:02,788 - services.trade_store - INFO - 날짜: 20250119, 포지션 수: 0건
2025-03-11 14:19:02,788 - services.trade_store - INFO - 날짜: 20250120, 포지션 수: 0건
2025-03-11 14:19:02,788 - services.trade_store - INFO - 날짜: 20250121, 포지션 수: 0건
2025-03-11 14:19:02,788 - services.trade_store - INFO - 날짜: 20250122, 포지션 수: 0건
2025-03-11 14:19:02,788 - services.trade_store - INFO - 날짜: 20250123, 포지션 수: 0건
2025-03-11 14:19:02,789 - services.trade_store - INFO - 날짜: 20250124, 포지션 수: 0건
2025-03-11 14:19:02,789 - services.trade_store - INFO - 날짜: 20250125, 포지션 수: 0건
2025-03-11 14:19:02,790 - services.trade_store - INFO - 날짜: 20250126, 포지션 수: 0건
2025-03-11 14:19:02,790 - services.trade_store - INFO - 날짜: 20250127, 포지션 수: 0건
2025-03-11 14:19:02,790 - services.trade_store - INFO - 날짜: 20250128, 포지션 수: 0건
2025-03-11 14:19:02,790 - services.trade_store - INFO - 날짜: 20250129, 포지션 수: 0건
2025-03-11 14:19:02,791 - services.trade_store - INFO - 날짜: 20250130, 포지션 수: 0건
2025-03-11 14:19:02,791 - services.trade_store - INFO - 날짜: 20250131, 포지션 수: 0건
2025-03-11 14:19:02,791 - services.trade_store - INFO - 날짜: 20250201, 포지션 수: 0건
2025-03-11 14:19:02,792 - services.trade_store - INFO - 날짜: 20250202, 포지션 수: 0건
2025-03-11 14:19:02,792 - services.trade_store - INFO - 날짜: 20250203, 포지션 수: 0건
2025-03-11 14:19:02,792 - services.trade_store - INFO - 날짜: 20250204, 포지션 수: 0건
2025-03-11 14:19:02,792 - services.trade_store - INFO - 날짜: 20250205, 포지션 수: 0건
2025-03-11 14:19:02,792 - services.trade_store - INFO - 날짜: 20250206, 포지션 수: 0건
2025-03-11 14:19:02,792 - services.trade_store - INFO - 날짜: 20250207, 포지션 수: 0건
2025-03-11 14:19:02,792 - services.trade_store - INFO - 날짜: 20250208, 포지션 수: 0건
2025-03-11 14:19:02,792 - services.trade_store - INFO - 날짜: 20250209, 포지션 수: 0건
2025-03-11 14:19:02,792 - services.trade_store - INFO - 날짜: 20250210, 포지션 수: 0건
2025-03-11 14:19:02,792 - services.trade_store - INFO - 날짜: 20250211, 포지션 수: 0건
2025-03-11 14:19:02,792 - services.trade_store - INFO - 날짜: 20250212, 포지션 수: 0건
2025-03-11 14:19:02,793 - services.trade_store - INFO - 날짜: 20250213, 포지션 수: 0건
2025-03-11 14:19:02,793 - services.trade_store - INFO - 날짜: 20250214, 포지션 수: 2건
2025-03-11 14:19:02,793 - services.trade_store - INFO - 날짜: 20250215, 포지션 수: 2건
2025-03-11 14:19:02,793 - services.trade_store - INFO - 날짜: 20250216, 포지션 수: 0건
2025-03-11 14:19:02,793 - services.trade_store - INFO - 날짜: 20250217, 포지션 수: 2건
2025-03-11 14:19:02,794 - services.trade_store - INFO - 날짜: 20250218, 포지션 수: 0건
2025-03-11 14:19:02,794 - services.trade_store - INFO - 날짜: 20250219, 포지션 수: 0건
2025-03-11 14:19:02,794 - services.trade_store - INFO - 날짜: 20250220, 포지션 수: 0건
2025-03-11 14:19:02,794 - services.trade_store - INFO - 날짜: 20250221, 포지션 수: 2건
2025-03-11 14:19:02,794 - services.trade_store - INFO - 날짜: 20250222, 포지션 수: 0건
2025-03-11 14:19:02,794 - services.trade_store - INFO - 날짜: 20250223, 포지션 수: 0건
2025-03-11 14:19:02,794 - services.trade_store - INFO - 날짜: 20250224, 포지션 수: 0건
2025-03-11 14:19:02,794 - services.trade_store - INFO - 날짜: 20250225, 포지션 수: 0건
2025-03-11 14:19:02,795 - services.trade_store - INFO - 날짜: 20250226, 포지션 수: 0건
2025-03-11 14:19:02,795 - services.trade_store - INFO - 날짜: 20250227, 포지션 수: 0건
2025-03-11 14:19:02,795 - services.trade_store - INFO - 날짜: 20250228, 포지션 수: 0건
2025-03-11 14:19:02,795 - services.trade_store - INFO - 날짜: 20250301, 포지션 수: 0건
2025-03-11 14:19:02,795 - services.trade_store - INFO - 날짜: 20250302, 포지션 수: 0건
2025-03-11 14:19:02,796 - services.trade_store - INFO - 날짜: 20250303, 포지션 수: 0건
2025-03-11 14:19:02,796 - services.trade_store - INFO - 날짜: 20250304, 포지션 수: 0건
2025-03-11 14:19:02,796 - services.trade_store - INFO - 날짜: 20250305, 포지션 수: 0건
2025-03-11 14:19:02,796 - services.trade_store - INFO - 날짜: 20250306, 포지션 수: 0건
2025-03-11 14:19:02,796 - services.trade_store - INFO - 날짜: 20250307, 포지션 수: 0건
2025-03-11 14:19:02,797 - services.trade_store - INFO - 날짜: 20250308, 포지션 수: 0건
2025-03-11 14:19:02,797 - services.trade_store - INFO - 날짜: 20250309, 포지션 수: 0건
2025-03-11 14:19:02,797 - services.trade_store - INFO - 날짜: 20250310, 포지션 수: 0건
2025-03-11 14:19:02,797 - services.trade_store - INFO - 날짜: 20250311, 포지션 수: 0건
2025-03-11 14:19:02,797 - services.trade_store - INFO - 총 135건의 포지션 데이터 로드됨
2025-03-11 14:19:02,797 - services.trade_history_service - INFO - 기존 데이터: 135건
2025-03-11 14:19:02,797 - telegram_bot.bot - INFO - Application 빌드 시작...
2025-03-11 14:19:03,249 - telegram_bot.bot - INFO - 봇 초기화 완료, 시작 준비 중...
2025-03-11 14:19:03,262 - telegram_bot.monitors.auto_analyzer - INFO - AutoAnalyzer 시작 요청됨
2025-03-11 14:19:03,263 - apscheduler.scheduler - INFO - Added job "AutoAnalyzer._scheduled_analysis" to job store "default"
2025-03-11 14:19:03,263 - apscheduler.scheduler - INFO - Scheduler started
2025-03-11 14:19:03,263 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 시작됨. 다음 실행 시간: 2025-03-11 15:00:00+09:00
2025-03-11 14:19:03,263 - telegram_bot.monitors.auto_analyzer - INFO - 초기 분석 실행 시작
2025-03-11 14:19:03,263 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄된 분석 시작 - 2025-03-11 14:19:03.263509
2025-03-11 14:19:03,263 - telegram_bot.monitors.auto_analyzer - INFO - 🔄' 1시간봉 분석 시작 (자동) ...
2025-03-11 14:19:03,263 - services.market_data_service - INFO - OHLCV 데이터 조회 시작 - 심볼: BTCUSDT, 시간대: 1h
2025-03-11 14:19:03,532 - ai.gpt_analyzer - INFO - 계산된 지표: ['open', 'high', 'low', 'close', 'volume', 'price_change_24h', 'volume_change_24h', 'rsi', 'macd', 'macd_signal', 'bb_upper', 'bb_middle', 'bb_lower', 'sma_10', 'sma_30', 'adx', 'di_plus', 'di_minus', 'trend', 'trend_strength', 'divergence_type', 'divergence_desc']
2025-03-11 14:19:03,532 - ai.gpt_analyzer - INFO - 시장 데이터: {'symbol': 'BTCUSDT', 'last_price': 55814.0, 'bid': 55626.1, 'ask': 55829.3, 'volume': 863399.192, 'timestamp': None}
2025-03-11 14:19:03,532 - ai.gpt_client - INFO - GPT API 호출 시작 (캐시 사용: False)
2025-03-11 14:19:03,532 - ai.gpt_client - INFO - 캐시 사용하지 않음 - 실제 API 호출
2025-03-11 14:19:05,246 - telegram_bot.formatters.storage_formatter - INFO - 1h 분석 결과 저장 완료: C:\Users\oasis\Aibybit_2\src\data\analysis\analysis_1h.json
2025-03-11 14:19:06,767 - telegram_bot.monitors.auto_analyzer - INFO - 분석 결과 position_suggestion: SELL
2025-03-11 14:19:06,767 - telegram_bot.monitors.auto_analyzer - INFO - 매매 신호 감지: SELL
2025-03-11 14:19:06,767 - order_service - INFO - 매매 신호 실행: {'position_suggestion': 'SELL', 'leverage': 5, 'position_size': 10, 'entry_price': 55814.0, 'stop_loss': 56000.0, 'take_profit1': 54800.0, 'take_profit2': 53800.0, 'reason': '하락 추세 및 부정적인 지표'}
2025-03-11 14:19:06,767 - order_service - INFO - 주문 시도: {'symbol': 'BTCUSDT', 'side': 'Sell', 'leverage': 5, 'position_size': 10, 'entry_price': 55814.0, 'stop_loss': 56000.0, 'take_profit': 54800.0, 'is_btc_unit': False}
2025-03-11 14:19:06,767 - order_service - INFO - 주문 상세 정보: {
  "symbol": "BTCUSDT",
  "side": "Sell",
  "leverage": 5,
  "position_size": 10,
  "entry_price": 55814.0,
  "stop_loss": 56000.0,
  "take_profit": 54800.0,
  "is_btc_unit": false
}
2025-03-11 14:19:06,767 - order_service - INFO - 주문 시도: {'symbol': 'BTCUSDT', 'side': 'Sell', 'leverage': 5, 'position_size': 10, 'entry_price': 55814.0, 'stop_loss': 56000.0, 'take_profit': 54800.0, 'is_btc_unit': False}
2025-03-11 14:19:07,870 - order_service - INFO - 현재 포지션: {'symbol': 'BTC/USDT:USDT', 'side': 'Short', 'size': 0.051, 'leverage': 5, 'entryPrice': 55800.0, 'markPrice': 55814.0, 'unrealisedPnl': -0.714, 'stopLoss': 0.0, 'takeProfit': 0.0}
2025-03-11 14:19:07,870 - order_service - INFO - 레버리지 차이가 작음(0) - 크기만 조정
2025-03-11 14:19:08,054 - exchange.bybit_client - INFO - USDT 잔고 - 총자산: $53,354.00, 가용잔고: $0.00, 사용중: $0.00
2025-03-11 14:19:08,055 - order_service - ERROR - 포지션 관리 중 오류: 'available_balance'
2025-03-11 14:19:08,056 - order_service - ERROR - Traceback (most recent call last):
  File "C:\Users\oasis\Aibybit_2\src\services\order_service.py", line 165, in manage_existing_position
    logger.info(f"가용 잔고: ${balance['available_balance']}, 총 자산: ${balance['total_equity']}, 미실현 손익: ${balance['unrealised_pnl']}")
                           ~~~~~~~^^^^^^^^^^^^^^^^^^^^^
KeyError: 'available_balance'

2025-03-11 14:19:09,087 - telegram_bot.monitors.auto_analyzer - INFO - 초기 분석 실행 완료
2025-03-11 14:19:09,088 - telegram_bot.bot - INFO - 봇 시작 시도...
2025-03-11 14:19:09,088 - telegram_bot.bot - INFO - === 봇 시작 시도 ===
2025-03-11 14:19:09,602 - apscheduler.scheduler - INFO - Scheduler started
2025-03-11 14:19:09,613 - telegram.ext.Application - INFO - Application started
2025-03-11 14:19:09,881 - telegram_bot.bot - INFO - 🤖 바이빗 트레이딩 봇이 시작되었습니다
2025-03-11 14:24:33,307 - main - INFO - 환경변수 및 설정 초기화 중...
2025-03-11 14:24:33,307 - main - INFO - Bybit 테스트넷 클라이언트 초기화 중...
2025-03-11 14:24:33,539 - main - INFO - 서비스 초기화 중...
2025-03-11 14:24:33,539 - main - INFO - 마켓 데이터 서비스 중...
2025-03-11 14:24:35,268 - services.market_data_service - INFO - 마켓 데이터 로드 완료
2025-03-11 14:24:35,520 - telegram_bot.bot - INFO - 텔레그램 설정 로드:
2025-03-11 14:24:35,520 - telegram_bot.bot - INFO - - admin_chat_id: 583881676
2025-03-11 14:24:35,520 - telegram_bot.bot - INFO - - alert_chat_ids: [-1002464784986]
2025-03-11 14:24:36,002 - telegram_bot.monitors.auto_analyzer - INFO - AutoAnalyzer 초기화 시작
2025-03-11 14:24:36,002 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 설정 시작
2025-03-11 14:24:36,018 - telegram_bot.monitors.auto_analyzer - INFO - 다음 실행 예정 시간: 2025-03-11 15:00:00
2025-03-11 14:24:36,019 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-03-11 14:24:36,020 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 설정 완료
2025-03-11 14:24:36,020 - telegram_bot.bot - INFO - 봇 초기화 시작...
2025-03-11 14:24:36,020 - services.trade_history_service - INFO - === 포지션 정보 초기화 시작 ===
2025-03-11 14:24:36,020 - services.trade_history_service - INFO - 조회 기간: 2024-12-11 ~ 2025-03-11
2025-03-11 14:24:36,020 - services.trade_store - INFO - 날짜 범위 조회: 20241211 ~ 20250311
2025-03-11 14:24:36,022 - services.trade_store - INFO - 날짜: 20241211, 포지션 수: 1건
2025-03-11 14:24:36,022 - services.trade_store - INFO - 날짜: 20241212, 포지션 수: 1건
2025-03-11 14:24:36,023 - services.trade_store - INFO - 날짜: 20241213, 포지션 수: 2건
2025-03-11 14:24:36,024 - services.trade_store - INFO - 날짜: 20241214, 포지션 수: 2건
2025-03-11 14:24:36,024 - services.trade_store - INFO - 날짜: 20241215, 포지션 수: 0건
2025-03-11 14:24:36,024 - services.trade_store - INFO - 날짜: 20241216, 포지션 수: 0건
2025-03-11 14:24:36,025 - services.trade_store - INFO - 날짜: 20241217, 포지션 수: 10건
2025-03-11 14:24:36,025 - services.trade_store - INFO - 날짜: 20241218, 포지션 수: 5건
2025-03-11 14:24:36,025 - services.trade_store - INFO - 날짜: 20241219, 포지션 수: 1건
2025-03-11 14:24:36,026 - services.trade_store - INFO - 날짜: 20241220, 포지션 수: 31건
2025-03-11 14:24:36,026 - services.trade_store - INFO - 날짜: 20241221, 포지션 수: 3건
2025-03-11 14:24:36,026 - services.trade_store - INFO - 날짜: 20241222, 포지션 수: 10건
2025-03-11 14:24:36,028 - services.trade_store - INFO - 날짜: 20241223, 포지션 수: 7건
2025-03-11 14:24:36,028 - services.trade_store - INFO - 날짜: 20241224, 포지션 수: 11건
2025-03-11 14:24:36,029 - services.trade_store - INFO - 날짜: 20241225, 포지션 수: 2건
2025-03-11 14:24:36,029 - services.trade_store - INFO - 날짜: 20241226, 포지션 수: 7건
2025-03-11 14:24:36,030 - services.trade_store - INFO - 날짜: 20241227, 포지션 수: 7건
2025-03-11 14:24:36,030 - services.trade_store - INFO - 날짜: 20241228, 포지션 수: 4건
2025-03-11 14:24:36,030 - services.trade_store - INFO - 날짜: 20241229, 포지션 수: 0건
2025-03-11 14:24:36,031 - services.trade_store - INFO - 날짜: 20241230, 포지션 수: 15건
2025-03-11 14:24:36,031 - services.trade_store - INFO - 날짜: 20241231, 포지션 수: 8건
2025-03-11 14:24:36,032 - services.trade_store - INFO - 날짜: 20250101, 포지션 수: 0건
2025-03-11 14:24:36,032 - services.trade_store - INFO - 날짜: 20250102, 포지션 수: 0건
2025-03-11 14:24:36,032 - services.trade_store - INFO - 날짜: 20250103, 포지션 수: 0건
2025-03-11 14:24:36,032 - services.trade_store - INFO - 날짜: 20250104, 포지션 수: 0건
2025-03-11 14:24:36,032 - services.trade_store - INFO - 날짜: 20250105, 포지션 수: 0건
2025-03-11 14:24:36,032 - services.trade_store - INFO - 날짜: 20250106, 포지션 수: 0건
2025-03-11 14:24:36,033 - services.trade_store - INFO - 날짜: 20250107, 포지션 수: 0건
2025-03-11 14:24:36,033 - services.trade_store - INFO - 날짜: 20250108, 포지션 수: 0건
2025-03-11 14:24:36,033 - services.trade_store - INFO - 날짜: 20250109, 포지션 수: 0건
2025-03-11 14:24:36,033 - services.trade_store - INFO - 날짜: 20250110, 포지션 수: 0건
2025-03-11 14:24:36,033 - services.trade_store - INFO - 날짜: 20250111, 포지션 수: 0건
2025-03-11 14:24:36,033 - services.trade_store - INFO - 날짜: 20250112, 포지션 수: 0건
2025-03-11 14:24:36,033 - services.trade_store - INFO - 날짜: 20250113, 포지션 수: 0건
2025-03-11 14:24:36,033 - services.trade_store - INFO - 날짜: 20250114, 포지션 수: 0건
2025-03-11 14:24:36,033 - services.trade_store - INFO - 날짜: 20250115, 포지션 수: 0건
2025-03-11 14:24:36,034 - services.trade_store - INFO - 날짜: 20250116, 포지션 수: 0건
2025-03-11 14:24:36,034 - services.trade_store - INFO - 날짜: 20250117, 포지션 수: 0건
2025-03-11 14:24:36,034 - services.trade_store - INFO - 날짜: 20250118, 포지션 수: 0건
2025-03-11 14:24:36,034 - services.trade_store - INFO - 날짜: 20250119, 포지션 수: 0건
2025-03-11 14:24:36,034 - services.trade_store - INFO - 날짜: 20250120, 포지션 수: 0건
2025-03-11 14:24:36,034 - services.trade_store - INFO - 날짜: 20250121, 포지션 수: 0건
2025-03-11 14:24:36,034 - services.trade_store - INFO - 날짜: 20250122, 포지션 수: 0건
2025-03-11 14:24:36,034 - services.trade_store - INFO - 날짜: 20250123, 포지션 수: 0건
2025-03-11 14:24:36,034 - services.trade_store - INFO - 날짜: 20250124, 포지션 수: 0건
2025-03-11 14:24:36,035 - services.trade_store - INFO - 날짜: 20250125, 포지션 수: 0건
2025-03-11 14:24:36,035 - services.trade_store - INFO - 날짜: 20250126, 포지션 수: 0건
2025-03-11 14:24:36,035 - services.trade_store - INFO - 날짜: 20250127, 포지션 수: 0건
2025-03-11 14:24:36,035 - services.trade_store - INFO - 날짜: 20250128, 포지션 수: 0건
2025-03-11 14:24:36,035 - services.trade_store - INFO - 날짜: 20250129, 포지션 수: 0건
2025-03-11 14:24:36,035 - services.trade_store - INFO - 날짜: 20250130, 포지션 수: 0건
2025-03-11 14:24:36,035 - services.trade_store - INFO - 날짜: 20250131, 포지션 수: 0건
2025-03-11 14:24:36,035 - services.trade_store - INFO - 날짜: 20250201, 포지션 수: 0건
2025-03-11 14:24:36,035 - services.trade_store - INFO - 날짜: 20250202, 포지션 수: 0건
2025-03-11 14:24:36,035 - services.trade_store - INFO - 날짜: 20250203, 포지션 수: 0건
2025-03-11 14:24:36,035 - services.trade_store - INFO - 날짜: 20250204, 포지션 수: 0건
2025-03-11 14:24:36,035 - services.trade_store - INFO - 날짜: 20250205, 포지션 수: 0건
2025-03-11 14:24:36,035 - services.trade_store - INFO - 날짜: 20250206, 포지션 수: 0건
2025-03-11 14:24:36,035 - services.trade_store - INFO - 날짜: 20250207, 포지션 수: 0건
2025-03-11 14:24:36,035 - services.trade_store - INFO - 날짜: 20250208, 포지션 수: 0건
2025-03-11 14:24:36,035 - services.trade_store - INFO - 날짜: 20250209, 포지션 수: 0건
2025-03-11 14:24:36,035 - services.trade_store - INFO - 날짜: 20250210, 포지션 수: 0건
2025-03-11 14:24:36,035 - services.trade_store - INFO - 날짜: 20250211, 포지션 수: 0건
2025-03-11 14:24:36,035 - services.trade_store - INFO - 날짜: 20250212, 포지션 수: 0건
2025-03-11 14:24:36,035 - services.trade_store - INFO - 날짜: 20250213, 포지션 수: 0건
2025-03-11 14:24:36,035 - services.trade_store - INFO - 날짜: 20250214, 포지션 수: 2건
2025-03-11 14:24:36,035 - services.trade_store - INFO - 날짜: 20250215, 포지션 수: 2건
2025-03-11 14:24:36,035 - services.trade_store - INFO - 날짜: 20250216, 포지션 수: 0건
2025-03-11 14:24:36,035 - services.trade_store - INFO - 날짜: 20250217, 포지션 수: 2건
2025-03-11 14:24:36,035 - services.trade_store - INFO - 날짜: 20250218, 포지션 수: 0건
2025-03-11 14:24:36,035 - services.trade_store - INFO - 날짜: 20250219, 포지션 수: 0건
2025-03-11 14:24:36,035 - services.trade_store - INFO - 날짜: 20250220, 포지션 수: 0건
2025-03-11 14:24:36,035 - services.trade_store - INFO - 날짜: 20250221, 포지션 수: 2건
2025-03-11 14:24:36,035 - services.trade_store - INFO - 날짜: 20250222, 포지션 수: 0건
2025-03-11 14:24:36,035 - services.trade_store - INFO - 날짜: 20250223, 포지션 수: 0건
2025-03-11 14:24:36,035 - services.trade_store - INFO - 날짜: 20250224, 포지션 수: 0건
2025-03-11 14:24:36,035 - services.trade_store - INFO - 날짜: 20250225, 포지션 수: 0건
2025-03-11 14:24:36,035 - services.trade_store - INFO - 날짜: 20250226, 포지션 수: 0건
2025-03-11 14:24:36,035 - services.trade_store - INFO - 날짜: 20250227, 포지션 수: 0건
2025-03-11 14:24:36,035 - services.trade_store - INFO - 날짜: 20250228, 포지션 수: 0건
2025-03-11 14:24:36,040 - services.trade_store - INFO - 날짜: 20250301, 포지션 수: 0건
2025-03-11 14:24:36,040 - services.trade_store - INFO - 날짜: 20250302, 포지션 수: 0건
2025-03-11 14:24:36,041 - services.trade_store - INFO - 날짜: 20250303, 포지션 수: 0건
2025-03-11 14:24:36,042 - services.trade_store - INFO - 날짜: 20250304, 포지션 수: 0건
2025-03-11 14:24:36,048 - services.trade_store - INFO - 날짜: 20250305, 포지션 수: 0건
2025-03-11 14:24:36,048 - services.trade_store - INFO - 날짜: 20250306, 포지션 수: 0건
2025-03-11 14:24:36,048 - services.trade_store - INFO - 날짜: 20250307, 포지션 수: 0건
2025-03-11 14:24:36,048 - services.trade_store - INFO - 날짜: 20250308, 포지션 수: 0건
2025-03-11 14:24:36,048 - services.trade_store - INFO - 날짜: 20250309, 포지션 수: 0건
2025-03-11 14:24:36,048 - services.trade_store - INFO - 날짜: 20250310, 포지션 수: 0건
2025-03-11 14:24:36,048 - services.trade_store - INFO - 날짜: 20250311, 포지션 수: 0건
2025-03-11 14:24:36,048 - services.trade_store - INFO - 총 135건의 포지션 데이터 로드됨
2025-03-11 14:24:36,048 - services.trade_history_service - INFO - 기존 데이터: 135건
2025-03-11 14:24:36,048 - telegram_bot.bot - INFO - Application 빌드 시작...
2025-03-11 14:24:36,490 - telegram_bot.bot - INFO - 봇 초기화 완료, 시작 준비 중...
2025-03-11 14:24:36,490 - telegram_bot.bot - INFO - 봇 시작 시도...
2025-03-11 14:24:36,496 - telegram_bot.bot - INFO - === 봇 시작 시도 ===
2025-03-11 14:24:37,562 - apscheduler.scheduler - INFO - Scheduler started
2025-03-11 14:24:37,574 - telegram.ext.Application - INFO - Application started
2025-03-11 14:24:37,574 - telegram_bot.bot - INFO - 🤖 바이빗 트레이딩 봇이 시작되었습니다
2025-03-11 14:24:38,527 - telegram_bot.monitors.auto_analyzer - INFO - AutoAnalyzer 시작 요청됨
2025-03-11 14:24:38,527 - apscheduler.scheduler - INFO - Added job "AutoAnalyzer._scheduled_analysis" to job store "default"
2025-03-11 14:24:38,527 - apscheduler.scheduler - INFO - Scheduler started
2025-03-11 14:24:38,527 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 시작됨. 다음 실행 시간: 2025-03-11 15:00:00+09:00
2025-03-11 14:24:38,527 - telegram_bot.monitors.auto_analyzer - INFO - 초기 분석 실행 시작
2025-03-11 14:24:38,527 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄된 분석 시작 - 2025-03-11 14:24:38.527150
2025-03-11 14:24:38,527 - telegram_bot.monitors.auto_analyzer - INFO - 🔄' 1시간봉 분석 시작 (자동) ...
2025-03-11 14:24:38,527 - services.market_data_service - INFO - OHLCV 데이터 조회 시작 - 심볼: BTCUSDT, 시간대: 1h
2025-03-11 14:24:38,809 - ai.gpt_analyzer - INFO - 계산된 지표: ['open', 'high', 'low', 'close', 'volume', 'price_change_24h', 'volume_change_24h', 'rsi', 'macd', 'macd_signal', 'bb_upper', 'bb_middle', 'bb_lower', 'sma_10', 'sma_30', 'adx', 'di_plus', 'di_minus', 'trend', 'trend_strength', 'divergence_type', 'divergence_desc']
2025-03-11 14:24:38,809 - ai.gpt_analyzer - INFO - 시장 데이터: {'symbol': 'BTCUSDT', 'last_price': 55888.1, 'bid': 55636.1, 'ask': 55888.1, 'volume': 863400.342, 'timestamp': None}
2025-03-11 14:24:38,809 - ai.gpt_client - INFO - GPT API 호출 시작 (캐시 사용: False)
2025-03-11 14:24:38,809 - ai.gpt_client - INFO - 캐시 사용하지 않음 - 실제 API 호출
2025-03-11 14:24:40,770 - telegram_bot.formatters.storage_formatter - INFO - 1h 분석 결과 저장 완료: C:\Users\oasis\Aibybit_2\src\data\analysis\analysis_1h.json
2025-03-11 14:24:41,752 - telegram_bot.monitors.auto_analyzer - INFO - 분석 결과 position_suggestion: SELL
2025-03-11 14:24:41,752 - telegram_bot.monitors.auto_analyzer - INFO - 매매 신호 감지: SELL
2025-03-11 14:24:41,752 - order_service - INFO - 매매 신호 실행: {'position_suggestion': 'SELL', 'leverage': 5, 'position_size': 10, 'entry_price': 55888.1, 'stop_loss': 56000.0, 'take_profit1': 55000.0, 'take_profit2': 54000.0, 'reason': '하락 추세 및 부정적인 지표'}
2025-03-11 14:24:41,752 - order_service - INFO - 주문 시도: {'symbol': 'BTCUSDT', 'side': 'Sell', 'leverage': 5, 'position_size': 10, 'entry_price': 55888.1, 'stop_loss': 56000.0, 'take_profit': 55000.0, 'is_btc_unit': False}
2025-03-11 14:24:41,752 - order_service - INFO - 주문 상세 정보: {
  "symbol": "BTCUSDT",
  "side": "Sell",
  "leverage": 5,
  "position_size": 10,
  "entry_price": 55888.1,
  "stop_loss": 56000.0,
  "take_profit": 55000.0,
  "is_btc_unit": false
}
2025-03-11 14:24:41,752 - order_service - INFO - 주문 시도: {'symbol': 'BTCUSDT', 'side': 'Sell', 'leverage': 5, 'position_size': 10, 'entry_price': 55888.1, 'stop_loss': 56000.0, 'take_profit': 55000.0, 'is_btc_unit': False}
2025-03-11 14:24:42,093 - order_service - INFO - 현재 포지션: {'symbol': 'BTC/USDT:USDT', 'side': 'Short', 'size': 0.051, 'leverage': 5, 'entryPrice': 55800.0, 'markPrice': 55888.1, 'unrealisedPnl': -4.4931, 'stopLoss': 0.0, 'takeProfit': 0.0}
2025-03-11 14:24:42,095 - order_service - INFO - 레버리지 차이가 작음(0) - 크기만 조정
2025-03-11 14:24:42,293 - exchange.bybit_client - INFO - USDT 잔고 - 총자산: $53,354.00, 가용잔고: $0.00, 사용중: $0.00
2025-03-11 14:24:42,293 - order_service - INFO - 가용 잔고: $0.0, 총 자산: $53353.99910153, 사용중: $0.0
2025-03-11 14:24:42,293 - order_service - ERROR - 포지션 관리 중 오류: OrderService._calculate_position_size() got an unexpected keyword argument 'unrealised_pnl'
2025-03-11 14:24:42,293 - order_service - ERROR - Traceback (most recent call last):
  File "C:\Users\oasis\Aibybit_2\src\services\order_service.py", line 170, in manage_existing_position
    target_size = await self._calculate_position_size(
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: OrderService._calculate_position_size() got an unexpected keyword argument 'unrealised_pnl'

2025-03-11 14:24:43,229 - telegram_bot.monitors.auto_analyzer - INFO - 초기 분석 실행 완료
2025-03-11 14:27:48,200 - main - INFO - 환경변수 및 설정 초기화 중...
2025-03-11 14:27:48,200 - main - INFO - Bybit 테스트넷 클라이언트 초기화 중...
2025-03-11 14:27:48,439 - main - INFO - 서비스 초기화 중...
2025-03-11 14:27:48,439 - main - INFO - 마켓 데이터 서비스 중...
2025-03-11 14:27:50,454 - services.market_data_service - INFO - 마켓 데이터 로드 완료
2025-03-11 14:27:50,707 - telegram_bot.bot - INFO - 텔레그램 설정 로드:
2025-03-11 14:27:50,707 - telegram_bot.bot - INFO - - admin_chat_id: 583881676
2025-03-11 14:27:50,707 - telegram_bot.bot - INFO - - alert_chat_ids: [-1002464784986]
2025-03-11 14:27:51,154 - telegram_bot.monitors.auto_analyzer - INFO - AutoAnalyzer 초기화 시작
2025-03-11 14:27:51,154 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 설정 시작
2025-03-11 14:27:51,154 - telegram_bot.monitors.auto_analyzer - INFO - 다음 실행 예정 시간: 2025-03-11 15:00:00
2025-03-11 14:27:51,154 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-03-11 14:27:51,154 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 설정 완료
2025-03-11 14:27:51,154 - telegram_bot.bot - INFO - 봇 초기화 시작...
2025-03-11 14:27:51,170 - services.trade_history_service - INFO - === 포지션 정보 초기화 시작 ===
2025-03-11 14:27:51,170 - services.trade_history_service - INFO - 조회 기간: 2024-12-11 ~ 2025-03-11
2025-03-11 14:27:51,171 - services.trade_store - INFO - 날짜 범위 조회: 20241211 ~ 20250311
2025-03-11 14:27:51,172 - services.trade_store - INFO - 날짜: 20241211, 포지션 수: 1건
2025-03-11 14:27:51,172 - services.trade_store - INFO - 날짜: 20241212, 포지션 수: 1건
2025-03-11 14:27:51,172 - services.trade_store - INFO - 날짜: 20241213, 포지션 수: 2건
2025-03-11 14:27:51,174 - services.trade_store - INFO - 날짜: 20241214, 포지션 수: 2건
2025-03-11 14:27:51,174 - services.trade_store - INFO - 날짜: 20241215, 포지션 수: 0건
2025-03-11 14:27:51,175 - services.trade_store - INFO - 날짜: 20241216, 포지션 수: 0건
2025-03-11 14:27:51,175 - services.trade_store - INFO - 날짜: 20241217, 포지션 수: 10건
2025-03-11 14:27:51,175 - services.trade_store - INFO - 날짜: 20241218, 포지션 수: 5건
2025-03-11 14:27:51,176 - services.trade_store - INFO - 날짜: 20241219, 포지션 수: 1건
2025-03-11 14:27:51,176 - services.trade_store - INFO - 날짜: 20241220, 포지션 수: 31건
2025-03-11 14:27:51,177 - services.trade_store - INFO - 날짜: 20241221, 포지션 수: 3건
2025-03-11 14:27:51,177 - services.trade_store - INFO - 날짜: 20241222, 포지션 수: 10건
2025-03-11 14:27:51,177 - services.trade_store - INFO - 날짜: 20241223, 포지션 수: 7건
2025-03-11 14:27:51,178 - services.trade_store - INFO - 날짜: 20241224, 포지션 수: 11건
2025-03-11 14:27:51,178 - services.trade_store - INFO - 날짜: 20241225, 포지션 수: 2건
2025-03-11 14:27:51,178 - services.trade_store - INFO - 날짜: 20241226, 포지션 수: 7건
2025-03-11 14:27:51,179 - services.trade_store - INFO - 날짜: 20241227, 포지션 수: 7건
2025-03-11 14:27:51,179 - services.trade_store - INFO - 날짜: 20241228, 포지션 수: 4건
2025-03-11 14:27:51,179 - services.trade_store - INFO - 날짜: 20241229, 포지션 수: 0건
2025-03-11 14:27:51,179 - services.trade_store - INFO - 날짜: 20241230, 포지션 수: 15건
2025-03-11 14:27:51,180 - services.trade_store - INFO - 날짜: 20241231, 포지션 수: 8건
2025-03-11 14:27:51,180 - services.trade_store - INFO - 날짜: 20250101, 포지션 수: 0건
2025-03-11 14:27:51,181 - services.trade_store - INFO - 날짜: 20250102, 포지션 수: 0건
2025-03-11 14:27:51,181 - services.trade_store - INFO - 날짜: 20250103, 포지션 수: 0건
2025-03-11 14:27:51,181 - services.trade_store - INFO - 날짜: 20250104, 포지션 수: 0건
2025-03-11 14:27:51,182 - services.trade_store - INFO - 날짜: 20250105, 포지션 수: 0건
2025-03-11 14:27:51,182 - services.trade_store - INFO - 날짜: 20250106, 포지션 수: 0건
2025-03-11 14:27:51,182 - services.trade_store - INFO - 날짜: 20250107, 포지션 수: 0건
2025-03-11 14:27:51,182 - services.trade_store - INFO - 날짜: 20250108, 포지션 수: 0건
2025-03-11 14:27:51,182 - services.trade_store - INFO - 날짜: 20250109, 포지션 수: 0건
2025-03-11 14:27:51,182 - services.trade_store - INFO - 날짜: 20250110, 포지션 수: 0건
2025-03-11 14:27:51,183 - services.trade_store - INFO - 날짜: 20250111, 포지션 수: 0건
2025-03-11 14:27:51,183 - services.trade_store - INFO - 날짜: 20250112, 포지션 수: 0건
2025-03-11 14:27:51,183 - services.trade_store - INFO - 날짜: 20250113, 포지션 수: 0건
2025-03-11 14:27:51,183 - services.trade_store - INFO - 날짜: 20250114, 포지션 수: 0건
2025-03-11 14:27:51,183 - services.trade_store - INFO - 날짜: 20250115, 포지션 수: 0건
2025-03-11 14:27:51,183 - services.trade_store - INFO - 날짜: 20250116, 포지션 수: 0건
2025-03-11 14:27:51,183 - services.trade_store - INFO - 날짜: 20250117, 포지션 수: 0건
2025-03-11 14:27:51,183 - services.trade_store - INFO - 날짜: 20250118, 포지션 수: 0건
2025-03-11 14:27:51,183 - services.trade_store - INFO - 날짜: 20250119, 포지션 수: 0건
2025-03-11 14:27:51,183 - services.trade_store - INFO - 날짜: 20250120, 포지션 수: 0건
2025-03-11 14:27:51,183 - services.trade_store - INFO - 날짜: 20250121, 포지션 수: 0건
2025-03-11 14:27:51,183 - services.trade_store - INFO - 날짜: 20250122, 포지션 수: 0건
2025-03-11 14:27:51,185 - services.trade_store - INFO - 날짜: 20250123, 포지션 수: 0건
2025-03-11 14:27:51,185 - services.trade_store - INFO - 날짜: 20250124, 포지션 수: 0건
2025-03-11 14:27:51,185 - services.trade_store - INFO - 날짜: 20250125, 포지션 수: 0건
2025-03-11 14:27:51,185 - services.trade_store - INFO - 날짜: 20250126, 포지션 수: 0건
2025-03-11 14:27:51,185 - services.trade_store - INFO - 날짜: 20250127, 포지션 수: 0건
2025-03-11 14:27:51,185 - services.trade_store - INFO - 날짜: 20250128, 포지션 수: 0건
2025-03-11 14:27:51,185 - services.trade_store - INFO - 날짜: 20250129, 포지션 수: 0건
2025-03-11 14:27:51,185 - services.trade_store - INFO - 날짜: 20250130, 포지션 수: 0건
2025-03-11 14:27:51,185 - services.trade_store - INFO - 날짜: 20250131, 포지션 수: 0건
2025-03-11 14:27:51,186 - services.trade_store - INFO - 날짜: 20250201, 포지션 수: 0건
2025-03-11 14:27:51,186 - services.trade_store - INFO - 날짜: 20250202, 포지션 수: 0건
2025-03-11 14:27:51,186 - services.trade_store - INFO - 날짜: 20250203, 포지션 수: 0건
2025-03-11 14:27:51,186 - services.trade_store - INFO - 날짜: 20250204, 포지션 수: 0건
2025-03-11 14:27:51,186 - services.trade_store - INFO - 날짜: 20250205, 포지션 수: 0건
2025-03-11 14:27:51,186 - services.trade_store - INFO - 날짜: 20250206, 포지션 수: 0건
2025-03-11 14:27:51,186 - services.trade_store - INFO - 날짜: 20250207, 포지션 수: 0건
2025-03-11 14:27:51,186 - services.trade_store - INFO - 날짜: 20250208, 포지션 수: 0건
2025-03-11 14:27:51,187 - services.trade_store - INFO - 날짜: 20250209, 포지션 수: 0건
2025-03-11 14:27:51,187 - services.trade_store - INFO - 날짜: 20250210, 포지션 수: 0건
2025-03-11 14:27:51,187 - services.trade_store - INFO - 날짜: 20250211, 포지션 수: 0건
2025-03-11 14:27:51,187 - services.trade_store - INFO - 날짜: 20250212, 포지션 수: 0건
2025-03-11 14:27:51,187 - services.trade_store - INFO - 날짜: 20250213, 포지션 수: 0건
2025-03-11 14:27:51,187 - services.trade_store - INFO - 날짜: 20250214, 포지션 수: 2건
2025-03-11 14:27:51,188 - services.trade_store - INFO - 날짜: 20250215, 포지션 수: 2건
2025-03-11 14:27:51,188 - services.trade_store - INFO - 날짜: 20250216, 포지션 수: 0건
2025-03-11 14:27:51,188 - services.trade_store - INFO - 날짜: 20250217, 포지션 수: 2건
2025-03-11 14:27:51,189 - services.trade_store - INFO - 날짜: 20250218, 포지션 수: 0건
2025-03-11 14:27:51,189 - services.trade_store - INFO - 날짜: 20250219, 포지션 수: 0건
2025-03-11 14:27:51,189 - services.trade_store - INFO - 날짜: 20250220, 포지션 수: 0건
2025-03-11 14:27:51,189 - services.trade_store - INFO - 날짜: 20250221, 포지션 수: 2건
2025-03-11 14:27:51,191 - services.trade_store - INFO - 날짜: 20250222, 포지션 수: 0건
2025-03-11 14:27:51,191 - services.trade_store - INFO - 날짜: 20250223, 포지션 수: 0건
2025-03-11 14:27:51,191 - services.trade_store - INFO - 날짜: 20250224, 포지션 수: 0건
2025-03-11 14:27:51,191 - services.trade_store - INFO - 날짜: 20250225, 포지션 수: 0건
2025-03-11 14:27:51,192 - services.trade_store - INFO - 날짜: 20250226, 포지션 수: 0건
2025-03-11 14:27:51,192 - services.trade_store - INFO - 날짜: 20250227, 포지션 수: 0건
2025-03-11 14:27:51,192 - services.trade_store - INFO - 날짜: 20250228, 포지션 수: 0건
2025-03-11 14:27:51,192 - services.trade_store - INFO - 날짜: 20250301, 포지션 수: 0건
2025-03-11 14:27:51,193 - services.trade_store - INFO - 날짜: 20250302, 포지션 수: 0건
2025-03-11 14:27:51,193 - services.trade_store - INFO - 날짜: 20250303, 포지션 수: 0건
2025-03-11 14:27:51,193 - services.trade_store - INFO - 날짜: 20250304, 포지션 수: 0건
2025-03-11 14:27:51,193 - services.trade_store - INFO - 날짜: 20250305, 포지션 수: 0건
2025-03-11 14:27:51,193 - services.trade_store - INFO - 날짜: 20250306, 포지션 수: 0건
2025-03-11 14:27:51,193 - services.trade_store - INFO - 날짜: 20250307, 포지션 수: 0건
2025-03-11 14:27:51,194 - services.trade_store - INFO - 날짜: 20250308, 포지션 수: 0건
2025-03-11 14:27:51,194 - services.trade_store - INFO - 날짜: 20250309, 포지션 수: 0건
2025-03-11 14:27:51,194 - services.trade_store - INFO - 날짜: 20250310, 포지션 수: 0건
2025-03-11 14:27:51,194 - services.trade_store - INFO - 날짜: 20250311, 포지션 수: 0건
2025-03-11 14:27:51,194 - services.trade_store - INFO - 총 135건의 포지션 데이터 로드됨
2025-03-11 14:27:51,194 - services.trade_history_service - INFO - 기존 데이터: 135건
2025-03-11 14:27:51,195 - telegram_bot.bot - INFO - Application 빌드 시작...
2025-03-11 14:27:51,652 - telegram_bot.bot - INFO - 봇 초기화 완료, 시작 준비 중...
2025-03-11 14:27:51,653 - telegram_bot.bot - INFO - 봇 시작 시도...
2025-03-11 14:27:51,653 - telegram_bot.bot - INFO - === 봇 시작 시도 ===
2025-03-11 14:27:52,727 - apscheduler.scheduler - INFO - Scheduler started
2025-03-11 14:27:52,727 - telegram.ext.Application - INFO - Application started
2025-03-11 14:27:52,727 - telegram_bot.bot - INFO - 🤖 바이빗 트레이딩 봇이 시작되었습니다
2025-03-11 14:27:53,713 - telegram_bot.monitors.auto_analyzer - INFO - AutoAnalyzer 시작 요청됨
2025-03-11 14:27:53,713 - apscheduler.scheduler - INFO - Added job "AutoAnalyzer._scheduled_analysis" to job store "default"
2025-03-11 14:27:53,713 - apscheduler.scheduler - INFO - Scheduler started
2025-03-11 14:27:53,713 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 시작됨. 다음 실행 시간: 2025-03-11 15:00:00+09:00
2025-03-11 14:27:53,713 - telegram_bot.monitors.auto_analyzer - INFO - 초기 분석 실행 시작
2025-03-11 14:27:53,713 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄된 분석 시작 - 2025-03-11 14:27:53.713238
2025-03-11 14:27:53,713 - telegram_bot.monitors.auto_analyzer - INFO - 🔄' 1시간봉 분석 시작 (자동) ...
2025-03-11 14:27:53,713 - services.market_data_service - INFO - OHLCV 데이터 조회 시작 - 심볼: BTCUSDT, 시간대: 1h
2025-03-11 14:27:53,993 - ai.gpt_analyzer - INFO - 계산된 지표: ['open', 'high', 'low', 'close', 'volume', 'price_change_24h', 'volume_change_24h', 'rsi', 'macd', 'macd_signal', 'bb_upper', 'bb_middle', 'bb_lower', 'sma_10', 'sma_30', 'adx', 'di_plus', 'di_minus', 'trend', 'trend_strength', 'divergence_type', 'divergence_desc']
2025-03-11 14:27:53,993 - ai.gpt_analyzer - INFO - 시장 데이터: {'symbol': 'BTCUSDT', 'last_price': 55888.1, 'bid': 55636.1, 'ask': 55888.1, 'volume': 863400.993, 'timestamp': None}
2025-03-11 14:27:53,995 - ai.gpt_client - INFO - GPT API 호출 시작 (캐시 사용: False)
2025-03-11 14:27:53,995 - ai.gpt_client - INFO - 캐시 사용하지 않음 - 실제 API 호출
2025-03-11 14:27:56,172 - telegram_bot.formatters.storage_formatter - INFO - 1h 분석 결과 저장 완료: C:\Users\oasis\Aibybit_2\src\data\analysis\analysis_1h.json
2025-03-11 14:27:57,247 - telegram_bot.monitors.auto_analyzer - INFO - 분석 결과 position_suggestion: SELL
2025-03-11 14:27:57,248 - telegram_bot.monitors.auto_analyzer - INFO - 매매 신호 감지: SELL
2025-03-11 14:27:57,249 - order_service - INFO - 매매 신호 실행: {'position_suggestion': 'SELL', 'leverage': 5, 'position_size': 10, 'entry_price': 55888.1, 'stop_loss': 56000.0, 'take_profit1': 55000.0, 'take_profit2': 54000.0, 'reason': '하락 추세 및 부정적인 지표'}
2025-03-11 14:27:57,249 - order_service - INFO - 주문 시도: {'symbol': 'BTCUSDT', 'side': 'Sell', 'leverage': 5, 'position_size': 10, 'entry_price': 55888.1, 'stop_loss': 56000.0, 'take_profit': 55000.0, 'is_btc_unit': False}
2025-03-11 14:27:57,250 - order_service - INFO - 주문 상세 정보: {
  "symbol": "BTCUSDT",
  "side": "Sell",
  "leverage": 5,
  "position_size": 10,
  "entry_price": 55888.1,
  "stop_loss": 56000.0,
  "take_profit": 55000.0,
  "is_btc_unit": false
}
2025-03-11 14:27:57,250 - order_service - INFO - 주문 시도: {'symbol': 'BTCUSDT', 'side': 'Sell', 'leverage': 5, 'position_size': 10, 'entry_price': 55888.1, 'stop_loss': 56000.0, 'take_profit': 55000.0, 'is_btc_unit': False}
2025-03-11 14:27:57,735 - order_service - INFO - 현재 포지션: {'symbol': 'BTC/USDT:USDT', 'side': 'Short', 'size': 0.051, 'leverage': 5, 'entryPrice': 55800.0, 'markPrice': 55888.1, 'unrealisedPnl': -4.4931, 'stopLoss': 0.0, 'takeProfit': 0.0}
2025-03-11 14:27:57,735 - order_service - INFO - 레버리지 차이가 작음(0) - 크기만 조정
2025-03-11 14:27:57,930 - exchange.bybit_client - INFO - USDT 잔고 - 총자산: $53,354.00, 가용잔고: $0.00, 사용중: $0.00
2025-03-11 14:27:57,931 - order_service - INFO - 가용 잔고: $0.0, 총 자산: $53353.99910153, 사용중: $0.0
2025-03-11 14:27:58,114 - order_service - INFO - 계산 입력값 - 총자산: $53353.99910153, 미실현손익: $0.0, 비율: 10%, 레버리지: 5배, 진입가: $55888.1
2025-03-11 14:27:58,114 - order_service - INFO - 순수 자산: $53353.99910153
2025-03-11 14:27:58,115 - order_service - INFO - 포지션 가치(USDT): $26676.999550765
2025-03-11 14:27:58,115 - order_service - INFO - 계산된 BTC 수량: 0.4773287971994933
2025-03-11 14:27:58,116 - order_service - INFO - 최종 BTC 수량(반올림): 0.477
2025-03-11 14:27:58,307 - exchange.bybit_client - INFO - USDT 잔고 - 총자산: $53,354.00, 가용잔고: $0.00, 사용중: $0.00
2025-03-11 14:27:58,307 - order_service - ERROR - 주문 생성 중 오류: 'leverage'
2025-03-11 14:27:58,307 - order_service - ERROR - Traceback (most recent call last):
  File "C:\Users\oasis\Aibybit_2\src\services\order_service.py", line 220, in create_order
    target_value = available_balance * (params['position_size'] / 100) * params['leverage']
                                                                         ~~~~~~^^^^^^^^^^^^
KeyError: 'leverage'

2025-03-11 14:27:59,278 - telegram_bot.monitors.auto_analyzer - INFO - 초기 분석 실행 완료
2025-03-11 14:30:29,917 - main - INFO - 환경변수 및 설정 초기화 중...
2025-03-11 14:30:29,917 - main - INFO - Bybit 테스트넷 클라이언트 초기화 중...
2025-03-11 14:30:30,154 - main - INFO - 서비스 초기화 중...
2025-03-11 14:30:30,154 - main - INFO - 마켓 데이터 서비스 중...
2025-03-11 14:30:31,841 - services.market_data_service - INFO - 마켓 데이터 로드 완료
2025-03-11 14:30:32,092 - telegram_bot.bot - INFO - 텔레그램 설정 로드:
2025-03-11 14:30:32,092 - telegram_bot.bot - INFO - - admin_chat_id: 583881676
2025-03-11 14:30:32,092 - telegram_bot.bot - INFO - - alert_chat_ids: [-1002464784986]
2025-03-11 14:30:32,523 - telegram_bot.monitors.auto_analyzer - INFO - AutoAnalyzer 초기화 시작
2025-03-11 14:30:32,523 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 설정 시작
2025-03-11 14:30:32,523 - telegram_bot.monitors.auto_analyzer - INFO - 다음 실행 예정 시간: 2025-03-11 15:00:00
2025-03-11 14:30:32,523 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-03-11 14:30:32,523 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 설정 완료
2025-03-11 14:30:32,523 - telegram_bot.bot - INFO - 봇 초기화 시작...
2025-03-11 14:30:32,523 - services.trade_history_service - INFO - === 포지션 정보 초기화 시작 ===
2025-03-11 14:30:32,523 - services.trade_history_service - INFO - 조회 기간: 2024-12-11 ~ 2025-03-11
2025-03-11 14:30:32,523 - services.trade_store - INFO - 날짜 범위 조회: 20241211 ~ 20250311
2025-03-11 14:30:32,523 - services.trade_store - INFO - 날짜: 20241211, 포지션 수: 1건
2025-03-11 14:30:32,535 - services.trade_store - INFO - 날짜: 20241212, 포지션 수: 1건
2025-03-11 14:30:32,535 - services.trade_store - INFO - 날짜: 20241213, 포지션 수: 2건
2025-03-11 14:30:32,535 - services.trade_store - INFO - 날짜: 20241214, 포지션 수: 2건
2025-03-11 14:30:32,536 - services.trade_store - INFO - 날짜: 20241215, 포지션 수: 0건
2025-03-11 14:30:32,536 - services.trade_store - INFO - 날짜: 20241216, 포지션 수: 0건
2025-03-11 14:30:32,536 - services.trade_store - INFO - 날짜: 20241217, 포지션 수: 10건
2025-03-11 14:30:32,537 - services.trade_store - INFO - 날짜: 20241218, 포지션 수: 5건
2025-03-11 14:30:32,537 - services.trade_store - INFO - 날짜: 20241219, 포지션 수: 1건
2025-03-11 14:30:32,538 - services.trade_store - INFO - 날짜: 20241220, 포지션 수: 31건
2025-03-11 14:30:32,538 - services.trade_store - INFO - 날짜: 20241221, 포지션 수: 3건
2025-03-11 14:30:32,538 - services.trade_store - INFO - 날짜: 20241222, 포지션 수: 10건
2025-03-11 14:30:32,538 - services.trade_store - INFO - 날짜: 20241223, 포지션 수: 7건
2025-03-11 14:30:32,538 - services.trade_store - INFO - 날짜: 20241224, 포지션 수: 11건
2025-03-11 14:30:32,540 - services.trade_store - INFO - 날짜: 20241225, 포지션 수: 2건
2025-03-11 14:30:32,540 - services.trade_store - INFO - 날짜: 20241226, 포지션 수: 7건
2025-03-11 14:30:32,540 - services.trade_store - INFO - 날짜: 20241227, 포지션 수: 7건
2025-03-11 14:30:32,541 - services.trade_store - INFO - 날짜: 20241228, 포지션 수: 4건
2025-03-11 14:30:32,542 - services.trade_store - INFO - 날짜: 20241229, 포지션 수: 0건
2025-03-11 14:30:32,542 - services.trade_store - INFO - 날짜: 20241230, 포지션 수: 15건
2025-03-11 14:30:32,543 - services.trade_store - INFO - 날짜: 20241231, 포지션 수: 8건
2025-03-11 14:30:32,543 - services.trade_store - INFO - 날짜: 20250101, 포지션 수: 0건
2025-03-11 14:30:32,543 - services.trade_store - INFO - 날짜: 20250102, 포지션 수: 0건
2025-03-11 14:30:32,543 - services.trade_store - INFO - 날짜: 20250103, 포지션 수: 0건
2025-03-11 14:30:32,543 - services.trade_store - INFO - 날짜: 20250104, 포지션 수: 0건
2025-03-11 14:30:32,545 - services.trade_store - INFO - 날짜: 20250105, 포지션 수: 0건
2025-03-11 14:30:32,545 - services.trade_store - INFO - 날짜: 20250106, 포지션 수: 0건
2025-03-11 14:30:32,545 - services.trade_store - INFO - 날짜: 20250107, 포지션 수: 0건
2025-03-11 14:30:32,545 - services.trade_store - INFO - 날짜: 20250108, 포지션 수: 0건
2025-03-11 14:30:32,545 - services.trade_store - INFO - 날짜: 20250109, 포지션 수: 0건
2025-03-11 14:30:32,545 - services.trade_store - INFO - 날짜: 20250110, 포지션 수: 0건
2025-03-11 14:30:32,545 - services.trade_store - INFO - 날짜: 20250111, 포지션 수: 0건
2025-03-11 14:30:32,545 - services.trade_store - INFO - 날짜: 20250112, 포지션 수: 0건
2025-03-11 14:30:32,545 - services.trade_store - INFO - 날짜: 20250113, 포지션 수: 0건
2025-03-11 14:30:32,545 - services.trade_store - INFO - 날짜: 20250114, 포지션 수: 0건
2025-03-11 14:30:32,545 - services.trade_store - INFO - 날짜: 20250115, 포지션 수: 0건
2025-03-11 14:30:32,547 - services.trade_store - INFO - 날짜: 20250116, 포지션 수: 0건
2025-03-11 14:30:32,547 - services.trade_store - INFO - 날짜: 20250117, 포지션 수: 0건
2025-03-11 14:30:32,547 - services.trade_store - INFO - 날짜: 20250118, 포지션 수: 0건
2025-03-11 14:30:32,547 - services.trade_store - INFO - 날짜: 20250119, 포지션 수: 0건
2025-03-11 14:30:32,547 - services.trade_store - INFO - 날짜: 20250120, 포지션 수: 0건
2025-03-11 14:30:32,547 - services.trade_store - INFO - 날짜: 20250121, 포지션 수: 0건
2025-03-11 14:30:32,547 - services.trade_store - INFO - 날짜: 20250122, 포지션 수: 0건
2025-03-11 14:30:32,547 - services.trade_store - INFO - 날짜: 20250123, 포지션 수: 0건
2025-03-11 14:30:32,547 - services.trade_store - INFO - 날짜: 20250124, 포지션 수: 0건
2025-03-11 14:30:32,547 - services.trade_store - INFO - 날짜: 20250125, 포지션 수: 0건
2025-03-11 14:30:32,547 - services.trade_store - INFO - 날짜: 20250126, 포지션 수: 0건
2025-03-11 14:30:32,548 - services.trade_store - INFO - 날짜: 20250127, 포지션 수: 0건
2025-03-11 14:30:32,548 - services.trade_store - INFO - 날짜: 20250128, 포지션 수: 0건
2025-03-11 14:30:32,548 - services.trade_store - INFO - 날짜: 20250129, 포지션 수: 0건
2025-03-11 14:30:32,548 - services.trade_store - INFO - 날짜: 20250130, 포지션 수: 0건
2025-03-11 14:30:32,548 - services.trade_store - INFO - 날짜: 20250131, 포지션 수: 0건
2025-03-11 14:30:32,548 - services.trade_store - INFO - 날짜: 20250201, 포지션 수: 0건
2025-03-11 14:30:32,549 - services.trade_store - INFO - 날짜: 20250202, 포지션 수: 0건
2025-03-11 14:30:32,549 - services.trade_store - INFO - 날짜: 20250203, 포지션 수: 0건
2025-03-11 14:30:32,549 - services.trade_store - INFO - 날짜: 20250204, 포지션 수: 0건
2025-03-11 14:30:32,550 - services.trade_store - INFO - 날짜: 20250205, 포지션 수: 0건
2025-03-11 14:30:32,550 - services.trade_store - INFO - 날짜: 20250206, 포지션 수: 0건
2025-03-11 14:30:32,550 - services.trade_store - INFO - 날짜: 20250207, 포지션 수: 0건
2025-03-11 14:30:32,550 - services.trade_store - INFO - 날짜: 20250208, 포지션 수: 0건
2025-03-11 14:30:32,550 - services.trade_store - INFO - 날짜: 20250209, 포지션 수: 0건
2025-03-11 14:30:32,550 - services.trade_store - INFO - 날짜: 20250210, 포지션 수: 0건
2025-03-11 14:30:32,550 - services.trade_store - INFO - 날짜: 20250211, 포지션 수: 0건
2025-03-11 14:30:32,550 - services.trade_store - INFO - 날짜: 20250212, 포지션 수: 0건
2025-03-11 14:30:32,550 - services.trade_store - INFO - 날짜: 20250213, 포지션 수: 0건
2025-03-11 14:30:32,551 - services.trade_store - INFO - 날짜: 20250214, 포지션 수: 2건
2025-03-11 14:30:32,551 - services.trade_store - INFO - 날짜: 20250215, 포지션 수: 2건
2025-03-11 14:30:32,551 - services.trade_store - INFO - 날짜: 20250216, 포지션 수: 0건
2025-03-11 14:30:32,551 - services.trade_store - INFO - 날짜: 20250217, 포지션 수: 2건
2025-03-11 14:30:32,551 - services.trade_store - INFO - 날짜: 20250218, 포지션 수: 0건
2025-03-11 14:30:32,552 - services.trade_store - INFO - 날짜: 20250219, 포지션 수: 0건
2025-03-11 14:30:32,552 - services.trade_store - INFO - 날짜: 20250220, 포지션 수: 0건
2025-03-11 14:30:32,552 - services.trade_store - INFO - 날짜: 20250221, 포지션 수: 2건
2025-03-11 14:30:32,552 - services.trade_store - INFO - 날짜: 20250222, 포지션 수: 0건
2025-03-11 14:30:32,552 - services.trade_store - INFO - 날짜: 20250223, 포지션 수: 0건
2025-03-11 14:30:32,552 - services.trade_store - INFO - 날짜: 20250224, 포지션 수: 0건
2025-03-11 14:30:32,552 - services.trade_store - INFO - 날짜: 20250225, 포지션 수: 0건
2025-03-11 14:30:32,552 - services.trade_store - INFO - 날짜: 20250226, 포지션 수: 0건
2025-03-11 14:30:32,552 - services.trade_store - INFO - 날짜: 20250227, 포지션 수: 0건
2025-03-11 14:30:32,552 - services.trade_store - INFO - 날짜: 20250228, 포지션 수: 0건
2025-03-11 14:30:32,552 - services.trade_store - INFO - 날짜: 20250301, 포지션 수: 0건
2025-03-11 14:30:32,552 - services.trade_store - INFO - 날짜: 20250302, 포지션 수: 0건
2025-03-11 14:30:32,552 - services.trade_store - INFO - 날짜: 20250303, 포지션 수: 0건
2025-03-11 14:30:32,552 - services.trade_store - INFO - 날짜: 20250304, 포지션 수: 0건
2025-03-11 14:30:32,552 - services.trade_store - INFO - 날짜: 20250305, 포지션 수: 0건
2025-03-11 14:30:32,552 - services.trade_store - INFO - 날짜: 20250306, 포지션 수: 0건
2025-03-11 14:30:32,552 - services.trade_store - INFO - 날짜: 20250307, 포지션 수: 0건
2025-03-11 14:30:32,555 - services.trade_store - INFO - 날짜: 20250308, 포지션 수: 0건
2025-03-11 14:30:32,555 - services.trade_store - INFO - 날짜: 20250309, 포지션 수: 0건
2025-03-11 14:30:32,555 - services.trade_store - INFO - 날짜: 20250310, 포지션 수: 0건
2025-03-11 14:30:32,555 - services.trade_store - INFO - 날짜: 20250311, 포지션 수: 0건
2025-03-11 14:30:32,555 - services.trade_store - INFO - 총 135건의 포지션 데이터 로드됨
2025-03-11 14:30:32,555 - services.trade_history_service - INFO - 기존 데이터: 135건
2025-03-11 14:30:32,555 - telegram_bot.bot - INFO - Application 빌드 시작...
2025-03-11 14:30:32,993 - telegram_bot.bot - INFO - 봇 초기화 완료, 시작 준비 중...
2025-03-11 14:30:32,993 - telegram_bot.bot - INFO - 봇 시작 시도...
2025-03-11 14:30:32,993 - telegram_bot.bot - INFO - === 봇 시작 시도 ===
2025-03-11 14:30:34,179 - apscheduler.scheduler - INFO - Scheduler started
2025-03-11 14:30:34,180 - telegram.ext.Application - INFO - Application started
2025-03-11 14:30:34,180 - telegram_bot.bot - INFO - 🤖 바이빗 트레이딩 봇이 시작되었습니다
2025-03-11 14:30:35,157 - telegram_bot.monitors.auto_analyzer - INFO - AutoAnalyzer 시작 요청됨
2025-03-11 14:30:35,157 - apscheduler.scheduler - INFO - Added job "AutoAnalyzer._scheduled_analysis" to job store "default"
2025-03-11 14:30:35,157 - apscheduler.scheduler - INFO - Scheduler started
2025-03-11 14:30:35,157 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 시작됨. 다음 실행 시간: 2025-03-11 15:00:00+09:00
2025-03-11 14:30:35,157 - telegram_bot.monitors.auto_analyzer - INFO - 초기 분석 실행 시작
2025-03-11 14:30:35,157 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄된 분석 시작 - 2025-03-11 14:30:35.157637
2025-03-11 14:30:35,157 - telegram_bot.monitors.auto_analyzer - INFO - 🔄' 1시간봉 분석 시작 (자동) ...
2025-03-11 14:30:35,157 - services.market_data_service - INFO - OHLCV 데이터 조회 시작 - 심볼: BTCUSDT, 시간대: 1h
2025-03-11 14:30:35,444 - ai.gpt_analyzer - INFO - 계산된 지표: ['open', 'high', 'low', 'close', 'volume', 'price_change_24h', 'volume_change_24h', 'rsi', 'macd', 'macd_signal', 'bb_upper', 'bb_middle', 'bb_lower', 'sma_10', 'sma_30', 'adx', 'di_plus', 'di_minus', 'trend', 'trend_strength', 'divergence_type', 'divergence_desc']
2025-03-11 14:30:35,444 - ai.gpt_analyzer - INFO - 시장 데이터: {'symbol': 'BTCUSDT', 'last_price': 55788.7, 'bid': 55626.1, 'ask': 55878.1, 'volume': 863401.689, 'timestamp': None}
2025-03-11 14:30:35,444 - ai.gpt_client - INFO - GPT API 호출 시작 (캐시 사용: False)
2025-03-11 14:30:35,444 - ai.gpt_client - INFO - 캐시 사용하지 않음 - 실제 API 호출
2025-03-11 14:30:38,025 - telegram_bot.formatters.storage_formatter - INFO - 1h 분석 결과 저장 완료: C:\Users\oasis\Aibybit_2\src\data\analysis\analysis_1h.json
2025-03-11 14:30:39,128 - telegram_bot.monitors.auto_analyzer - INFO - 분석 결과 position_suggestion: SELL
2025-03-11 14:30:39,128 - telegram_bot.monitors.auto_analyzer - INFO - 매매 신호 감지: SELL
2025-03-11 14:30:39,128 - order_service - INFO - 매매 신호 실행: {'position_suggestion': 'SELL', 'leverage': 5, 'position_size': 10, 'entry_price': 55788.7, 'stop_loss': 56000.0, 'take_profit1': 55000.0, 'take_profit2': 54000.0, 'reason': '하락 추세 및 부정적인 지표'}
2025-03-11 14:30:39,128 - order_service - INFO - 주문 시도: {'symbol': 'BTCUSDT', 'side': 'Sell', 'leverage': 5, 'position_size': 10, 'entry_price': 55788.7, 'stop_loss': 56000.0, 'take_profit': 55000.0, 'is_btc_unit': False}
2025-03-11 14:30:39,132 - order_service - INFO - 주문 상세 정보: {
  "symbol": "BTCUSDT",
  "side": "Sell",
  "leverage": 5,
  "position_size": 10,
  "entry_price": 55788.7,
  "stop_loss": 56000.0,
  "take_profit": 55000.0,
  "is_btc_unit": false
}
2025-03-11 14:30:39,132 - order_service - INFO - 주문 시도: {'symbol': 'BTCUSDT', 'side': 'Sell', 'leverage': 5, 'position_size': 10, 'entry_price': 55788.7, 'stop_loss': 56000.0, 'take_profit': 55000.0, 'is_btc_unit': False}
2025-03-11 14:30:39,479 - order_service - INFO - 현재 포지션: {'symbol': 'BTC/USDT:USDT', 'side': 'Short', 'size': 0.051, 'leverage': 5, 'entryPrice': 55800.0, 'markPrice': 55788.7, 'unrealisedPnl': 0.5763, 'stopLoss': 0.0, 'takeProfit': 0.0}
2025-03-11 14:30:39,479 - order_service - INFO - 레버리지 차이가 작음(0) - 크기만 조정
2025-03-11 14:30:39,661 - exchange.bybit_client - INFO - USDT 잔고 - 총자산: $53,354.00, 가용잔고: $0.00, 사용중: $0.00
2025-03-11 14:30:39,661 - order_service - INFO - 가용 잔고: $0.0, 총 자산: $53353.99910153, 사용중: $0.0
2025-03-11 14:30:39,846 - order_service - INFO - 계산 입력값 - 총자산: $53353.99910153, 미실현손익: $0.0, 비율: 10%, 레버리지: 5배, 진입가: $55788.7
2025-03-11 14:30:39,846 - order_service - INFO - 순수 자산: $53353.99910153
2025-03-11 14:30:39,847 - order_service - INFO - 포지션 가치(USDT): $26676.999550765
2025-03-11 14:30:39,847 - order_service - INFO - 계산된 BTC 수량: 0.4781792648110639
2025-03-11 14:30:39,847 - order_service - INFO - 최종 BTC 수량(반올림): 0.478
2025-03-11 14:30:40,026 - exchange.bybit_client - INFO - USDT 잔고 - 총자산: $53,354.00, 가용잔고: $0.00, 사용중: $0.00
2025-03-11 14:30:40,026 - order_service - INFO - 주문 실행 시도: {'category': 'linear', 'symbol': 'BTCUSDT', 'side': 'Sell', 'orderType': 'Limit', 'qty': '0.001', 'price': '55788.7', 'timeInForce': 'GTC', 'positionIdx': 0, 'reduceOnly': False, 'stopLoss': '56000.0', 'takeProfit': '55000.0'}
2025-03-11 14:30:40,428 - exchange.bybit_client - INFO - 서버 시간 동기화 완료: server_time=1741671040000, local_time=1741671040428, offset=-428ms
2025-03-11 14:30:40,544 - order_service - INFO - === 주문 요청 및 응답 상세 ===
2025-03-11 14:30:40,559 - order_service - INFO - 요청 파라미터:
{
  "category": "linear",
  "symbol": "BTCUSDT",
  "side": "Sell",
  "orderType": "Limit",
  "qty": "0.001",
  "price": "55788.7",
  "timeInForce": "GTC",
  "positionIdx": 0,
  "reduceOnly": false,
  "stopLoss": "56000.0",
  "takeProfit": "55000.0"
}
2025-03-11 14:30:40,559 - order_service - INFO - API 응답:
{
  "retCode": 0,
  "retMsg": "OK",
  "result": {
    "orderId": "9ee12102-a360-4b66-8398-7200222352ef",
    "orderLinkId": ""
  },
  "retExtInfo": {},
  "time": 1741671040664
}
2025-03-11 14:30:41,620 - telegram_bot.monitors.auto_analyzer - INFO - 초기 분석 실행 완료
2025-03-11 14:35:00,072 - main - INFO - 환경변수 및 설정 초기화 중...
2025-03-11 14:35:00,072 - main - INFO - Bybit 테스트넷 클라이언트 초기화 중...
2025-03-11 14:35:00,319 - main - INFO - 서비스 초기화 중...
2025-03-11 14:35:00,320 - main - INFO - 마켓 데이터 서비스 중...
2025-03-11 14:35:02,325 - services.market_data_service - INFO - 마켓 데이터 로드 완료
2025-03-11 14:35:02,567 - telegram_bot.bot - INFO - 텔레그램 설정 로드:
2025-03-11 14:35:02,567 - telegram_bot.bot - INFO - - admin_chat_id: 583881676
2025-03-11 14:35:02,567 - telegram_bot.bot - INFO - - alert_chat_ids: [-1002464784986]
2025-03-11 14:35:03,005 - telegram_bot.monitors.auto_analyzer - INFO - AutoAnalyzer 초기화 시작
2025-03-11 14:35:03,006 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 설정 시작
2025-03-11 14:35:03,007 - telegram_bot.monitors.auto_analyzer - INFO - 다음 실행 예정 시간: 2025-03-11 15:00:00
2025-03-11 14:35:03,009 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-03-11 14:35:03,009 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 설정 완료
2025-03-11 14:35:03,009 - telegram_bot.bot - INFO - 봇 초기화 시작...
2025-03-11 14:35:03,010 - services.trade_history_service - INFO - === 포지션 정보 초기화 시작 ===
2025-03-11 14:35:03,010 - services.trade_history_service - INFO - 조회 기간: 2024-12-11 ~ 2025-03-11
2025-03-11 14:35:03,011 - services.trade_store - INFO - 날짜 범위 조회: 20241211 ~ 20250311
2025-03-11 14:35:03,011 - services.trade_store - INFO - 날짜: 20241211, 포지션 수: 1건
2025-03-11 14:35:03,012 - services.trade_store - INFO - 날짜: 20241212, 포지션 수: 1건
2025-03-11 14:35:03,013 - services.trade_store - INFO - 날짜: 20241213, 포지션 수: 2건
2025-03-11 14:35:03,013 - services.trade_store - INFO - 날짜: 20241214, 포지션 수: 2건
2025-03-11 14:35:03,013 - services.trade_store - INFO - 날짜: 20241215, 포지션 수: 0건
2025-03-11 14:35:03,013 - services.trade_store - INFO - 날짜: 20241216, 포지션 수: 0건
2025-03-11 14:35:03,013 - services.trade_store - INFO - 날짜: 20241217, 포지션 수: 10건
2025-03-11 14:35:03,014 - services.trade_store - INFO - 날짜: 20241218, 포지션 수: 5건
2025-03-11 14:35:03,014 - services.trade_store - INFO - 날짜: 20241219, 포지션 수: 1건
2025-03-11 14:35:03,015 - services.trade_store - INFO - 날짜: 20241220, 포지션 수: 31건
2025-03-11 14:35:03,015 - services.trade_store - INFO - 날짜: 20241221, 포지션 수: 3건
2025-03-11 14:35:03,015 - services.trade_store - INFO - 날짜: 20241222, 포지션 수: 10건
2025-03-11 14:35:03,016 - services.trade_store - INFO - 날짜: 20241223, 포지션 수: 7건
2025-03-11 14:35:03,016 - services.trade_store - INFO - 날짜: 20241224, 포지션 수: 11건
2025-03-11 14:35:03,016 - services.trade_store - INFO - 날짜: 20241225, 포지션 수: 2건
2025-03-11 14:35:03,017 - services.trade_store - INFO - 날짜: 20241226, 포지션 수: 7건
2025-03-11 14:35:03,017 - services.trade_store - INFO - 날짜: 20241227, 포지션 수: 7건
2025-03-11 14:35:03,017 - services.trade_store - INFO - 날짜: 20241228, 포지션 수: 4건
2025-03-11 14:35:03,018 - services.trade_store - INFO - 날짜: 20241229, 포지션 수: 0건
2025-03-11 14:35:03,019 - services.trade_store - INFO - 날짜: 20241230, 포지션 수: 15건
2025-03-11 14:35:03,020 - services.trade_store - INFO - 날짜: 20241231, 포지션 수: 8건
2025-03-11 14:35:03,020 - services.trade_store - INFO - 날짜: 20250101, 포지션 수: 0건
2025-03-11 14:35:03,020 - services.trade_store - INFO - 날짜: 20250102, 포지션 수: 0건
2025-03-11 14:35:03,021 - services.trade_store - INFO - 날짜: 20250103, 포지션 수: 0건
2025-03-11 14:35:03,021 - services.trade_store - INFO - 날짜: 20250104, 포지션 수: 0건
2025-03-11 14:35:03,021 - services.trade_store - INFO - 날짜: 20250105, 포지션 수: 0건
2025-03-11 14:35:03,022 - services.trade_store - INFO - 날짜: 20250106, 포지션 수: 0건
2025-03-11 14:35:03,022 - services.trade_store - INFO - 날짜: 20250107, 포지션 수: 0건
2025-03-11 14:35:03,022 - services.trade_store - INFO - 날짜: 20250108, 포지션 수: 0건
2025-03-11 14:35:03,022 - services.trade_store - INFO - 날짜: 20250109, 포지션 수: 0건
2025-03-11 14:35:03,022 - services.trade_store - INFO - 날짜: 20250110, 포지션 수: 0건
2025-03-11 14:35:03,022 - services.trade_store - INFO - 날짜: 20250111, 포지션 수: 0건
2025-03-11 14:35:03,023 - services.trade_store - INFO - 날짜: 20250112, 포지션 수: 0건
2025-03-11 14:35:03,023 - services.trade_store - INFO - 날짜: 20250113, 포지션 수: 0건
2025-03-11 14:35:03,023 - services.trade_store - INFO - 날짜: 20250114, 포지션 수: 0건
2025-03-11 14:35:03,023 - services.trade_store - INFO - 날짜: 20250115, 포지션 수: 0건
2025-03-11 14:35:03,023 - services.trade_store - INFO - 날짜: 20250116, 포지션 수: 0건
2025-03-11 14:35:03,023 - services.trade_store - INFO - 날짜: 20250117, 포지션 수: 0건
2025-03-11 14:35:03,024 - services.trade_store - INFO - 날짜: 20250118, 포지션 수: 0건
2025-03-11 14:35:03,024 - services.trade_store - INFO - 날짜: 20250119, 포지션 수: 0건
2025-03-11 14:35:03,025 - services.trade_store - INFO - 날짜: 20250120, 포지션 수: 0건
2025-03-11 14:35:03,025 - services.trade_store - INFO - 날짜: 20250121, 포지션 수: 0건
2025-03-11 14:35:03,025 - services.trade_store - INFO - 날짜: 20250122, 포지션 수: 0건
2025-03-11 14:35:03,025 - services.trade_store - INFO - 날짜: 20250123, 포지션 수: 0건
2025-03-11 14:35:03,025 - services.trade_store - INFO - 날짜: 20250124, 포지션 수: 0건
2025-03-11 14:35:03,025 - services.trade_store - INFO - 날짜: 20250125, 포지션 수: 0건
2025-03-11 14:35:03,025 - services.trade_store - INFO - 날짜: 20250126, 포지션 수: 0건
2025-03-11 14:35:03,026 - services.trade_store - INFO - 날짜: 20250127, 포지션 수: 0건
2025-03-11 14:35:03,026 - services.trade_store - INFO - 날짜: 20250128, 포지션 수: 0건
2025-03-11 14:35:03,026 - services.trade_store - INFO - 날짜: 20250129, 포지션 수: 0건
2025-03-11 14:35:03,026 - services.trade_store - INFO - 날짜: 20250130, 포지션 수: 0건
2025-03-11 14:35:03,026 - services.trade_store - INFO - 날짜: 20250131, 포지션 수: 0건
2025-03-11 14:35:03,027 - services.trade_store - INFO - 날짜: 20250201, 포지션 수: 0건
2025-03-11 14:35:03,028 - services.trade_store - INFO - 날짜: 20250202, 포지션 수: 0건
2025-03-11 14:35:03,028 - services.trade_store - INFO - 날짜: 20250203, 포지션 수: 0건
2025-03-11 14:35:03,028 - services.trade_store - INFO - 날짜: 20250204, 포지션 수: 0건
2025-03-11 14:35:03,028 - services.trade_store - INFO - 날짜: 20250205, 포지션 수: 0건
2025-03-11 14:35:03,028 - services.trade_store - INFO - 날짜: 20250206, 포지션 수: 0건
2025-03-11 14:35:03,028 - services.trade_store - INFO - 날짜: 20250207, 포지션 수: 0건
2025-03-11 14:35:03,028 - services.trade_store - INFO - 날짜: 20250208, 포지션 수: 0건
2025-03-11 14:35:03,028 - services.trade_store - INFO - 날짜: 20250209, 포지션 수: 0건
2025-03-11 14:35:03,028 - services.trade_store - INFO - 날짜: 20250210, 포지션 수: 0건
2025-03-11 14:35:03,028 - services.trade_store - INFO - 날짜: 20250211, 포지션 수: 0건
2025-03-11 14:35:03,029 - services.trade_store - INFO - 날짜: 20250212, 포지션 수: 0건
2025-03-11 14:35:03,029 - services.trade_store - INFO - 날짜: 20250213, 포지션 수: 0건
2025-03-11 14:35:03,029 - services.trade_store - INFO - 날짜: 20250214, 포지션 수: 2건
2025-03-11 14:35:03,029 - services.trade_store - INFO - 날짜: 20250215, 포지션 수: 2건
2025-03-11 14:35:03,029 - services.trade_store - INFO - 날짜: 20250216, 포지션 수: 0건
2025-03-11 14:35:03,030 - services.trade_store - INFO - 날짜: 20250217, 포지션 수: 2건
2025-03-11 14:35:03,030 - services.trade_store - INFO - 날짜: 20250218, 포지션 수: 0건
2025-03-11 14:35:03,030 - services.trade_store - INFO - 날짜: 20250219, 포지션 수: 0건
2025-03-11 14:35:03,030 - services.trade_store - INFO - 날짜: 20250220, 포지션 수: 0건
2025-03-11 14:35:03,030 - services.trade_store - INFO - 날짜: 20250221, 포지션 수: 2건
2025-03-11 14:35:03,030 - services.trade_store - INFO - 날짜: 20250222, 포지션 수: 0건
2025-03-11 14:35:03,030 - services.trade_store - INFO - 날짜: 20250223, 포지션 수: 0건
2025-03-11 14:35:03,031 - services.trade_store - INFO - 날짜: 20250224, 포지션 수: 0건
2025-03-11 14:35:03,031 - services.trade_store - INFO - 날짜: 20250225, 포지션 수: 0건
2025-03-11 14:35:03,031 - services.trade_store - INFO - 날짜: 20250226, 포지션 수: 0건
2025-03-11 14:35:03,031 - services.trade_store - INFO - 날짜: 20250227, 포지션 수: 0건
2025-03-11 14:35:03,031 - services.trade_store - INFO - 날짜: 20250228, 포지션 수: 0건
2025-03-11 14:35:03,031 - services.trade_store - INFO - 날짜: 20250301, 포지션 수: 0건
2025-03-11 14:35:03,031 - services.trade_store - INFO - 날짜: 20250302, 포지션 수: 0건
2025-03-11 14:35:03,032 - services.trade_store - INFO - 날짜: 20250303, 포지션 수: 0건
2025-03-11 14:35:03,032 - services.trade_store - INFO - 날짜: 20250304, 포지션 수: 0건
2025-03-11 14:35:03,032 - services.trade_store - INFO - 날짜: 20250305, 포지션 수: 0건
2025-03-11 14:35:03,032 - services.trade_store - INFO - 날짜: 20250306, 포지션 수: 0건
2025-03-11 14:35:03,032 - services.trade_store - INFO - 날짜: 20250307, 포지션 수: 0건
2025-03-11 14:35:03,032 - services.trade_store - INFO - 날짜: 20250308, 포지션 수: 0건
2025-03-11 14:35:03,032 - services.trade_store - INFO - 날짜: 20250309, 포지션 수: 0건
2025-03-11 14:35:03,032 - services.trade_store - INFO - 날짜: 20250310, 포지션 수: 0건
2025-03-11 14:35:03,033 - services.trade_store - INFO - 날짜: 20250311, 포지션 수: 0건
2025-03-11 14:35:03,033 - services.trade_store - INFO - 총 135건의 포지션 데이터 로드됨
2025-03-11 14:35:03,033 - services.trade_history_service - INFO - 기존 데이터: 135건
2025-03-11 14:35:03,033 - telegram_bot.bot - INFO - Application 빌드 시작...
2025-03-11 14:35:03,483 - telegram_bot.bot - INFO - 봇 초기화 완료, 시작 준비 중...
2025-03-11 14:35:03,483 - telegram_bot.bot - INFO - 봇 시작 시도...
2025-03-11 14:35:03,483 - telegram_bot.bot - INFO - === 봇 시작 시도 ===
2025-03-11 14:35:04,624 - apscheduler.scheduler - INFO - Scheduler started
2025-03-11 14:35:04,624 - telegram.ext.Application - INFO - Application started
2025-03-11 14:35:04,624 - telegram_bot.bot - INFO - 🤖 바이빗 트레이딩 봇이 시작되었습니다
2025-03-11 14:35:05,623 - telegram_bot.monitors.auto_analyzer - INFO - AutoAnalyzer 시작 요청됨
2025-03-11 14:35:05,623 - apscheduler.scheduler - INFO - Added job "AutoAnalyzer._scheduled_analysis" to job store "default"
2025-03-11 14:35:05,623 - apscheduler.scheduler - INFO - Scheduler started
2025-03-11 14:35:05,623 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 시작됨. 다음 실행 시간: 2025-03-11 15:00:00+09:00
2025-03-11 14:35:05,623 - telegram_bot.monitors.auto_analyzer - INFO - 초기 분석 실행 시작
2025-03-11 14:35:05,623 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄된 분석 시작 - 2025-03-11 14:35:05.623068
2025-03-11 14:35:05,623 - telegram_bot.monitors.auto_analyzer - INFO - 🔄' 1시간봉 분석 시작 (자동) ...
2025-03-11 14:35:05,623 - services.market_data_service - INFO - OHLCV 데이터 조회 시작 - 심볼: BTCUSDT, 시간대: 1h
2025-03-11 14:35:05,912 - ai.gpt_analyzer - INFO - 계산된 지표: ['open', 'high', 'low', 'close', 'volume', 'price_change_24h', 'volume_change_24h', 'rsi', 'macd', 'macd_signal', 'bb_upper', 'bb_middle', 'bb_lower', 'sma_10', 'sma_30', 'adx', 'di_plus', 'di_minus', 'trend', 'trend_strength', 'divergence_type', 'divergence_desc']
2025-03-11 14:35:05,912 - ai.gpt_analyzer - INFO - 시장 데이터: {'symbol': 'BTCUSDT', 'last_price': 55888.1, 'bid': 55650.0, 'ask': 55888.1, 'volume': 863402.632, 'timestamp': None}
2025-03-11 14:35:05,914 - ai.gpt_client - INFO - GPT API 호출 시작 (캐시 사용: False)
2025-03-11 14:35:05,914 - ai.gpt_client - INFO - 캐시 사용하지 않음 - 실제 API 호출
2025-03-11 14:35:07,882 - telegram_bot.formatters.storage_formatter - INFO - 1h 분석 결과 저장 완료: C:\Users\oasis\Aibybit_2\src\data\analysis\analysis_1h.json
2025-03-11 14:35:09,216 - telegram_bot.monitors.auto_analyzer - INFO - 분석 결과 position_suggestion: SELL
2025-03-11 14:35:09,217 - telegram_bot.monitors.auto_analyzer - INFO - 매매 신호 감지: SELL
2025-03-11 14:35:09,218 - order_service - INFO - 매매 신호 실행: {'position_suggestion': 'SELL', 'leverage': 5, 'position_size': 10, 'entry_price': 55888.1, 'stop_loss': 56000.0, 'take_profit1': 55000.0, 'take_profit2': 54000.0, 'reason': '하락 추세 및 부정적인 지표'}
2025-03-11 14:35:09,218 - order_service - INFO - 주문 시도: {'symbol': 'BTCUSDT', 'side': 'Sell', 'leverage': 5, 'position_size': 10, 'entry_price': 55888.1, 'stop_loss': 56000.0, 'take_profit': 55000.0, 'is_btc_unit': False}
2025-03-11 14:35:09,218 - order_service - INFO - 주문 상세 정보: {
  "symbol": "BTCUSDT",
  "side": "Sell",
  "leverage": 5,
  "position_size": 10,
  "entry_price": 55888.1,
  "stop_loss": 56000.0,
  "take_profit": 55000.0,
  "is_btc_unit": false
}
2025-03-11 14:35:09,219 - order_service - INFO - 주문 시도: {'symbol': 'BTCUSDT', 'side': 'Sell', 'leverage': 5, 'position_size': 10, 'entry_price': 55888.1, 'stop_loss': 56000.0, 'take_profit': 55000.0, 'is_btc_unit': False}
2025-03-11 14:35:09,776 - order_service - INFO - 현재 포지션: {'symbol': 'BTC/USDT:USDT', 'side': 'Short', 'size': 0.052, 'leverage': 5, 'entryPrice': 55799.78269231, 'markPrice': 55761.24, 'unrealisedPnl': 2.00422, 'stopLoss': 0.0, 'takeProfit': 0.0}
2025-03-11 14:35:09,776 - order_service - INFO - 레버리지 차이가 작음(0) - 크기만 조정
2025-03-11 14:35:09,968 - exchange.bybit_client - INFO - USDT 잔고 - 총자산: $53,353.99, 가용잔고: $0.00, 사용중: $0.00
2025-03-11 14:35:09,968 - order_service - INFO - 가용 잔고: $0.0, 총 자산: $53353.98794379, 사용중: $0.0
2025-03-11 14:35:10,158 - order_service - INFO - 계산 입력값 - 총자산: $53353.98794379, 미실현손익: $0.0, 비율: 10%, 레버리지: 5배, 진입가: $55888.1
2025-03-11 14:35:10,158 - order_service - INFO - 순수 자산: $53353.98794379
2025-03-11 14:35:10,158 - order_service - INFO - 포지션 가치(USDT): $26676.993971895005
2025-03-11 14:35:10,158 - order_service - INFO - 계산된 BTC 수량: 0.47732869737734873
2025-03-11 14:35:10,158 - order_service - INFO - 최종 BTC 수량(반올림): 0.477
2025-03-11 14:35:10,158 - order_service - INFO - 주문 상세 정보: {
  "symbol": "BTCUSDT",
  "side": "Sell",
  "leverage": 5,
  "position_size": 0.425,
  "entry_price": 55888.1,
  "stop_loss": 56000.0,
  "take_profit": 55000.0,
  "is_btc_unit": false
}
2025-03-11 14:35:10,344 - exchange.bybit_client - INFO - USDT 잔고 - 총자산: $53,353.99, 가용잔고: $0.00, 사용중: $0.00
2025-03-11 14:35:10,345 - order_service - INFO - USDT 잔고 - 총자산: $53353.98794379, 가용잔고: $0.0, 사용중: $0.0
2025-03-11 14:35:10,345 - order_service - INFO - 주문 실행 시도: {'category': 'linear', 'symbol': 'BTCUSDT', 'side': 'Sell', 'orderType': 'Limit', 'qty': '0.425', 'price': '55888.1', 'timeInForce': 'GTC', 'positionIdx': 0, 'reduceOnly': False, 'stopLoss': '56000.0', 'takeProfit': '55000.0'}
2025-03-11 14:35:10,345 - order_service - ERROR - 주문 생성 중 오류: 'BybitClient' object has no attribute 'create_order'
2025-03-11 14:35:10,346 - order_service - ERROR - Traceback (most recent call last):
  File "C:\Users\oasis\Aibybit_2\src\services\order_service.py", line 260, in create_order
    response = await self.bybit_client.create_order(**order_params)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'BybitClient' object has no attribute 'create_order'

2025-03-11 14:35:11,314 - telegram_bot.monitors.auto_analyzer - INFO - 초기 분석 실행 완료
2025-03-11 14:38:00,793 - main - INFO - 환경변수 및 설정 초기화 중...
2025-03-11 14:38:00,793 - main - INFO - Bybit 테스트넷 클라이언트 초기화 중...
2025-03-11 14:38:01,011 - main - INFO - 서비스 초기화 중...
2025-03-11 14:38:01,011 - main - INFO - 마켓 데이터 서비스 중...
2025-03-11 14:38:02,590 - services.market_data_service - INFO - 마켓 데이터 로드 완료
2025-03-11 14:38:02,827 - telegram_bot.bot - INFO - 텔레그램 설정 로드:
2025-03-11 14:38:02,827 - telegram_bot.bot - INFO - - admin_chat_id: 583881676
2025-03-11 14:38:02,827 - telegram_bot.bot - INFO - - alert_chat_ids: [-1002464784986]
2025-03-11 14:38:03,286 - telegram_bot.monitors.auto_analyzer - INFO - AutoAnalyzer 초기화 시작
2025-03-11 14:38:03,287 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 설정 시작
2025-03-11 14:38:03,289 - telegram_bot.monitors.auto_analyzer - INFO - 다음 실행 예정 시간: 2025-03-11 15:00:00
2025-03-11 14:38:03,289 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-03-11 14:38:03,289 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 설정 완료
2025-03-11 14:38:03,290 - telegram_bot.bot - INFO - 봇 초기화 시작...
2025-03-11 14:38:03,290 - services.trade_history_service - INFO - === 포지션 정보 초기화 시작 ===
2025-03-11 14:38:03,290 - services.trade_history_service - INFO - 조회 기간: 2024-12-11 ~ 2025-03-11
2025-03-11 14:38:03,292 - services.trade_store - INFO - 날짜 범위 조회: 20241211 ~ 20250311
2025-03-11 14:38:03,292 - services.trade_store - INFO - 날짜: 20241211, 포지션 수: 1건
2025-03-11 14:38:03,293 - services.trade_store - INFO - 날짜: 20241212, 포지션 수: 1건
2025-03-11 14:38:03,293 - services.trade_store - INFO - 날짜: 20241213, 포지션 수: 2건
2025-03-11 14:38:03,293 - services.trade_store - INFO - 날짜: 20241214, 포지션 수: 2건
2025-03-11 14:38:03,294 - services.trade_store - INFO - 날짜: 20241215, 포지션 수: 0건
2025-03-11 14:38:03,294 - services.trade_store - INFO - 날짜: 20241216, 포지션 수: 0건
2025-03-11 14:38:03,295 - services.trade_store - INFO - 날짜: 20241217, 포지션 수: 10건
2025-03-11 14:38:03,295 - services.trade_store - INFO - 날짜: 20241218, 포지션 수: 5건
2025-03-11 14:38:03,295 - services.trade_store - INFO - 날짜: 20241219, 포지션 수: 1건
2025-03-11 14:38:03,296 - services.trade_store - INFO - 날짜: 20241220, 포지션 수: 31건
2025-03-11 14:38:03,296 - services.trade_store - INFO - 날짜: 20241221, 포지션 수: 3건
2025-03-11 14:38:03,296 - services.trade_store - INFO - 날짜: 20241222, 포지션 수: 10건
2025-03-11 14:38:03,297 - services.trade_store - INFO - 날짜: 20241223, 포지션 수: 7건
2025-03-11 14:38:03,297 - services.trade_store - INFO - 날짜: 20241224, 포지션 수: 11건
2025-03-11 14:38:03,297 - services.trade_store - INFO - 날짜: 20241225, 포지션 수: 2건
2025-03-11 14:38:03,297 - services.trade_store - INFO - 날짜: 20241226, 포지션 수: 7건
2025-03-11 14:38:03,299 - services.trade_store - INFO - 날짜: 20241227, 포지션 수: 7건
2025-03-11 14:38:03,299 - services.trade_store - INFO - 날짜: 20241228, 포지션 수: 4건
2025-03-11 14:38:03,299 - services.trade_store - INFO - 날짜: 20241229, 포지션 수: 0건
2025-03-11 14:38:03,300 - services.trade_store - INFO - 날짜: 20241230, 포지션 수: 15건
2025-03-11 14:38:03,300 - services.trade_store - INFO - 날짜: 20241231, 포지션 수: 8건
2025-03-11 14:38:03,300 - services.trade_store - INFO - 날짜: 20250101, 포지션 수: 0건
2025-03-11 14:38:03,301 - services.trade_store - INFO - 날짜: 20250102, 포지션 수: 0건
2025-03-11 14:38:03,301 - services.trade_store - INFO - 날짜: 20250103, 포지션 수: 0건
2025-03-11 14:38:03,301 - services.trade_store - INFO - 날짜: 20250104, 포지션 수: 0건
2025-03-11 14:38:03,301 - services.trade_store - INFO - 날짜: 20250105, 포지션 수: 0건
2025-03-11 14:38:03,301 - services.trade_store - INFO - 날짜: 20250106, 포지션 수: 0건
2025-03-11 14:38:03,301 - services.trade_store - INFO - 날짜: 20250107, 포지션 수: 0건
2025-03-11 14:38:03,301 - services.trade_store - INFO - 날짜: 20250108, 포지션 수: 0건
2025-03-11 14:38:03,301 - services.trade_store - INFO - 날짜: 20250109, 포지션 수: 0건
2025-03-11 14:38:03,302 - services.trade_store - INFO - 날짜: 20250110, 포지션 수: 0건
2025-03-11 14:38:03,302 - services.trade_store - INFO - 날짜: 20250111, 포지션 수: 0건
2025-03-11 14:38:03,302 - services.trade_store - INFO - 날짜: 20250112, 포지션 수: 0건
2025-03-11 14:38:03,302 - services.trade_store - INFO - 날짜: 20250113, 포지션 수: 0건
2025-03-11 14:38:03,302 - services.trade_store - INFO - 날짜: 20250114, 포지션 수: 0건
2025-03-11 14:38:03,302 - services.trade_store - INFO - 날짜: 20250115, 포지션 수: 0건
2025-03-11 14:38:03,302 - services.trade_store - INFO - 날짜: 20250116, 포지션 수: 0건
2025-03-11 14:38:03,302 - services.trade_store - INFO - 날짜: 20250117, 포지션 수: 0건
2025-03-11 14:38:03,303 - services.trade_store - INFO - 날짜: 20250118, 포지션 수: 0건
2025-03-11 14:38:03,303 - services.trade_store - INFO - 날짜: 20250119, 포지션 수: 0건
2025-03-11 14:38:03,303 - services.trade_store - INFO - 날짜: 20250120, 포지션 수: 0건
2025-03-11 14:38:03,303 - services.trade_store - INFO - 날짜: 20250121, 포지션 수: 0건
2025-03-11 14:38:03,303 - services.trade_store - INFO - 날짜: 20250122, 포지션 수: 0건
2025-03-11 14:38:03,303 - services.trade_store - INFO - 날짜: 20250123, 포지션 수: 0건
2025-03-11 14:38:03,304 - services.trade_store - INFO - 날짜: 20250124, 포지션 수: 0건
2025-03-11 14:38:03,304 - services.trade_store - INFO - 날짜: 20250125, 포지션 수: 0건
2025-03-11 14:38:03,304 - services.trade_store - INFO - 날짜: 20250126, 포지션 수: 0건
2025-03-11 14:38:03,304 - services.trade_store - INFO - 날짜: 20250127, 포지션 수: 0건
2025-03-11 14:38:03,304 - services.trade_store - INFO - 날짜: 20250128, 포지션 수: 0건
2025-03-11 14:38:03,304 - services.trade_store - INFO - 날짜: 20250129, 포지션 수: 0건
2025-03-11 14:38:03,304 - services.trade_store - INFO - 날짜: 20250130, 포지션 수: 0건
2025-03-11 14:38:03,304 - services.trade_store - INFO - 날짜: 20250131, 포지션 수: 0건
2025-03-11 14:38:03,304 - services.trade_store - INFO - 날짜: 20250201, 포지션 수: 0건
2025-03-11 14:38:03,304 - services.trade_store - INFO - 날짜: 20250202, 포지션 수: 0건
2025-03-11 14:38:03,305 - services.trade_store - INFO - 날짜: 20250203, 포지션 수: 0건
2025-03-11 14:38:03,305 - services.trade_store - INFO - 날짜: 20250204, 포지션 수: 0건
2025-03-11 14:38:03,305 - services.trade_store - INFO - 날짜: 20250205, 포지션 수: 0건
2025-03-11 14:38:03,305 - services.trade_store - INFO - 날짜: 20250206, 포지션 수: 0건
2025-03-11 14:38:03,305 - services.trade_store - INFO - 날짜: 20250207, 포지션 수: 0건
2025-03-11 14:38:03,305 - services.trade_store - INFO - 날짜: 20250208, 포지션 수: 0건
2025-03-11 14:38:03,305 - services.trade_store - INFO - 날짜: 20250209, 포지션 수: 0건
2025-03-11 14:38:03,305 - services.trade_store - INFO - 날짜: 20250210, 포지션 수: 0건
2025-03-11 14:38:03,305 - services.trade_store - INFO - 날짜: 20250211, 포지션 수: 0건
2025-03-11 14:38:03,306 - services.trade_store - INFO - 날짜: 20250212, 포지션 수: 0건
2025-03-11 14:38:03,306 - services.trade_store - INFO - 날짜: 20250213, 포지션 수: 0건
2025-03-11 14:38:03,306 - services.trade_store - INFO - 날짜: 20250214, 포지션 수: 2건
2025-03-11 14:38:03,306 - services.trade_store - INFO - 날짜: 20250215, 포지션 수: 2건
2025-03-11 14:38:03,306 - services.trade_store - INFO - 날짜: 20250216, 포지션 수: 0건
2025-03-11 14:38:03,306 - services.trade_store - INFO - 날짜: 20250217, 포지션 수: 2건
2025-03-11 14:38:03,306 - services.trade_store - INFO - 날짜: 20250218, 포지션 수: 0건
2025-03-11 14:38:03,307 - services.trade_store - INFO - 날짜: 20250219, 포지션 수: 0건
2025-03-11 14:38:03,307 - services.trade_store - INFO - 날짜: 20250220, 포지션 수: 0건
2025-03-11 14:38:03,307 - services.trade_store - INFO - 날짜: 20250221, 포지션 수: 2건
2025-03-11 14:38:03,307 - services.trade_store - INFO - 날짜: 20250222, 포지션 수: 0건
2025-03-11 14:38:03,307 - services.trade_store - INFO - 날짜: 20250223, 포지션 수: 0건
2025-03-11 14:38:03,307 - services.trade_store - INFO - 날짜: 20250224, 포지션 수: 0건
2025-03-11 14:38:03,308 - services.trade_store - INFO - 날짜: 20250225, 포지션 수: 0건
2025-03-11 14:38:03,308 - services.trade_store - INFO - 날짜: 20250226, 포지션 수: 0건
2025-03-11 14:38:03,309 - services.trade_store - INFO - 날짜: 20250227, 포지션 수: 0건
2025-03-11 14:38:03,309 - services.trade_store - INFO - 날짜: 20250228, 포지션 수: 0건
2025-03-11 14:38:03,309 - services.trade_store - INFO - 날짜: 20250301, 포지션 수: 0건
2025-03-11 14:38:03,309 - services.trade_store - INFO - 날짜: 20250302, 포지션 수: 0건
2025-03-11 14:38:03,309 - services.trade_store - INFO - 날짜: 20250303, 포지션 수: 0건
2025-03-11 14:38:03,309 - services.trade_store - INFO - 날짜: 20250304, 포지션 수: 0건
2025-03-11 14:38:03,310 - services.trade_store - INFO - 날짜: 20250305, 포지션 수: 0건
2025-03-11 14:38:03,310 - services.trade_store - INFO - 날짜: 20250306, 포지션 수: 0건
2025-03-11 14:38:03,310 - services.trade_store - INFO - 날짜: 20250307, 포지션 수: 0건
2025-03-11 14:38:03,310 - services.trade_store - INFO - 날짜: 20250308, 포지션 수: 0건
2025-03-11 14:38:03,311 - services.trade_store - INFO - 날짜: 20250309, 포지션 수: 0건
2025-03-11 14:38:03,311 - services.trade_store - INFO - 날짜: 20250310, 포지션 수: 0건
2025-03-11 14:38:03,311 - services.trade_store - INFO - 날짜: 20250311, 포지션 수: 0건
2025-03-11 14:38:03,311 - services.trade_store - INFO - 총 135건의 포지션 데이터 로드됨
2025-03-11 14:38:03,311 - services.trade_history_service - INFO - 기존 데이터: 135건
2025-03-11 14:38:03,311 - telegram_bot.bot - INFO - Application 빌드 시작...
2025-03-11 14:38:03,744 - telegram_bot.bot - INFO - 봇 초기화 완료, 시작 준비 중...
2025-03-11 14:38:03,744 - telegram_bot.bot - INFO - 봇 시작 시도...
2025-03-11 14:38:03,744 - telegram_bot.bot - INFO - === 봇 시작 시도 ===
2025-03-11 14:38:04,839 - apscheduler.scheduler - INFO - Scheduler started
2025-03-11 14:38:04,839 - telegram.ext.Application - INFO - Application started
2025-03-11 14:38:04,839 - telegram_bot.bot - INFO - 🤖 바이빗 트레이딩 봇이 시작되었습니다
2025-03-11 14:38:05,806 - telegram_bot.monitors.auto_analyzer - INFO - AutoAnalyzer 시작 요청됨
2025-03-11 14:38:05,806 - apscheduler.scheduler - INFO - Added job "AutoAnalyzer._scheduled_analysis" to job store "default"
2025-03-11 14:38:05,806 - apscheduler.scheduler - INFO - Scheduler started
2025-03-11 14:38:05,806 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 시작됨. 다음 실행 시간: 2025-03-11 15:00:00+09:00
2025-03-11 14:38:05,806 - telegram_bot.monitors.auto_analyzer - INFO - 초기 분석 실행 시작
2025-03-11 14:38:05,806 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄된 분석 시작 - 2025-03-11 14:38:05.806126
2025-03-11 14:38:05,806 - telegram_bot.monitors.auto_analyzer - INFO - 🔄' 1시간봉 분석 시작 (자동) ...
2025-03-11 14:38:05,806 - services.market_data_service - INFO - OHLCV 데이터 조회 시작 - 심볼: BTCUSDT, 시간대: 1h
2025-03-11 14:38:06,061 - ai.gpt_analyzer - INFO - 계산된 지표: ['open', 'high', 'low', 'close', 'volume', 'price_change_24h', 'volume_change_24h', 'rsi', 'macd', 'macd_signal', 'bb_upper', 'bb_middle', 'bb_lower', 'sma_10', 'sma_30', 'adx', 'di_plus', 'di_minus', 'trend', 'trend_strength', 'divergence_type', 'divergence_desc']
2025-03-11 14:38:06,077 - ai.gpt_analyzer - INFO - 시장 데이터: {'symbol': 'BTCUSDT', 'last_price': 55626.1, 'bid': 55626.1, 'ask': 55829.3, 'volume': 863360.113, 'timestamp': None}
2025-03-11 14:38:06,082 - ai.gpt_client - INFO - GPT API 호출 시작 (캐시 사용: False)
2025-03-11 14:38:06,082 - ai.gpt_client - INFO - 캐시 사용하지 않음 - 실제 API 호출
2025-03-11 14:38:07,919 - telegram_bot.formatters.storage_formatter - INFO - 1h 분석 결과 저장 완료: C:\Users\oasis\Aibybit_2\src\data\analysis\analysis_1h.json
2025-03-11 14:38:08,894 - telegram_bot.monitors.auto_analyzer - INFO - 분석 결과 position_suggestion: SELL
2025-03-11 14:38:08,894 - telegram_bot.monitors.auto_analyzer - INFO - 매매 신호 감지: SELL
2025-03-11 14:38:08,894 - order_service - INFO - 매매 신호 실행: {'position_suggestion': 'SELL', 'leverage': 5, 'position_size': 10, 'entry_price': 55626.1, 'stop_loss': 55726.1, 'take_profit1': 54526.1, 'take_profit2': 53526.1, 'reason': '하락 추세 및 부정적인 지표'}
2025-03-11 14:38:08,894 - order_service - INFO - 주문 시도: {'symbol': 'BTCUSDT', 'side': 'Sell', 'leverage': 5, 'position_size': 10, 'entry_price': 55626.1, 'stop_loss': 55726.1, 'take_profit': 54526.1, 'is_btc_unit': False}
2025-03-11 14:38:08,894 - order_service - INFO - 주문 상세 정보: {
  "symbol": "BTCUSDT",
  "side": "Sell",
  "leverage": 5,
  "position_size": 10,
  "entry_price": 55626.1,
  "stop_loss": 55726.1,
  "take_profit": 54526.1,
  "is_btc_unit": false
}
2025-03-11 14:38:08,894 - order_service - INFO - 주문 시도: {'symbol': 'BTCUSDT', 'side': 'Sell', 'leverage': 5, 'position_size': 10, 'entry_price': 55626.1, 'stop_loss': 55726.1, 'take_profit': 54526.1, 'is_btc_unit': False}
2025-03-11 14:38:09,237 - order_service - INFO - 현재 포지션: {'symbol': 'BTC/USDT:USDT', 'side': 'Short', 'size': 0.052, 'leverage': 5, 'entryPrice': 55799.78269231, 'markPrice': 55674.3, 'unrealisedPnl': 6.5251, 'stopLoss': 0.0, 'takeProfit': 0.0}
2025-03-11 14:38:09,237 - order_service - INFO - 레버리지 차이가 작음(0) - 크기만 조정
2025-03-11 14:38:09,429 - exchange.bybit_client - INFO - USDT 잔고 - 총자산: $53,353.99, 가용잔고: $0.00, 사용중: $0.00
2025-03-11 14:38:09,430 - order_service - INFO - 가용 잔고: $0.0, 총 자산: $53353.98794379, 사용중: $0.0
2025-03-11 14:38:09,615 - order_service - INFO - 계산 입력값 - 총자산: $53353.98794379, 미실현손익: $0.0, 비율: 10%, 레버리지: 5배, 진입가: $55626.1
2025-03-11 14:38:09,615 - order_service - INFO - 순수 자산: $53353.98794379
2025-03-11 14:38:09,615 - order_service - INFO - 포지션 가치(USDT): $26676.993971895005
2025-03-11 14:38:09,615 - order_service - INFO - 계산된 BTC 수량: 0.4795769247151069
2025-03-11 14:38:09,615 - order_service - INFO - 최종 BTC 수량(반올림): 0.48
2025-03-11 14:38:09,615 - order_service - INFO - 주문 상세 정보: {
  "symbol": "BTCUSDT",
  "side": "Sell",
  "leverage": 5,
  "position_size": 0.428,
  "entry_price": 55626.1,
  "stop_loss": 55726.1,
  "take_profit": 54526.1,
  "is_btc_unit": false
}
2025-03-11 14:38:09,797 - exchange.bybit_client - INFO - USDT 잔고 - 총자산: $53,353.99, 가용잔고: $0.00, 사용중: $0.00
2025-03-11 14:38:09,797 - order_service - INFO - USDT 잔고 - 총자산: $53353.98794379, 가용잔고: $0.0, 사용중: $0.0
2025-03-11 14:38:09,797 - order_service - INFO - 주문 실행 시도: {'category': 'linear', 'symbol': 'BTCUSDT', 'side': 'Sell', 'orderType': 'Limit', 'qty': '0.428', 'price': '55626.1', 'timeInForce': 'GTC', 'positionIdx': 0, 'reduceOnly': False, 'stopLoss': '55726.1', 'takeProfit': '54526.1'}
2025-03-11 14:38:10,060 - exchange.bybit_client - INFO - 서버 시간 동기화 완료: server_time=1741671490000, local_time=1741671490060, offset=-60ms
2025-03-11 14:38:10,610 - order_service - INFO - === 주문 요청 및 응답 상세 ===
2025-03-11 14:38:10,610 - order_service - INFO - 요청 파라미터:
{
  "category": "linear",
  "symbol": "BTCUSDT",
  "side": "Sell",
  "orderType": "Limit",
  "qty": "0.428",
  "price": "55626.1",
  "timeInForce": "GTC",
  "positionIdx": 0,
  "reduceOnly": false,
  "stopLoss": "55726.1",
  "takeProfit": "54526.1"
}
2025-03-11 14:38:10,610 - order_service - INFO - API 응답:
{
  "retCode": 0,
  "retMsg": "OK",
  "result": {
    "orderId": "58a86f64-f9ae-4213-9711-a8fd9d9925fb",
    "orderLinkId": ""
  },
  "retExtInfo": {},
  "time": 1741671490709
}
2025-03-11 14:38:11,698 - telegram_bot.monitors.auto_analyzer - INFO - 초기 분석 실행 완료
2025-03-11 14:50:25,331 - main - INFO - 환경변수 및 설정 초기화 중...
2025-03-11 14:50:25,331 - main - INFO - Bybit 테스트넷 클라이언트 초기화 중...
2025-03-11 14:50:25,556 - main - INFO - 서비스 초기화 중...
2025-03-11 14:50:25,556 - main - INFO - 마켓 데이터 서비스 중...
2025-03-11 14:50:27,314 - services.market_data_service - INFO - 마켓 데이터 로드 완료
2025-03-11 14:50:27,580 - telegram_bot.bot - INFO - 텔레그램 설정 로드:
2025-03-11 14:50:27,581 - telegram_bot.bot - INFO - - admin_chat_id: 583881676
2025-03-11 14:50:27,581 - telegram_bot.bot - INFO - - alert_chat_ids: [-1002464784986]
2025-03-11 14:50:28,025 - telegram_bot.monitors.auto_analyzer - INFO - AutoAnalyzer 초기화 시작
2025-03-11 14:50:28,025 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 설정 시작
2025-03-11 14:50:28,040 - telegram_bot.monitors.auto_analyzer - INFO - 다음 실행 예정 시간: 2025-03-11 15:00:00
2025-03-11 14:50:28,040 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-03-11 14:50:28,040 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 설정 완료
2025-03-11 14:50:28,043 - telegram_bot.bot - INFO - 봇 초기화 시작...
2025-03-11 14:50:28,043 - services.trade_history_service - INFO - === 포지션 정보 초기화 시작 ===
2025-03-11 14:50:28,043 - services.trade_history_service - INFO - 조회 기간: 2024-12-11 ~ 2025-03-11
2025-03-11 14:50:28,044 - services.trade_store - INFO - 날짜 범위 조회: 20241211 ~ 20250311
2025-03-11 14:50:28,044 - services.trade_store - INFO - 날짜: 20241211, 포지션 수: 1건
2025-03-11 14:50:28,045 - services.trade_store - INFO - 날짜: 20241212, 포지션 수: 1건
2025-03-11 14:50:28,045 - services.trade_store - INFO - 날짜: 20241213, 포지션 수: 2건
2025-03-11 14:50:28,045 - services.trade_store - INFO - 날짜: 20241214, 포지션 수: 2건
2025-03-11 14:50:28,045 - services.trade_store - INFO - 날짜: 20241215, 포지션 수: 0건
2025-03-11 14:50:28,045 - services.trade_store - INFO - 날짜: 20241216, 포지션 수: 0건
2025-03-11 14:50:28,046 - services.trade_store - INFO - 날짜: 20241217, 포지션 수: 10건
2025-03-11 14:50:28,046 - services.trade_store - INFO - 날짜: 20241218, 포지션 수: 5건
2025-03-11 14:50:28,046 - services.trade_store - INFO - 날짜: 20241219, 포지션 수: 1건
2025-03-11 14:50:28,046 - services.trade_store - INFO - 날짜: 20241220, 포지션 수: 31건
2025-03-11 14:50:28,048 - services.trade_store - INFO - 날짜: 20241221, 포지션 수: 3건
2025-03-11 14:50:28,048 - services.trade_store - INFO - 날짜: 20241222, 포지션 수: 10건
2025-03-11 14:50:28,048 - services.trade_store - INFO - 날짜: 20241223, 포지션 수: 7건
2025-03-11 14:50:28,049 - services.trade_store - INFO - 날짜: 20241224, 포지션 수: 11건
2025-03-11 14:50:28,049 - services.trade_store - INFO - 날짜: 20241225, 포지션 수: 2건
2025-03-11 14:50:28,049 - services.trade_store - INFO - 날짜: 20241226, 포지션 수: 7건
2025-03-11 14:50:28,050 - services.trade_store - INFO - 날짜: 20241227, 포지션 수: 7건
2025-03-11 14:50:28,050 - services.trade_store - INFO - 날짜: 20241228, 포지션 수: 4건
2025-03-11 14:50:28,051 - services.trade_store - INFO - 날짜: 20241229, 포지션 수: 0건
2025-03-11 14:50:28,051 - services.trade_store - INFO - 날짜: 20241230, 포지션 수: 15건
2025-03-11 14:50:28,051 - services.trade_store - INFO - 날짜: 20241231, 포지션 수: 8건
2025-03-11 14:50:28,051 - services.trade_store - INFO - 날짜: 20250101, 포지션 수: 0건
2025-03-11 14:50:28,051 - services.trade_store - INFO - 날짜: 20250102, 포지션 수: 0건
2025-03-11 14:50:28,052 - services.trade_store - INFO - 날짜: 20250103, 포지션 수: 0건
2025-03-11 14:50:28,052 - services.trade_store - INFO - 날짜: 20250104, 포지션 수: 0건
2025-03-11 14:50:28,052 - services.trade_store - INFO - 날짜: 20250105, 포지션 수: 0건
2025-03-11 14:50:28,052 - services.trade_store - INFO - 날짜: 20250106, 포지션 수: 0건
2025-03-11 14:50:28,053 - services.trade_store - INFO - 날짜: 20250107, 포지션 수: 0건
2025-03-11 14:50:28,053 - services.trade_store - INFO - 날짜: 20250108, 포지션 수: 0건
2025-03-11 14:50:28,053 - services.trade_store - INFO - 날짜: 20250109, 포지션 수: 0건
2025-03-11 14:50:28,053 - services.trade_store - INFO - 날짜: 20250110, 포지션 수: 0건
2025-03-11 14:50:28,053 - services.trade_store - INFO - 날짜: 20250111, 포지션 수: 0건
2025-03-11 14:50:28,053 - services.trade_store - INFO - 날짜: 20250112, 포지션 수: 0건
2025-03-11 14:50:28,053 - services.trade_store - INFO - 날짜: 20250113, 포지션 수: 0건
2025-03-11 14:50:28,054 - services.trade_store - INFO - 날짜: 20250114, 포지션 수: 0건
2025-03-11 14:50:28,054 - services.trade_store - INFO - 날짜: 20250115, 포지션 수: 0건
2025-03-11 14:50:28,054 - services.trade_store - INFO - 날짜: 20250116, 포지션 수: 0건
2025-03-11 14:50:28,054 - services.trade_store - INFO - 날짜: 20250117, 포지션 수: 0건
2025-03-11 14:50:28,054 - services.trade_store - INFO - 날짜: 20250118, 포지션 수: 0건
2025-03-11 14:50:28,054 - services.trade_store - INFO - 날짜: 20250119, 포지션 수: 0건
2025-03-11 14:50:28,054 - services.trade_store - INFO - 날짜: 20250120, 포지션 수: 0건
2025-03-11 14:50:28,054 - services.trade_store - INFO - 날짜: 20250121, 포지션 수: 0건
2025-03-11 14:50:28,054 - services.trade_store - INFO - 날짜: 20250122, 포지션 수: 0건
2025-03-11 14:50:28,054 - services.trade_store - INFO - 날짜: 20250123, 포지션 수: 0건
2025-03-11 14:50:28,054 - services.trade_store - INFO - 날짜: 20250124, 포지션 수: 0건
2025-03-11 14:50:28,054 - services.trade_store - INFO - 날짜: 20250125, 포지션 수: 0건
2025-03-11 14:50:28,054 - services.trade_store - INFO - 날짜: 20250126, 포지션 수: 0건
2025-03-11 14:50:28,054 - services.trade_store - INFO - 날짜: 20250127, 포지션 수: 0건
2025-03-11 14:50:28,054 - services.trade_store - INFO - 날짜: 20250128, 포지션 수: 0건
2025-03-11 14:50:28,054 - services.trade_store - INFO - 날짜: 20250129, 포지션 수: 0건
2025-03-11 14:50:28,054 - services.trade_store - INFO - 날짜: 20250130, 포지션 수: 0건
2025-03-11 14:50:28,054 - services.trade_store - INFO - 날짜: 20250131, 포지션 수: 0건
2025-03-11 14:50:28,054 - services.trade_store - INFO - 날짜: 20250201, 포지션 수: 0건
2025-03-11 14:50:28,054 - services.trade_store - INFO - 날짜: 20250202, 포지션 수: 0건
2025-03-11 14:50:28,054 - services.trade_store - INFO - 날짜: 20250203, 포지션 수: 0건
2025-03-11 14:50:28,054 - services.trade_store - INFO - 날짜: 20250204, 포지션 수: 0건
2025-03-11 14:50:28,054 - services.trade_store - INFO - 날짜: 20250205, 포지션 수: 0건
2025-03-11 14:50:28,054 - services.trade_store - INFO - 날짜: 20250206, 포지션 수: 0건
2025-03-11 14:50:28,054 - services.trade_store - INFO - 날짜: 20250207, 포지션 수: 0건
2025-03-11 14:50:28,054 - services.trade_store - INFO - 날짜: 20250208, 포지션 수: 0건
2025-03-11 14:50:28,054 - services.trade_store - INFO - 날짜: 20250209, 포지션 수: 0건
2025-03-11 14:50:28,054 - services.trade_store - INFO - 날짜: 20250210, 포지션 수: 0건
2025-03-11 14:50:28,054 - services.trade_store - INFO - 날짜: 20250211, 포지션 수: 0건
2025-03-11 14:50:28,054 - services.trade_store - INFO - 날짜: 20250212, 포지션 수: 0건
2025-03-11 14:50:28,054 - services.trade_store - INFO - 날짜: 20250213, 포지션 수: 0건
2025-03-11 14:50:28,054 - services.trade_store - INFO - 날짜: 20250214, 포지션 수: 2건
2025-03-11 14:50:28,058 - services.trade_store - INFO - 날짜: 20250215, 포지션 수: 2건
2025-03-11 14:50:28,058 - services.trade_store - INFO - 날짜: 20250216, 포지션 수: 0건
2025-03-11 14:50:28,058 - services.trade_store - INFO - 날짜: 20250217, 포지션 수: 2건
2025-03-11 14:50:28,059 - services.trade_store - INFO - 날짜: 20250218, 포지션 수: 0건
2025-03-11 14:50:28,059 - services.trade_store - INFO - 날짜: 20250219, 포지션 수: 0건
2025-03-11 14:50:28,059 - services.trade_store - INFO - 날짜: 20250220, 포지션 수: 0건
2025-03-11 14:50:28,061 - services.trade_store - INFO - 날짜: 20250221, 포지션 수: 2건
2025-03-11 14:50:28,061 - services.trade_store - INFO - 날짜: 20250222, 포지션 수: 0건
2025-03-11 14:50:28,061 - services.trade_store - INFO - 날짜: 20250223, 포지션 수: 0건
2025-03-11 14:50:28,061 - services.trade_store - INFO - 날짜: 20250224, 포지션 수: 0건
2025-03-11 14:50:28,061 - services.trade_store - INFO - 날짜: 20250225, 포지션 수: 0건
2025-03-11 14:50:28,062 - services.trade_store - INFO - 날짜: 20250226, 포지션 수: 0건
2025-03-11 14:50:28,062 - services.trade_store - INFO - 날짜: 20250227, 포지션 수: 0건
2025-03-11 14:50:28,062 - services.trade_store - INFO - 날짜: 20250228, 포지션 수: 0건
2025-03-11 14:50:28,062 - services.trade_store - INFO - 날짜: 20250301, 포지션 수: 0건
2025-03-11 14:50:28,062 - services.trade_store - INFO - 날짜: 20250302, 포지션 수: 0건
2025-03-11 14:50:28,062 - services.trade_store - INFO - 날짜: 20250303, 포지션 수: 0건
2025-03-11 14:50:28,062 - services.trade_store - INFO - 날짜: 20250304, 포지션 수: 0건
2025-03-11 14:50:28,063 - services.trade_store - INFO - 날짜: 20250305, 포지션 수: 0건
2025-03-11 14:50:28,063 - services.trade_store - INFO - 날짜: 20250306, 포지션 수: 0건
2025-03-11 14:50:28,063 - services.trade_store - INFO - 날짜: 20250307, 포지션 수: 0건
2025-03-11 14:50:28,063 - services.trade_store - INFO - 날짜: 20250308, 포지션 수: 0건
2025-03-11 14:50:28,063 - services.trade_store - INFO - 날짜: 20250309, 포지션 수: 0건
2025-03-11 14:50:28,063 - services.trade_store - INFO - 날짜: 20250310, 포지션 수: 0건
2025-03-11 14:50:28,063 - services.trade_store - INFO - 날짜: 20250311, 포지션 수: 0건
2025-03-11 14:50:28,063 - services.trade_store - INFO - 총 135건의 포지션 데이터 로드됨
2025-03-11 14:50:28,064 - services.trade_history_service - INFO - 기존 데이터: 135건
2025-03-11 14:50:28,064 - telegram_bot.bot - INFO - Application 빌드 시작...
2025-03-11 14:50:28,491 - telegram_bot.bot - INFO - 봇 초기화 완료, 시작 준비 중...
2025-03-11 14:50:28,491 - telegram_bot.bot - INFO - 봇 시작 시도...
2025-03-11 14:50:28,492 - telegram_bot.bot - INFO - === 봇 시작 시도 ===
2025-03-11 14:50:29,560 - apscheduler.scheduler - INFO - Scheduler started
2025-03-11 14:50:29,560 - telegram.ext.Application - INFO - Application started
2025-03-11 14:50:29,560 - telegram_bot.bot - INFO - 🤖 바이빗 트레이딩 봇이 시작되었습니다
2025-03-11 14:50:30,574 - telegram_bot.monitors.auto_analyzer - INFO - AutoAnalyzer 시작 요청됨
2025-03-11 14:50:30,574 - apscheduler.scheduler - INFO - Added job "AutoAnalyzer._scheduled_analysis" to job store "default"
2025-03-11 14:50:30,576 - apscheduler.scheduler - INFO - Scheduler started
2025-03-11 14:50:30,577 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 시작됨. 다음 실행 시간: 2025-03-11 15:00:00+09:00
2025-03-11 14:50:30,578 - telegram_bot.monitors.auto_analyzer - INFO - 초기 분석 실행 시작
2025-03-11 14:50:30,578 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄된 분석 시작 - 2025-03-11 14:50:30.578321
2025-03-11 14:50:30,578 - telegram_bot.monitors.auto_analyzer - INFO - 🔄' 1시간봉 분석 시작 (자동) ...
2025-03-11 14:50:30,578 - services.market_data_service - INFO - OHLCV 데이터 조회 시작 - 심볼: BTCUSDT, 시간대: 1h
2025-03-11 14:50:30,874 - ai.gpt_analyzer - INFO - 계산된 지표: ['open', 'high', 'low', 'close', 'volume', 'price_change_24h', 'volume_change_24h', 'rsi', 'macd', 'macd_signal', 'bb_upper', 'bb_middle', 'bb_lower', 'sma_10', 'sma_30', 'adx', 'di_plus', 'di_minus', 'trend', 'trend_strength', 'divergence_type', 'divergence_desc']
2025-03-11 14:50:30,874 - ai.gpt_analyzer - INFO - 시장 데이터: {'symbol': 'BTCUSDT', 'last_price': 55788.7, 'bid': 55626.1, 'ask': 55878.1, 'volume': 863362.555, 'timestamp': None}
2025-03-11 14:50:30,874 - ai.gpt_client - INFO - GPT API 호출 시작 (캐시 사용: False)
2025-03-11 14:50:30,874 - ai.gpt_client - INFO - 캐시 사용하지 않음 - 실제 API 호출
2025-03-11 14:50:33,095 - telegram_bot.formatters.storage_formatter - INFO - 1h 분석 결과 저장 완료: C:\Users\oasis\Aibybit_2\src\data\analysis\analysis_1h.json
2025-03-11 14:50:34,071 - telegram_bot.monitors.auto_analyzer - INFO - 분석 결과 position_suggestion: SELL
2025-03-11 14:50:34,071 - telegram_bot.monitors.auto_analyzer - INFO - 매매 신호 감지: SELL
2025-03-11 14:50:34,071 - order_service - INFO - 매매 신호 실행: {'position_suggestion': 'SELL', 'leverage': 5, 'position_size': 10, 'entry_price': 55788.7, 'stop_loss': 56000.0, 'take_profit1': 55000.0, 'take_profit2': 54000.0, 'reason': '하락 추세 및 부정적인 지표'}
2025-03-11 14:50:34,071 - order_service - INFO - 주문 시도: {'symbol': 'BTCUSDT', 'side': 'Sell', 'leverage': 5, 'position_size': 10, 'entry_price': 55788.7, 'stop_loss': 56000.0, 'take_profit': 55000.0, 'is_btc_unit': False}
2025-03-11 14:50:34,072 - order_service - INFO - 주문 상세 정보: {
  "symbol": "BTCUSDT",
  "side": "Sell",
  "leverage": 5,
  "position_size": 10,
  "entry_price": 55788.7,
  "stop_loss": 56000.0,
  "take_profit": 55000.0,
  "is_btc_unit": false
}
2025-03-11 14:50:34,072 - order_service - INFO - 주문 시도: {'symbol': 'BTCUSDT', 'side': 'Sell', 'leverage': 5, 'position_size': 10, 'entry_price': 55788.7, 'stop_loss': 56000.0, 'take_profit': 55000.0, 'is_btc_unit': False}
2025-03-11 14:50:34,401 - order_service - INFO - 현재 포지션: {}
2025-03-11 14:50:34,401 - order_service - INFO - 포지션 없음 - 신규 진입 시도
2025-03-11 14:50:34,401 - order_service - INFO - 신규 포지션 생성 시도: {'symbol': 'BTCUSDT', 'side': 'Sell', 'leverage': 5, 'position_size': 10, 'entry_price': 55788.7, 'stop_loss': 56000.0, 'take_profit': 55000.0, 'is_btc_unit': False}
2025-03-11 14:50:34,401 - order_service - INFO - 레버리지 설정 시도: 5x
2025-03-11 14:50:34,528 - exchange.bybit_client - INFO - 서버 시간 동기화 완료: server_time=1741672234000, local_time=1741672234528, offset=-528ms
2025-03-11 14:50:34,643 - order_service - INFO - 레버리지 설정 확인: 5x
2025-03-11 14:50:34,824 - exchange.bybit_client - INFO - USDT 잔고 - 총자산: $53,217.70, 가용잔고: $0.00, 사용중: $0.00
2025-03-11 14:50:35,014 - order_service - INFO - 계산 입력값 - 총자산: $53217.70445296, 미실현손익: $0.0, 비율: 10%, 레버리지: 5배, 진입가: $55788.7
2025-03-11 14:50:35,015 - order_service - INFO - 순수 자산: $53217.70445296
2025-03-11 14:50:35,016 - order_service - INFO - 포지션 가치(USDT): $26608.852226480005
2025-03-11 14:50:35,016 - order_service - INFO - 계산된 BTC 수량: 0.47695773922819507
2025-03-11 14:50:35,018 - order_service - INFO - 최종 BTC 수량(반올림): 0.477
2025-03-11 14:50:35,018 - order_service - INFO - 계산된 BTC 수량: 0.477 (총자산: $53217.70445296, 목표비율: 10%, 레버리지: 5x)
2025-03-11 14:50:35,019 - exchange.bybit_client - INFO - 주문 파라미터: {'category': 'linear', 'symbol': 'BTCUSDT', 'side': 'Sell', 'qty': '0.477', 'price': '55788.7', 'orderType': 'Limit', 'timeInForce': 'GTC', 'positionIdx': 0, 'stopLoss': '56000.0', 'takeProfit': '55000.0'}
2025-03-11 14:50:35,413 - exchange.bybit_client - INFO - 주문 API 응답: {'retCode': 0, 'retMsg': 'OK', 'result': {'orderId': '8a31a24b-142a-4e96-9b20-0ad38e875621', 'orderLinkId': ''}, 'retExtInfo': {}, 'time': 1741672235492}
2025-03-11 14:50:35,413 - order_service - INFO - 신규 포지션 생성 성공: {'category': 'linear', 'symbol': 'BTCUSDT', 'side': 'Sell', 'qty': '0.477', 'price': '55788.7', 'orderType': 'Limit', 'timeInForce': 'GTC', 'positionIdx': 0, 'stopLoss': '56000.0', 'takeProfit': '55000.0'}
2025-03-11 14:50:35,413 - order_service - INFO - 주문 결과:
2025-03-11 14:50:35,416 - order_service - INFO - {
  "retCode": 0,
  "retMsg": "OK",
  "result": {
    "orderId": "8a31a24b-142a-4e96-9b20-0ad38e875621",
    "orderLinkId": ""
  },
  "retExtInfo": {},
  "time": 1741672235492
}
2025-03-11 14:50:36,347 - telegram_bot.monitors.auto_analyzer - INFO - 초기 분석 실행 완료
2025-03-11 14:55:11,766 - main - INFO - 환경변수 및 설정 초기화 중...
2025-03-11 14:55:11,766 - main - INFO - Bybit 테스트넷 클라이언트 초기화 중...
2025-03-11 14:55:11,983 - main - INFO - 서비스 초기화 중...
2025-03-11 14:55:11,984 - main - INFO - 마켓 데이터 서비스 중...
2025-03-11 14:55:13,663 - services.market_data_service - INFO - 마켓 데이터 로드 완료
2025-03-11 14:55:13,926 - telegram_bot.bot - INFO - 텔레그램 설정 로드:
2025-03-11 14:55:13,927 - telegram_bot.bot - INFO - - admin_chat_id: 583881676
2025-03-11 14:55:13,927 - telegram_bot.bot - INFO - - alert_chat_ids: [-1002464784986]
2025-03-11 14:55:14,337 - telegram_bot.monitors.auto_analyzer - INFO - AutoAnalyzer 초기화 시작
2025-03-11 14:55:14,337 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 설정 시작
2025-03-11 14:55:14,337 - telegram_bot.monitors.auto_analyzer - INFO - 다음 실행 예정 시간: 2025-03-11 15:00:00
2025-03-11 14:55:14,337 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-03-11 14:55:14,337 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 설정 완료
2025-03-11 14:55:14,337 - telegram_bot.bot - INFO - 봇 초기화 시작...
2025-03-11 14:55:14,337 - services.trade_history_service - INFO - === 포지션 정보 초기화 시작 ===
2025-03-11 14:55:14,337 - services.trade_history_service - INFO - 조회 기간: 2024-12-11 ~ 2025-03-11
2025-03-11 14:55:14,337 - services.trade_store - INFO - 날짜 범위 조회: 20241211 ~ 20250311
2025-03-11 14:55:14,351 - services.trade_store - INFO - 날짜: 20241211, 포지션 수: 1건
2025-03-11 14:55:14,351 - services.trade_store - INFO - 날짜: 20241212, 포지션 수: 1건
2025-03-11 14:55:14,352 - services.trade_store - INFO - 날짜: 20241213, 포지션 수: 2건
2025-03-11 14:55:14,353 - services.trade_store - INFO - 날짜: 20241214, 포지션 수: 2건
2025-03-11 14:55:14,353 - services.trade_store - INFO - 날짜: 20241215, 포지션 수: 0건
2025-03-11 14:55:14,353 - services.trade_store - INFO - 날짜: 20241216, 포지션 수: 0건
2025-03-11 14:55:14,353 - services.trade_store - INFO - 날짜: 20241217, 포지션 수: 10건
2025-03-11 14:55:14,354 - services.trade_store - INFO - 날짜: 20241218, 포지션 수: 5건
2025-03-11 14:55:14,354 - services.trade_store - INFO - 날짜: 20241219, 포지션 수: 1건
2025-03-11 14:55:14,355 - services.trade_store - INFO - 날짜: 20241220, 포지션 수: 31건
2025-03-11 14:55:14,355 - services.trade_store - INFO - 날짜: 20241221, 포지션 수: 3건
2025-03-11 14:55:14,355 - services.trade_store - INFO - 날짜: 20241222, 포지션 수: 10건
2025-03-11 14:55:14,355 - services.trade_store - INFO - 날짜: 20241223, 포지션 수: 7건
2025-03-11 14:55:14,355 - services.trade_store - INFO - 날짜: 20241224, 포지션 수: 11건
2025-03-11 14:55:14,356 - services.trade_store - INFO - 날짜: 20241225, 포지션 수: 2건
2025-03-11 14:55:14,356 - services.trade_store - INFO - 날짜: 20241226, 포지션 수: 7건
2025-03-11 14:55:14,356 - services.trade_store - INFO - 날짜: 20241227, 포지션 수: 7건
2025-03-11 14:55:14,357 - services.trade_store - INFO - 날짜: 20241228, 포지션 수: 4건
2025-03-11 14:55:14,358 - services.trade_store - INFO - 날짜: 20241229, 포지션 수: 0건
2025-03-11 14:55:14,358 - services.trade_store - INFO - 날짜: 20241230, 포지션 수: 15건
2025-03-11 14:55:14,359 - services.trade_store - INFO - 날짜: 20241231, 포지션 수: 8건
2025-03-11 14:55:14,359 - services.trade_store - INFO - 날짜: 20250101, 포지션 수: 0건
2025-03-11 14:55:14,359 - services.trade_store - INFO - 날짜: 20250102, 포지션 수: 0건
2025-03-11 14:55:14,359 - services.trade_store - INFO - 날짜: 20250103, 포지션 수: 0건
2025-03-11 14:55:14,360 - services.trade_store - INFO - 날짜: 20250104, 포지션 수: 0건
2025-03-11 14:55:14,360 - services.trade_store - INFO - 날짜: 20250105, 포지션 수: 0건
2025-03-11 14:55:14,360 - services.trade_store - INFO - 날짜: 20250106, 포지션 수: 0건
2025-03-11 14:55:14,360 - services.trade_store - INFO - 날짜: 20250107, 포지션 수: 0건
2025-03-11 14:55:14,360 - services.trade_store - INFO - 날짜: 20250108, 포지션 수: 0건
2025-03-11 14:55:14,360 - services.trade_store - INFO - 날짜: 20250109, 포지션 수: 0건
2025-03-11 14:55:14,360 - services.trade_store - INFO - 날짜: 20250110, 포지션 수: 0건
2025-03-11 14:55:14,361 - services.trade_store - INFO - 날짜: 20250111, 포지션 수: 0건
2025-03-11 14:55:14,361 - services.trade_store - INFO - 날짜: 20250112, 포지션 수: 0건
2025-03-11 14:55:14,361 - services.trade_store - INFO - 날짜: 20250113, 포지션 수: 0건
2025-03-11 14:55:14,361 - services.trade_store - INFO - 날짜: 20250114, 포지션 수: 0건
2025-03-11 14:55:14,361 - services.trade_store - INFO - 날짜: 20250115, 포지션 수: 0건
2025-03-11 14:55:14,362 - services.trade_store - INFO - 날짜: 20250116, 포지션 수: 0건
2025-03-11 14:55:14,362 - services.trade_store - INFO - 날짜: 20250117, 포지션 수: 0건
2025-03-11 14:55:14,362 - services.trade_store - INFO - 날짜: 20250118, 포지션 수: 0건
2025-03-11 14:55:14,362 - services.trade_store - INFO - 날짜: 20250119, 포지션 수: 0건
2025-03-11 14:55:14,362 - services.trade_store - INFO - 날짜: 20250120, 포지션 수: 0건
2025-03-11 14:55:14,362 - services.trade_store - INFO - 날짜: 20250121, 포지션 수: 0건
2025-03-11 14:55:14,363 - services.trade_store - INFO - 날짜: 20250122, 포지션 수: 0건
2025-03-11 14:55:14,363 - services.trade_store - INFO - 날짜: 20250123, 포지션 수: 0건
2025-03-11 14:55:14,363 - services.trade_store - INFO - 날짜: 20250124, 포지션 수: 0건
2025-03-11 14:55:14,363 - services.trade_store - INFO - 날짜: 20250125, 포지션 수: 0건
2025-03-11 14:55:14,363 - services.trade_store - INFO - 날짜: 20250126, 포지션 수: 0건
2025-03-11 14:55:14,363 - services.trade_store - INFO - 날짜: 20250127, 포지션 수: 0건
2025-03-11 14:55:14,363 - services.trade_store - INFO - 날짜: 20250128, 포지션 수: 0건
2025-03-11 14:55:14,363 - services.trade_store - INFO - 날짜: 20250129, 포지션 수: 0건
2025-03-11 14:55:14,363 - services.trade_store - INFO - 날짜: 20250130, 포지션 수: 0건
2025-03-11 14:55:14,363 - services.trade_store - INFO - 날짜: 20250131, 포지션 수: 0건
2025-03-11 14:55:14,363 - services.trade_store - INFO - 날짜: 20250201, 포지션 수: 0건
2025-03-11 14:55:14,363 - services.trade_store - INFO - 날짜: 20250202, 포지션 수: 0건
2025-03-11 14:55:14,363 - services.trade_store - INFO - 날짜: 20250203, 포지션 수: 0건
2025-03-11 14:55:14,363 - services.trade_store - INFO - 날짜: 20250204, 포지션 수: 0건
2025-03-11 14:55:14,363 - services.trade_store - INFO - 날짜: 20250205, 포지션 수: 0건
2025-03-11 14:55:14,363 - services.trade_store - INFO - 날짜: 20250206, 포지션 수: 0건
2025-03-11 14:55:14,363 - services.trade_store - INFO - 날짜: 20250207, 포지션 수: 0건
2025-03-11 14:55:14,363 - services.trade_store - INFO - 날짜: 20250208, 포지션 수: 0건
2025-03-11 14:55:14,366 - services.trade_store - INFO - 날짜: 20250209, 포지션 수: 0건
2025-03-11 14:55:14,366 - services.trade_store - INFO - 날짜: 20250210, 포지션 수: 0건
2025-03-11 14:55:14,366 - services.trade_store - INFO - 날짜: 20250211, 포지션 수: 0건
2025-03-11 14:55:14,366 - services.trade_store - INFO - 날짜: 20250212, 포지션 수: 0건
2025-03-11 14:55:14,366 - services.trade_store - INFO - 날짜: 20250213, 포지션 수: 0건
2025-03-11 14:55:14,367 - services.trade_store - INFO - 날짜: 20250214, 포지션 수: 2건
2025-03-11 14:55:14,367 - services.trade_store - INFO - 날짜: 20250215, 포지션 수: 2건
2025-03-11 14:55:14,367 - services.trade_store - INFO - 날짜: 20250216, 포지션 수: 0건
2025-03-11 14:55:14,367 - services.trade_store - INFO - 날짜: 20250217, 포지션 수: 2건
2025-03-11 14:55:14,368 - services.trade_store - INFO - 날짜: 20250218, 포지션 수: 0건
2025-03-11 14:55:14,368 - services.trade_store - INFO - 날짜: 20250219, 포지션 수: 0건
2025-03-11 14:55:14,368 - services.trade_store - INFO - 날짜: 20250220, 포지션 수: 0건
2025-03-11 14:55:14,369 - services.trade_store - INFO - 날짜: 20250221, 포지션 수: 2건
2025-03-11 14:55:14,369 - services.trade_store - INFO - 날짜: 20250222, 포지션 수: 0건
2025-03-11 14:55:14,369 - services.trade_store - INFO - 날짜: 20250223, 포지션 수: 0건
2025-03-11 14:55:14,369 - services.trade_store - INFO - 날짜: 20250224, 포지션 수: 0건
2025-03-11 14:55:14,369 - services.trade_store - INFO - 날짜: 20250225, 포지션 수: 0건
2025-03-11 14:55:14,369 - services.trade_store - INFO - 날짜: 20250226, 포지션 수: 0건
2025-03-11 14:55:14,371 - services.trade_store - INFO - 날짜: 20250227, 포지션 수: 0건
2025-03-11 14:55:14,371 - services.trade_store - INFO - 날짜: 20250228, 포지션 수: 0건
2025-03-11 14:55:14,371 - services.trade_store - INFO - 날짜: 20250301, 포지션 수: 0건
2025-03-11 14:55:14,371 - services.trade_store - INFO - 날짜: 20250302, 포지션 수: 0건
2025-03-11 14:55:14,371 - services.trade_store - INFO - 날짜: 20250303, 포지션 수: 0건
2025-03-11 14:55:14,372 - services.trade_store - INFO - 날짜: 20250304, 포지션 수: 0건
2025-03-11 14:55:14,372 - services.trade_store - INFO - 날짜: 20250305, 포지션 수: 0건
2025-03-11 14:55:14,372 - services.trade_store - INFO - 날짜: 20250306, 포지션 수: 0건
2025-03-11 14:55:14,372 - services.trade_store - INFO - 날짜: 20250307, 포지션 수: 0건
2025-03-11 14:55:14,372 - services.trade_store - INFO - 날짜: 20250308, 포지션 수: 0건
2025-03-11 14:55:14,372 - services.trade_store - INFO - 날짜: 20250309, 포지션 수: 0건
2025-03-11 14:55:14,372 - services.trade_store - INFO - 날짜: 20250310, 포지션 수: 0건
2025-03-11 14:55:14,373 - services.trade_store - INFO - 날짜: 20250311, 포지션 수: 0건
2025-03-11 14:55:14,373 - services.trade_store - INFO - 총 135건의 포지션 데이터 로드됨
2025-03-11 14:55:14,373 - services.trade_history_service - INFO - 기존 데이터: 135건
2025-03-11 14:55:14,373 - telegram_bot.bot - INFO - Application 빌드 시작...
2025-03-11 14:55:14,807 - telegram_bot.bot - INFO - 봇 초기화 완료, 시작 준비 중...
2025-03-11 14:55:14,807 - telegram_bot.bot - INFO - 봇 시작 시도...
2025-03-11 14:55:14,808 - telegram_bot.bot - INFO - === 봇 시작 시도 ===
2025-03-11 14:55:15,941 - apscheduler.scheduler - INFO - Scheduler started
2025-03-11 14:55:15,942 - telegram.ext.Application - INFO - Application started
2025-03-11 14:55:15,942 - telegram_bot.bot - INFO - 🤖 바이빗 트레이딩 봇이 시작되었습니다
2025-03-11 14:55:16,986 - telegram_bot.monitors.auto_analyzer - INFO - AutoAnalyzer 시작 요청됨
2025-03-11 14:55:16,986 - apscheduler.scheduler - INFO - Added job "AutoAnalyzer._scheduled_analysis" to job store "default"
2025-03-11 14:55:16,986 - apscheduler.scheduler - INFO - Scheduler started
2025-03-11 14:55:16,987 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 시작됨. 다음 실행 시간: 2025-03-11 15:00:00+09:00
2025-03-11 14:55:16,987 - telegram_bot.monitors.auto_analyzer - INFO - 초기 분석 실행 시작
2025-03-11 14:55:16,988 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄된 분석 시작 - 2025-03-11 14:55:16.988930
2025-03-11 14:55:16,989 - telegram_bot.monitors.auto_analyzer - INFO - 🔄' 1시간봉 분석 시작 (자동) ...
2025-03-11 14:55:16,989 - services.market_data_service - INFO - OHLCV 데이터 조회 시작 - 심볼: BTCUSDT, 시간대: 1h
2025-03-11 14:55:17,236 - ai.gpt_analyzer - INFO - 계산된 지표: ['open', 'high', 'low', 'close', 'volume', 'price_change_24h', 'volume_change_24h', 'rsi', 'macd', 'macd_signal', 'bb_upper', 'bb_middle', 'bb_lower', 'sma_10', 'sma_30', 'adx', 'di_plus', 'di_minus', 'trend', 'trend_strength', 'divergence_type', 'divergence_desc']
2025-03-11 14:55:17,236 - ai.gpt_analyzer - INFO - 시장 데이터: {'symbol': 'BTCUSDT', 'last_price': 55888.1, 'bid': 55713.0, 'ask': 55888.1, 'volume': 863363.018, 'timestamp': None}
2025-03-11 14:55:17,236 - ai.gpt_client - INFO - GPT API 호출 시작 (캐시 사용: False)
2025-03-11 14:55:17,236 - ai.gpt_client - INFO - 캐시 사용하지 않음 - 실제 API 호출
2025-03-11 14:55:20,185 - telegram_bot.formatters.storage_formatter - INFO - 1h 분석 결과 저장 완료: C:\Users\oasis\Aibybit_2\src\data\analysis\analysis_1h.json
2025-03-11 14:55:21,205 - telegram_bot.monitors.auto_analyzer - INFO - 분석 결과 position_suggestion: SELL
2025-03-11 14:55:21,205 - telegram_bot.monitors.auto_analyzer - INFO - 매매 신호 감지: SELL
2025-03-11 14:55:21,206 - order_service - INFO - 매매 신호 실행: {'position_suggestion': 'SELL', 'leverage': 5, 'position_size': 10, 'entry_price': 55888.1, 'stop_loss': 56000.0, 'take_profit1': 55000.0, 'take_profit2': 54000.0, 'reason': '하락 추세 및 부정적인 지표'}
2025-03-11 14:55:21,206 - order_service - INFO - 주문 시도: {'symbol': 'BTCUSDT', 'side': 'Sell', 'leverage': 5, 'position_size': 10, 'entry_price': 55888.1, 'stop_loss': 56000.0, 'take_profit': 55000.0, 'is_btc_unit': False}
2025-03-11 14:55:21,207 - order_service - INFO - 주문 상세 정보: {
  "symbol": "BTCUSDT",
  "side": "Sell",
  "leverage": 5,
  "position_size": 10,
  "entry_price": 55888.1,
  "stop_loss": 56000.0,
  "take_profit": 55000.0,
  "is_btc_unit": false
}
2025-03-11 14:55:21,207 - order_service - INFO - 주문 시도: {'symbol': 'BTCUSDT', 'side': 'Sell', 'leverage': 5, 'position_size': 10, 'entry_price': 55888.1, 'stop_loss': 56000.0, 'take_profit': 55000.0, 'is_btc_unit': False}
2025-03-11 14:55:21,709 - order_service - INFO - 현재 포지션: {'symbol': 'BTC/USDT:USDT', 'side': 'Short', 'size': 0.477, 'leverage': 5, 'entryPrice': 55788.7, 'markPrice': 55888.1, 'unrealisedPnl': -47.4138, 'stopLoss': 0.0, 'takeProfit': 0.0}
2025-03-11 14:55:21,709 - order_service - INFO - 레버리지 차이가 작음(0) - 크기만 조정
2025-03-11 14:55:21,905 - exchange.bybit_client - INFO - USDT 잔고 - 총자산: $53,212.38, 가용잔고: $0.00, 사용중: $0.00
2025-03-11 14:55:21,905 - order_service - INFO - 가용 잔고: $0.0, 총 자산: $53212.38221098, 사용중: $0.0
2025-03-11 14:55:22,091 - order_service - INFO - 계산 입력값 - 총자산: $53212.38221098, 미실현손익: $0.0, 비율: 10%, 레버리지: 5배, 진입가: $55888.1
2025-03-11 14:55:22,092 - order_service - INFO - 순수 자산: $53212.38221098
2025-03-11 14:55:22,093 - order_service - INFO - 포지션 가치(USDT): $26606.19110549
2025-03-11 14:55:22,093 - order_service - INFO - 계산된 BTC 수량: 0.4760618290027752
2025-03-11 14:55:22,094 - order_service - INFO - 최종 BTC 수량(반올림): 0.476
2025-03-11 14:55:22,095 - order_service - INFO - 주문 상세 정보: {
  "symbol": "BTCUSDT",
  "side": "Buy",
  "leverage": 5,
  "position_size": 0.0010000000000000009,
  "entry_price": 55888.1,
  "stop_loss": 56000.0,
  "take_profit": 55000.0,
  "is_btc_unit": false
}
2025-03-11 14:55:22,274 - exchange.bybit_client - INFO - USDT 잔고 - 총자산: $53,212.38, 가용잔고: $0.00, 사용중: $0.00
2025-03-11 14:55:22,274 - order_service - INFO - USDT 잔고 - 총자산: $53212.38221098, 가용잔고: $0.0, 사용중: $0.0
2025-03-11 14:55:22,287 - order_service - INFO - 주문 실행 시도: {'category': 'linear', 'symbol': 'BTCUSDT', 'side': 'Buy', 'orderType': 'Limit', 'qty': '0.001', 'price': '55888.1', 'timeInForce': 'GTC', 'positionIdx': 0, 'reduceOnly': False, 'stopLoss': '56000.0', 'takeProfit': '55000.0'}
2025-03-11 14:55:22,677 - exchange.bybit_client - INFO - 서버 시간 동기화 완료: server_time=1741672522000, local_time=1741672522677, offset=-677ms
2025-03-11 14:55:22,823 - order_service - INFO - === 주문 요청 및 응답 상세 ===
2025-03-11 14:55:22,823 - order_service - INFO - 요청 파라미터:
{
  "category": "linear",
  "symbol": "BTCUSDT",
  "side": "Buy",
  "orderType": "Limit",
  "qty": "0.001",
  "price": "55888.1",
  "timeInForce": "GTC",
  "positionIdx": 0,
  "reduceOnly": false,
  "stopLoss": "56000.0",
  "takeProfit": "55000.0"
}
2025-03-11 14:55:22,825 - order_service - INFO - API 응답:
{
  "retCode": 10001,
  "retMsg": "TakeProfit:550000000 set for Buy position should be higher than base_price:558881000??LastPrice",
  "result": {},
  "retExtInfo": {},
  "time": 1741672522904
}
2025-03-11 14:55:23,814 - telegram_bot.monitors.auto_analyzer - INFO - 초기 분석 실행 완료
2025-03-11 15:00:00,007 - apscheduler.executors.default - INFO - Running job "AutoAnalyzer._scheduled_analysis (trigger: interval[1:00:00], next run at: 2025-03-11 16:00:00 KST)" (scheduled at 2025-03-11 15:00:00+09:00)
2025-03-11 15:00:00,007 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄된 분석 시작 - 2025-03-11 15:00:00.007019
2025-03-11 15:00:00,008 - telegram_bot.monitors.auto_analyzer - INFO - 마지막 실행 후 283.019227초 경과 - 스킵
2025-03-11 15:00:00,008 - apscheduler.executors.default - INFO - Job "AutoAnalyzer._scheduled_analysis (trigger: interval[1:00:00], next run at: 2025-03-11 16:00:00 KST)" executed successfully
2025-03-11 15:01:50,359 - main - INFO - 환경변수 및 설정 초기화 중...
2025-03-11 15:01:50,359 - main - INFO - Bybit 테스트넷 클라이언트 초기화 중...
2025-03-11 15:01:50,646 - main - INFO - 서비스 초기화 중...
2025-03-11 15:01:50,646 - main - INFO - 마켓 데이터 서비스 중...
2025-03-11 15:01:52,541 - services.market_data_service - INFO - 마켓 데이터 로드 완료
2025-03-11 15:01:54,374 - telegram_bot.bot - INFO - 텔레그램 설정 로드:
2025-03-11 15:01:54,375 - telegram_bot.bot - INFO - - admin_chat_id: 583881676
2025-03-11 15:01:54,375 - telegram_bot.bot - INFO - - alert_chat_ids: [-1002464784986]
2025-03-11 15:01:54,806 - telegram_bot.monitors.auto_analyzer - INFO - AutoAnalyzer 초기화 시작
2025-03-11 15:01:54,806 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 설정 시작
2025-03-11 15:01:54,806 - telegram_bot.monitors.auto_analyzer - INFO - 다음 실행 예정 시간: 2025-03-11 16:00:00
2025-03-11 15:01:54,806 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-03-11 15:01:54,806 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 설정 완료
2025-03-11 15:01:54,806 - telegram_bot.bot - INFO - 봇 초기화 시작...
2025-03-11 15:01:54,806 - services.trade_history_service - INFO - === 포지션 정보 초기화 시작 ===
2025-03-11 15:01:54,806 - services.trade_history_service - INFO - 조회 기간: 2024-12-11 ~ 2025-03-11
2025-03-11 15:01:54,806 - services.trade_store - INFO - 날짜 범위 조회: 20241211 ~ 20250311
2025-03-11 15:01:54,823 - services.trade_store - INFO - 날짜: 20241211, 포지션 수: 1건
2025-03-11 15:01:54,824 - services.trade_store - INFO - 날짜: 20241212, 포지션 수: 1건
2025-03-11 15:01:54,824 - services.trade_store - INFO - 날짜: 20241213, 포지션 수: 2건
2025-03-11 15:01:54,827 - services.trade_store - INFO - 날짜: 20241214, 포지션 수: 2건
2025-03-11 15:01:54,828 - services.trade_store - INFO - 날짜: 20241215, 포지션 수: 0건
2025-03-11 15:01:54,828 - services.trade_store - INFO - 날짜: 20241216, 포지션 수: 0건
2025-03-11 15:01:54,829 - services.trade_store - INFO - 날짜: 20241217, 포지션 수: 10건
2025-03-11 15:01:54,830 - services.trade_store - INFO - 날짜: 20241218, 포지션 수: 5건
2025-03-11 15:01:54,831 - services.trade_store - INFO - 날짜: 20241219, 포지션 수: 1건
2025-03-11 15:01:54,839 - services.trade_store - INFO - 날짜: 20241220, 포지션 수: 31건
2025-03-11 15:01:54,842 - services.trade_store - INFO - 날짜: 20241221, 포지션 수: 3건
2025-03-11 15:01:54,843 - services.trade_store - INFO - 날짜: 20241222, 포지션 수: 10건
2025-03-11 15:01:54,844 - services.trade_store - INFO - 날짜: 20241223, 포지션 수: 7건
2025-03-11 15:01:54,845 - services.trade_store - INFO - 날짜: 20241224, 포지션 수: 11건
2025-03-11 15:01:54,845 - services.trade_store - INFO - 날짜: 20241225, 포지션 수: 2건
2025-03-11 15:01:54,846 - services.trade_store - INFO - 날짜: 20241226, 포지션 수: 7건
2025-03-11 15:01:54,854 - services.trade_store - INFO - 날짜: 20241227, 포지션 수: 7건
2025-03-11 15:01:54,863 - services.trade_store - INFO - 날짜: 20241228, 포지션 수: 4건
2025-03-11 15:01:54,864 - services.trade_store - INFO - 날짜: 20241229, 포지션 수: 0건
2025-03-11 15:01:54,865 - services.trade_store - INFO - 날짜: 20241230, 포지션 수: 15건
2025-03-11 15:01:54,866 - services.trade_store - INFO - 날짜: 20241231, 포지션 수: 8건
2025-03-11 15:01:54,866 - services.trade_store - INFO - 날짜: 20250101, 포지션 수: 0건
2025-03-11 15:01:54,867 - services.trade_store - INFO - 날짜: 20250102, 포지션 수: 0건
2025-03-11 15:01:54,867 - services.trade_store - INFO - 날짜: 20250103, 포지션 수: 0건
2025-03-11 15:01:54,867 - services.trade_store - INFO - 날짜: 20250104, 포지션 수: 0건
2025-03-11 15:01:54,867 - services.trade_store - INFO - 날짜: 20250105, 포지션 수: 0건
2025-03-11 15:01:54,867 - services.trade_store - INFO - 날짜: 20250106, 포지션 수: 0건
2025-03-11 15:01:54,867 - services.trade_store - INFO - 날짜: 20250107, 포지션 수: 0건
2025-03-11 15:01:54,867 - services.trade_store - INFO - 날짜: 20250108, 포지션 수: 0건
2025-03-11 15:01:54,867 - services.trade_store - INFO - 날짜: 20250109, 포지션 수: 0건
2025-03-11 15:01:54,868 - services.trade_store - INFO - 날짜: 20250110, 포지션 수: 0건
2025-03-11 15:01:54,868 - services.trade_store - INFO - 날짜: 20250111, 포지션 수: 0건
2025-03-11 15:01:54,868 - services.trade_store - INFO - 날짜: 20250112, 포지션 수: 0건
2025-03-11 15:01:54,868 - services.trade_store - INFO - 날짜: 20250113, 포지션 수: 0건
2025-03-11 15:01:54,868 - services.trade_store - INFO - 날짜: 20250114, 포지션 수: 0건
2025-03-11 15:01:54,868 - services.trade_store - INFO - 날짜: 20250115, 포지션 수: 0건
2025-03-11 15:01:54,868 - services.trade_store - INFO - 날짜: 20250116, 포지션 수: 0건
2025-03-11 15:01:54,868 - services.trade_store - INFO - 날짜: 20250117, 포지션 수: 0건
2025-03-11 15:01:54,868 - services.trade_store - INFO - 날짜: 20250118, 포지션 수: 0건
2025-03-11 15:01:54,869 - services.trade_store - INFO - 날짜: 20250119, 포지션 수: 0건
2025-03-11 15:01:54,869 - services.trade_store - INFO - 날짜: 20250120, 포지션 수: 0건
2025-03-11 15:01:54,869 - services.trade_store - INFO - 날짜: 20250121, 포지션 수: 0건
2025-03-11 15:01:54,869 - services.trade_store - INFO - 날짜: 20250122, 포지션 수: 0건
2025-03-11 15:01:54,870 - services.trade_store - INFO - 날짜: 20250123, 포지션 수: 0건
2025-03-11 15:01:54,870 - services.trade_store - INFO - 날짜: 20250124, 포지션 수: 0건
2025-03-11 15:01:54,871 - services.trade_store - INFO - 날짜: 20250125, 포지션 수: 0건
2025-03-11 15:01:54,871 - services.trade_store - INFO - 날짜: 20250126, 포지션 수: 0건
2025-03-11 15:01:54,871 - services.trade_store - INFO - 날짜: 20250127, 포지션 수: 0건
2025-03-11 15:01:54,871 - services.trade_store - INFO - 날짜: 20250128, 포지션 수: 0건
2025-03-11 15:01:54,871 - services.trade_store - INFO - 날짜: 20250129, 포지션 수: 0건
2025-03-11 15:01:54,871 - services.trade_store - INFO - 날짜: 20250130, 포지션 수: 0건
2025-03-11 15:01:54,872 - services.trade_store - INFO - 날짜: 20250131, 포지션 수: 0건
2025-03-11 15:01:54,872 - services.trade_store - INFO - 날짜: 20250201, 포지션 수: 0건
2025-03-11 15:01:54,872 - services.trade_store - INFO - 날짜: 20250202, 포지션 수: 0건
2025-03-11 15:01:54,872 - services.trade_store - INFO - 날짜: 20250203, 포지션 수: 0건
2025-03-11 15:01:54,872 - services.trade_store - INFO - 날짜: 20250204, 포지션 수: 0건
2025-03-11 15:01:54,872 - services.trade_store - INFO - 날짜: 20250205, 포지션 수: 0건
2025-03-11 15:01:54,873 - services.trade_store - INFO - 날짜: 20250206, 포지션 수: 0건
2025-03-11 15:01:54,873 - services.trade_store - INFO - 날짜: 20250207, 포지션 수: 0건
2025-03-11 15:01:54,873 - services.trade_store - INFO - 날짜: 20250208, 포지션 수: 0건
2025-03-11 15:01:54,874 - services.trade_store - INFO - 날짜: 20250209, 포지션 수: 0건
2025-03-11 15:01:54,874 - services.trade_store - INFO - 날짜: 20250210, 포지션 수: 0건
2025-03-11 15:01:54,874 - services.trade_store - INFO - 날짜: 20250211, 포지션 수: 0건
2025-03-11 15:01:54,874 - services.trade_store - INFO - 날짜: 20250212, 포지션 수: 0건
2025-03-11 15:01:54,874 - services.trade_store - INFO - 날짜: 20250213, 포지션 수: 0건
2025-03-11 15:01:54,881 - services.trade_store - INFO - 날짜: 20250214, 포지션 수: 2건
2025-03-11 15:01:54,891 - services.trade_store - INFO - 날짜: 20250215, 포지션 수: 2건
2025-03-11 15:01:54,891 - services.trade_store - INFO - 날짜: 20250216, 포지션 수: 0건
2025-03-11 15:01:54,893 - services.trade_store - INFO - 날짜: 20250217, 포지션 수: 2건
2025-03-11 15:01:54,893 - services.trade_store - INFO - 날짜: 20250218, 포지션 수: 0건
2025-03-11 15:01:54,894 - services.trade_store - INFO - 날짜: 20250219, 포지션 수: 0건
2025-03-11 15:01:54,894 - services.trade_store - INFO - 날짜: 20250220, 포지션 수: 0건
2025-03-11 15:01:54,895 - services.trade_store - INFO - 날짜: 20250221, 포지션 수: 2건
2025-03-11 15:01:54,895 - services.trade_store - INFO - 날짜: 20250222, 포지션 수: 0건
2025-03-11 15:01:54,895 - services.trade_store - INFO - 날짜: 20250223, 포지션 수: 0건
2025-03-11 15:01:54,895 - services.trade_store - INFO - 날짜: 20250224, 포지션 수: 0건
2025-03-11 15:01:54,895 - services.trade_store - INFO - 날짜: 20250225, 포지션 수: 0건
2025-03-11 15:01:54,895 - services.trade_store - INFO - 날짜: 20250226, 포지션 수: 0건
2025-03-11 15:01:54,895 - services.trade_store - INFO - 날짜: 20250227, 포지션 수: 0건
2025-03-11 15:01:54,895 - services.trade_store - INFO - 날짜: 20250228, 포지션 수: 0건
2025-03-11 15:01:54,895 - services.trade_store - INFO - 날짜: 20250301, 포지션 수: 0건
2025-03-11 15:01:54,896 - services.trade_store - INFO - 날짜: 20250302, 포지션 수: 0건
2025-03-11 15:01:54,896 - services.trade_store - INFO - 날짜: 20250303, 포지션 수: 0건
2025-03-11 15:01:54,896 - services.trade_store - INFO - 날짜: 20250304, 포지션 수: 0건
2025-03-11 15:01:54,896 - services.trade_store - INFO - 날짜: 20250305, 포지션 수: 0건
2025-03-11 15:01:54,896 - services.trade_store - INFO - 날짜: 20250306, 포지션 수: 0건
2025-03-11 15:01:54,896 - services.trade_store - INFO - 날짜: 20250307, 포지션 수: 0건
2025-03-11 15:01:54,896 - services.trade_store - INFO - 날짜: 20250308, 포지션 수: 0건
2025-03-11 15:01:54,896 - services.trade_store - INFO - 날짜: 20250309, 포지션 수: 0건
2025-03-11 15:01:54,896 - services.trade_store - INFO - 날짜: 20250310, 포지션 수: 0건
2025-03-11 15:01:54,897 - services.trade_store - INFO - 날짜: 20250311, 포지션 수: 0건
2025-03-11 15:01:54,897 - services.trade_store - INFO - 총 135건의 포지션 데이터 로드됨
2025-03-11 15:01:54,897 - services.trade_history_service - INFO - 기존 데이터: 135건
2025-03-11 15:01:54,897 - telegram_bot.bot - INFO - Application 빌드 시작...
2025-03-11 15:01:55,373 - telegram_bot.bot - INFO - 봇 초기화 완료, 시작 준비 중...
2025-03-11 15:01:55,373 - telegram_bot.bot - INFO - 봇 시작 시도...
2025-03-11 15:01:55,373 - telegram_bot.bot - INFO - === 봇 시작 시도 ===
2025-03-11 15:01:56,505 - apscheduler.scheduler - INFO - Scheduler started
2025-03-11 15:01:56,505 - telegram.ext.Application - INFO - Application started
2025-03-11 15:01:56,505 - telegram_bot.bot - INFO - 🤖 바이빗 트레이딩 봇이 시작되었습니다
2025-03-11 15:01:57,507 - telegram_bot.monitors.auto_analyzer - INFO - AutoAnalyzer 시작 요청됨
2025-03-11 15:01:57,507 - apscheduler.scheduler - INFO - Added job "AutoAnalyzer._scheduled_analysis" to job store "default"
2025-03-11 15:01:57,507 - apscheduler.scheduler - INFO - Scheduler started
2025-03-11 15:01:57,507 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 시작됨. 다음 실행 시간: 2025-03-11 16:00:00+09:00
2025-03-11 15:01:57,507 - telegram_bot.monitors.auto_analyzer - INFO - 초기 분석 실행 시작
2025-03-11 15:01:57,507 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄된 분석 시작 - 2025-03-11 15:01:57.507275
2025-03-11 15:01:57,507 - telegram_bot.monitors.auto_analyzer - INFO - 🔄' 1시간봉 분석 시작 (자동) ...
2025-03-11 15:01:57,507 - services.market_data_service - INFO - OHLCV 데이터 조회 시작 - 심볼: BTCUSDT, 시간대: 1h
2025-03-11 15:01:57,803 - ai.gpt_analyzer - INFO - 계산된 지표: ['open', 'high', 'low', 'close', 'volume', 'price_change_24h', 'volume_change_24h', 'rsi', 'macd', 'macd_signal', 'bb_upper', 'bb_middle', 'bb_lower', 'sma_10', 'sma_30', 'adx', 'di_plus', 'di_minus', 'trend', 'trend_strength', 'divergence_type', 'divergence_desc']
2025-03-11 15:01:57,803 - ai.gpt_analyzer - INFO - 시장 데이터: {'symbol': 'BTCUSDT', 'last_price': 55888.1, 'bid': 55710.0, 'ask': 55888.1, 'volume': 863365.03, 'timestamp': None}
2025-03-11 15:01:57,803 - ai.gpt_client - INFO - GPT API 호출 시작 (캐시 사용: False)
2025-03-11 15:01:57,803 - ai.gpt_client - INFO - 캐시 사용하지 않음 - 실제 API 호출
2025-03-11 15:01:59,847 - telegram_bot.formatters.storage_formatter - INFO - 1h 분석 결과 저장 완료: C:\Users\oasis\Aibybit_2\src\data\analysis\analysis_1h.json
2025-03-11 15:02:00,859 - telegram_bot.monitors.auto_analyzer - INFO - 분석 결과 position_suggestion: SELL
2025-03-11 15:02:00,859 - telegram_bot.monitors.auto_analyzer - INFO - 매매 신호 감지: SELL
2025-03-11 15:02:00,859 - order_service - INFO - 매매 신호 실행: {'position_suggestion': 'SELL', 'leverage': 5, 'position_size': 10, 'entry_price': 55888.1, 'stop_loss': 56000.0, 'take_profit1': 55000.0, 'take_profit2': 54000.0, 'reason': '하락 추세 및 부정적인 지표'}
2025-03-11 15:02:00,859 - order_service - INFO - 주문 시도: {'symbol': 'BTCUSDT', 'side': 'Sell', 'leverage': 5, 'position_size': 10, 'entry_price': 55888.1, 'stop_loss': 56000.0, 'take_profit': 55000.0, 'is_btc_unit': False}
2025-03-11 15:02:00,859 - order_service - INFO - 주문 상세 정보: {
  "symbol": "BTCUSDT",
  "side": "Sell",
  "leverage": 5,
  "position_size": 10,
  "entry_price": 55888.1,
  "stop_loss": 56000.0,
  "take_profit": 55000.0,
  "is_btc_unit": false
}
2025-03-11 15:02:00,859 - order_service - INFO - 주문 시도: {'symbol': 'BTCUSDT', 'side': 'Sell', 'leverage': 5, 'position_size': 10, 'entry_price': 55888.1, 'stop_loss': 56000.0, 'take_profit': 55000.0, 'is_btc_unit': False}
2025-03-11 15:02:01,695 - order_service - INFO - 현재 포지션: {'symbol': 'BTC/USDT:USDT', 'side': 'Short', 'size': 0.477, 'leverage': 5, 'entryPrice': 55788.7, 'markPrice': 55888.1, 'unrealisedPnl': -47.4138, 'stopLoss': 0.0, 'takeProfit': 0.0}
2025-03-11 15:02:01,695 - order_service - INFO - 레버리지 차이가 작음(0) - 크기만 조정
2025-03-11 15:02:01,871 - exchange.bybit_client - INFO - USDT 잔고 - 총자산: $53,212.38, 가용잔고: $0.00, 사용중: $0.00
2025-03-11 15:02:01,871 - order_service - INFO - 가용 잔고: $0.0, 총 자산: $53212.38221098, 사용중: $0.0
2025-03-11 15:02:02,056 - order_service - INFO - 계산 입력값 - 총자산: $53212.38221098, 미실현손익: $0.0, 비율: 10%, 레버리지: 5배, 진입가: $55888.1
2025-03-11 15:02:02,057 - order_service - INFO - 순수 자산: $53212.38221098
2025-03-11 15:02:02,057 - order_service - INFO - 포지션 가치(USDT): $26606.19110549
2025-03-11 15:02:02,057 - order_service - INFO - 계산된 BTC 수량: 0.4760618290027752
2025-03-11 15:02:02,057 - order_service - INFO - 최종 BTC 수량(반올림): 0.476
2025-03-11 15:02:02,057 - order_service - INFO - 주문 상세 정보: {
  "symbol": "BTCUSDT",
  "side": "Buy",
  "leverage": 5,
  "position_size": 0.0010000000000000009,
  "entry_price": 55888.1,
  "stop_loss": 56000.0,
  "take_profit": 55000.0,
  "is_btc_unit": false
}
2025-03-11 15:02:02,242 - exchange.bybit_client - INFO - USDT 잔고 - 총자산: $53,212.38, 가용잔고: $0.00, 사용중: $0.00
2025-03-11 15:02:02,242 - order_service - INFO - USDT 잔고 - 총자산: $53212.38221098, 가용잔고: $0.0, 사용중: $0.0
2025-03-11 15:02:02,242 - order_service - INFO - 주문 실행 시도: {'category': 'linear', 'symbol': 'BTCUSDT', 'side': 'Buy', 'orderType': 'Limit', 'qty': '0.001', 'price': '55888.1', 'timeInForce': 'GTC', 'positionIdx': 0, 'reduceOnly': False, 'stopLoss': '56000.0', 'takeProfit': '55000.0'}
2025-03-11 15:02:02,636 - exchange.bybit_client - INFO - 서버 시간 동기화 완료: server_time=1741672922000, local_time=1741672922636, offset=-636ms
2025-03-11 15:02:02,901 - order_service - INFO - === 주문 요청 및 응답 상세 ===
2025-03-11 15:02:02,901 - order_service - INFO - 요청 파라미터:
{
  "category": "linear",
  "symbol": "BTCUSDT",
  "side": "Buy",
  "orderType": "Limit",
  "qty": "0.001",
  "price": "55888.1",
  "timeInForce": "GTC",
  "positionIdx": 0,
  "reduceOnly": false,
  "stopLoss": "56000.0",
  "takeProfit": "55000.0"
}
2025-03-11 15:02:02,901 - order_service - INFO - API 응답:
{
  "retCode": 10001,
  "retMsg": "TakeProfit:550000000 set for Buy position should be higher than base_price:558881000??LastPrice",
  "result": {},
  "retExtInfo": {},
  "time": 1741672922986
}
2025-03-11 15:02:03,891 - telegram_bot.monitors.auto_analyzer - INFO - 초기 분석 실행 완료
2025-03-11 15:16:09,978 - main - INFO - 환경변수 및 설정 초기화 중...
2025-03-11 15:16:09,978 - main - INFO - Bybit 테스트넷 클라이언트 초기화 중...
2025-03-11 15:16:10,206 - main - INFO - 서비스 초기화 중...
2025-03-11 15:16:10,206 - main - INFO - 마켓 데이터 서비스 중...
2025-03-11 15:16:12,380 - services.market_data_service - INFO - 마켓 데이터 로드 완료
2025-03-11 15:16:12,635 - telegram_bot.bot - INFO - 텔레그램 설정 로드:
2025-03-11 15:16:12,635 - telegram_bot.bot - INFO - - admin_chat_id: 583881676
2025-03-11 15:16:12,635 - telegram_bot.bot - INFO - - alert_chat_ids: [-1002464784986]
2025-03-11 15:16:13,094 - telegram_bot.monitors.auto_analyzer - INFO - AutoAnalyzer 초기화 시작
2025-03-11 15:16:13,094 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 설정 시작
2025-03-11 15:16:13,094 - telegram_bot.monitors.auto_analyzer - INFO - 다음 실행 예정 시간: 2025-03-11 16:00:00
2025-03-11 15:16:13,098 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-03-11 15:16:13,098 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 설정 완료
2025-03-11 15:16:13,099 - telegram_bot.bot - INFO - 봇 초기화 시작...
2025-03-11 15:16:13,099 - services.trade_history_service - INFO - === 포지션 정보 초기화 시작 ===
2025-03-11 15:16:13,099 - services.trade_history_service - INFO - 조회 기간: 2024-12-11 ~ 2025-03-11
2025-03-11 15:16:13,099 - services.trade_store - INFO - 날짜 범위 조회: 20241211 ~ 20250311
2025-03-11 15:16:13,099 - services.trade_store - INFO - 날짜: 20241211, 포지션 수: 1건
2025-03-11 15:16:13,099 - services.trade_store - INFO - 날짜: 20241212, 포지션 수: 1건
2025-03-11 15:16:13,099 - services.trade_store - INFO - 날짜: 20241213, 포지션 수: 2건
2025-03-11 15:16:13,101 - services.trade_store - INFO - 날짜: 20241214, 포지션 수: 2건
2025-03-11 15:16:13,101 - services.trade_store - INFO - 날짜: 20241215, 포지션 수: 0건
2025-03-11 15:16:13,101 - services.trade_store - INFO - 날짜: 20241216, 포지션 수: 0건
2025-03-11 15:16:13,102 - services.trade_store - INFO - 날짜: 20241217, 포지션 수: 10건
2025-03-11 15:16:13,102 - services.trade_store - INFO - 날짜: 20241218, 포지션 수: 5건
2025-03-11 15:16:13,102 - services.trade_store - INFO - 날짜: 20241219, 포지션 수: 1건
2025-03-11 15:16:13,103 - services.trade_store - INFO - 날짜: 20241220, 포지션 수: 31건
2025-03-11 15:16:13,103 - services.trade_store - INFO - 날짜: 20241221, 포지션 수: 3건
2025-03-11 15:16:13,104 - services.trade_store - INFO - 날짜: 20241222, 포지션 수: 10건
2025-03-11 15:16:13,104 - services.trade_store - INFO - 날짜: 20241223, 포지션 수: 7건
2025-03-11 15:16:13,105 - services.trade_store - INFO - 날짜: 20241224, 포지션 수: 11건
2025-03-11 15:16:13,105 - services.trade_store - INFO - 날짜: 20241225, 포지션 수: 2건
2025-03-11 15:16:13,106 - services.trade_store - INFO - 날짜: 20241226, 포지션 수: 7건
2025-03-11 15:16:13,106 - services.trade_store - INFO - 날짜: 20241227, 포지션 수: 7건
2025-03-11 15:16:13,106 - services.trade_store - INFO - 날짜: 20241228, 포지션 수: 4건
2025-03-11 15:16:13,107 - services.trade_store - INFO - 날짜: 20241229, 포지션 수: 0건
2025-03-11 15:16:13,107 - services.trade_store - INFO - 날짜: 20241230, 포지션 수: 15건
2025-03-11 15:16:13,107 - services.trade_store - INFO - 날짜: 20241231, 포지션 수: 8건
2025-03-11 15:16:13,109 - services.trade_store - INFO - 날짜: 20250101, 포지션 수: 0건
2025-03-11 15:16:13,109 - services.trade_store - INFO - 날짜: 20250102, 포지션 수: 0건
2025-03-11 15:16:13,109 - services.trade_store - INFO - 날짜: 20250103, 포지션 수: 0건
2025-03-11 15:16:13,109 - services.trade_store - INFO - 날짜: 20250104, 포지션 수: 0건
2025-03-11 15:16:13,110 - services.trade_store - INFO - 날짜: 20250105, 포지션 수: 0건
2025-03-11 15:16:13,110 - services.trade_store - INFO - 날짜: 20250106, 포지션 수: 0건
2025-03-11 15:16:13,110 - services.trade_store - INFO - 날짜: 20250107, 포지션 수: 0건
2025-03-11 15:16:13,110 - services.trade_store - INFO - 날짜: 20250108, 포지션 수: 0건
2025-03-11 15:16:13,110 - services.trade_store - INFO - 날짜: 20250109, 포지션 수: 0건
2025-03-11 15:16:13,111 - services.trade_store - INFO - 날짜: 20250110, 포지션 수: 0건
2025-03-11 15:16:13,111 - services.trade_store - INFO - 날짜: 20250111, 포지션 수: 0건
2025-03-11 15:16:13,111 - services.trade_store - INFO - 날짜: 20250112, 포지션 수: 0건
2025-03-11 15:16:13,111 - services.trade_store - INFO - 날짜: 20250113, 포지션 수: 0건
2025-03-11 15:16:13,111 - services.trade_store - INFO - 날짜: 20250114, 포지션 수: 0건
2025-03-11 15:16:13,111 - services.trade_store - INFO - 날짜: 20250115, 포지션 수: 0건
2025-03-11 15:16:13,111 - services.trade_store - INFO - 날짜: 20250116, 포지션 수: 0건
2025-03-11 15:16:13,112 - services.trade_store - INFO - 날짜: 20250117, 포지션 수: 0건
2025-03-11 15:16:13,112 - services.trade_store - INFO - 날짜: 20250118, 포지션 수: 0건
2025-03-11 15:16:13,112 - services.trade_store - INFO - 날짜: 20250119, 포지션 수: 0건
2025-03-11 15:16:13,112 - services.trade_store - INFO - 날짜: 20250120, 포지션 수: 0건
2025-03-11 15:16:13,112 - services.trade_store - INFO - 날짜: 20250121, 포지션 수: 0건
2025-03-11 15:16:13,112 - services.trade_store - INFO - 날짜: 20250122, 포지션 수: 0건
2025-03-11 15:16:13,112 - services.trade_store - INFO - 날짜: 20250123, 포지션 수: 0건
2025-03-11 15:16:13,112 - services.trade_store - INFO - 날짜: 20250124, 포지션 수: 0건
2025-03-11 15:16:13,112 - services.trade_store - INFO - 날짜: 20250125, 포지션 수: 0건
2025-03-11 15:16:13,113 - services.trade_store - INFO - 날짜: 20250126, 포지션 수: 0건
2025-03-11 15:16:13,113 - services.trade_store - INFO - 날짜: 20250127, 포지션 수: 0건
2025-03-11 15:16:13,113 - services.trade_store - INFO - 날짜: 20250128, 포지션 수: 0건
2025-03-11 15:16:13,113 - services.trade_store - INFO - 날짜: 20250129, 포지션 수: 0건
2025-03-11 15:16:13,113 - services.trade_store - INFO - 날짜: 20250130, 포지션 수: 0건
2025-03-11 15:16:13,113 - services.trade_store - INFO - 날짜: 20250131, 포지션 수: 0건
2025-03-11 15:16:13,113 - services.trade_store - INFO - 날짜: 20250201, 포지션 수: 0건
2025-03-11 15:16:13,114 - services.trade_store - INFO - 날짜: 20250202, 포지션 수: 0건
2025-03-11 15:16:13,114 - services.trade_store - INFO - 날짜: 20250203, 포지션 수: 0건
2025-03-11 15:16:13,114 - services.trade_store - INFO - 날짜: 20250204, 포지션 수: 0건
2025-03-11 15:16:13,114 - services.trade_store - INFO - 날짜: 20250205, 포지션 수: 0건
2025-03-11 15:16:13,114 - services.trade_store - INFO - 날짜: 20250206, 포지션 수: 0건
2025-03-11 15:16:13,115 - services.trade_store - INFO - 날짜: 20250207, 포지션 수: 0건
2025-03-11 15:16:13,115 - services.trade_store - INFO - 날짜: 20250208, 포지션 수: 0건
2025-03-11 15:16:13,115 - services.trade_store - INFO - 날짜: 20250209, 포지션 수: 0건
2025-03-11 15:16:13,115 - services.trade_store - INFO - 날짜: 20250210, 포지션 수: 0건
2025-03-11 15:16:13,115 - services.trade_store - INFO - 날짜: 20250211, 포지션 수: 0건
2025-03-11 15:16:13,115 - services.trade_store - INFO - 날짜: 20250212, 포지션 수: 0건
2025-03-11 15:16:13,115 - services.trade_store - INFO - 날짜: 20250213, 포지션 수: 0건
2025-03-11 15:16:13,117 - services.trade_store - INFO - 날짜: 20250214, 포지션 수: 2건
2025-03-11 15:16:13,117 - services.trade_store - INFO - 날짜: 20250215, 포지션 수: 2건
2025-03-11 15:16:13,117 - services.trade_store - INFO - 날짜: 20250216, 포지션 수: 0건
2025-03-11 15:16:13,118 - services.trade_store - INFO - 날짜: 20250217, 포지션 수: 2건
2025-03-11 15:16:13,118 - services.trade_store - INFO - 날짜: 20250218, 포지션 수: 0건
2025-03-11 15:16:13,118 - services.trade_store - INFO - 날짜: 20250219, 포지션 수: 0건
2025-03-11 15:16:13,118 - services.trade_store - INFO - 날짜: 20250220, 포지션 수: 0건
2025-03-11 15:16:13,119 - services.trade_store - INFO - 날짜: 20250221, 포지션 수: 2건
2025-03-11 15:16:13,119 - services.trade_store - INFO - 날짜: 20250222, 포지션 수: 0건
2025-03-11 15:16:13,119 - services.trade_store - INFO - 날짜: 20250223, 포지션 수: 0건
2025-03-11 15:16:13,120 - services.trade_store - INFO - 날짜: 20250224, 포지션 수: 0건
2025-03-11 15:16:13,120 - services.trade_store - INFO - 날짜: 20250225, 포지션 수: 0건
2025-03-11 15:16:13,120 - services.trade_store - INFO - 날짜: 20250226, 포지션 수: 0건
2025-03-11 15:16:13,120 - services.trade_store - INFO - 날짜: 20250227, 포지션 수: 0건
2025-03-11 15:16:13,120 - services.trade_store - INFO - 날짜: 20250228, 포지션 수: 0건
2025-03-11 15:16:13,121 - services.trade_store - INFO - 날짜: 20250301, 포지션 수: 0건
2025-03-11 15:16:13,121 - services.trade_store - INFO - 날짜: 20250302, 포지션 수: 0건
2025-03-11 15:16:13,121 - services.trade_store - INFO - 날짜: 20250303, 포지션 수: 0건
2025-03-11 15:16:13,121 - services.trade_store - INFO - 날짜: 20250304, 포지션 수: 0건
2025-03-11 15:16:13,121 - services.trade_store - INFO - 날짜: 20250305, 포지션 수: 0건
2025-03-11 15:16:13,122 - services.trade_store - INFO - 날짜: 20250306, 포지션 수: 0건
2025-03-11 15:16:13,122 - services.trade_store - INFO - 날짜: 20250307, 포지션 수: 0건
2025-03-11 15:16:13,122 - services.trade_store - INFO - 날짜: 20250308, 포지션 수: 0건
2025-03-11 15:16:13,122 - services.trade_store - INFO - 날짜: 20250309, 포지션 수: 0건
2025-03-11 15:16:13,122 - services.trade_store - INFO - 날짜: 20250310, 포지션 수: 0건
2025-03-11 15:16:13,122 - services.trade_store - INFO - 날짜: 20250311, 포지션 수: 0건
2025-03-11 15:16:13,122 - services.trade_store - INFO - 총 135건의 포지션 데이터 로드됨
2025-03-11 15:16:13,122 - services.trade_history_service - INFO - 기존 데이터: 135건
2025-03-11 15:16:13,122 - telegram_bot.bot - INFO - Application 빌드 시작...
2025-03-11 15:16:13,588 - telegram_bot.bot - INFO - 봇 초기화 완료, 시작 준비 중...
2025-03-11 15:16:13,589 - telegram_bot.bot - INFO - 봇 시작 시도...
2025-03-11 15:16:13,589 - telegram_bot.bot - INFO - === 봇 시작 시도 ===
2025-03-11 15:16:14,679 - apscheduler.scheduler - INFO - Scheduler started
2025-03-11 15:16:14,679 - telegram.ext.Application - INFO - Application started
2025-03-11 15:16:14,679 - telegram_bot.bot - INFO - 🤖 바이빗 트레이딩 봇이 시작되었습니다
2025-03-11 15:16:15,674 - telegram_bot.monitors.auto_analyzer - INFO - AutoAnalyzer 시작 요청됨
2025-03-11 15:16:15,674 - apscheduler.scheduler - INFO - Added job "AutoAnalyzer._scheduled_analysis" to job store "default"
2025-03-11 15:16:15,674 - apscheduler.scheduler - INFO - Scheduler started
2025-03-11 15:16:15,674 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 시작됨. 다음 실행 시간: 2025-03-11 16:00:00+09:00
2025-03-11 15:16:15,674 - telegram_bot.monitors.auto_analyzer - INFO - 초기 분석 실행 시작
2025-03-11 15:16:15,680 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄된 분석 시작 - 2025-03-11 15:16:15.680091
2025-03-11 15:16:15,680 - telegram_bot.monitors.auto_analyzer - INFO - 🔄' 1시간봉 분석 시작 (자동) ...
2025-03-11 15:16:15,680 - services.market_data_service - INFO - OHLCV 데이터 조회 시작 - 심볼: BTCUSDT, 시간대: 1h
2025-03-11 15:16:15,963 - ai.gpt_analyzer - INFO - 계산된 지표: ['open', 'high', 'low', 'close', 'volume', 'price_change_24h', 'volume_change_24h', 'rsi', 'macd', 'macd_signal', 'bb_upper', 'bb_middle', 'bb_lower', 'sma_10', 'sma_30', 'adx', 'di_plus', 'di_minus', 'trend', 'trend_strength', 'divergence_type', 'divergence_desc']
2025-03-11 15:16:15,963 - ai.gpt_analyzer - INFO - 시장 데이터: {'symbol': 'BTCUSDT', 'last_price': 55702.8, 'bid': 55638.9, 'ask': 55788.7, 'volume': 863367.059, 'timestamp': None}
2025-03-11 15:16:15,963 - ai.gpt_client - INFO - GPT API 호출 시작 (캐시 사용: False)
2025-03-11 15:16:15,963 - ai.gpt_client - INFO - 캐시 사용하지 않음 - 실제 API 호출
2025-03-11 15:16:17,958 - telegram_bot.formatters.storage_formatter - INFO - 1h 분석 결과 저장 완료: C:\Users\oasis\Aibybit_2\src\data\analysis\analysis_1h.json
2025-03-11 15:16:19,256 - telegram_bot.monitors.auto_analyzer - INFO - 분석 결과 position_suggestion: SELL
2025-03-11 15:16:19,256 - telegram_bot.monitors.auto_analyzer - INFO - 매매 신호 감지: SELL
2025-03-11 15:16:19,256 - order_service - INFO - 매매 신호 실행: {'position_suggestion': 'SELL', 'leverage': 5, 'position_size': 10, 'entry_price': 55702.8, 'stop_loss': 56000.0, 'take_profit1': 54500.0, 'take_profit2': 54000.0, 'reason': '하락 추세 및 부정적인 지표'}
2025-03-11 15:16:19,256 - order_service - INFO - 주문 시도: {'symbol': 'BTCUSDT', 'side': 'Sell', 'leverage': 5, 'position_size': 10, 'entry_price': 55702.8, 'stop_loss': 56000.0, 'take_profit': 54500.0, 'is_btc_unit': False}
2025-03-11 15:16:19,256 - order_service - INFO - 주문 상세 정보: {
  "symbol": "BTCUSDT",
  "side": "Sell",
  "leverage": 5,
  "position_size": 10,
  "entry_price": 55702.8,
  "stop_loss": 56000.0,
  "take_profit": 54500.0,
  "is_btc_unit": false
}
2025-03-11 15:16:19,256 - order_service - INFO - 주문 시도: {'symbol': 'BTCUSDT', 'side': 'Sell', 'leverage': 5, 'position_size': 10, 'entry_price': 55702.8, 'stop_loss': 56000.0, 'take_profit': 54500.0, 'is_btc_unit': False}
2025-03-11 15:16:20,028 - order_service - INFO - 현재 포지션: {'symbol': 'BTC/USDT:USDT', 'side': 'Short', 'size': 0.477, 'leverage': 5, 'entryPrice': 55788.7, 'markPrice': 55750.89, 'unrealisedPnl': 18.03537, 'stopLoss': 0.0, 'takeProfit': 0.0}
2025-03-11 15:16:20,030 - order_service - INFO - 레버리지 차이가 작음(0) - 크기만 조정
2025-03-11 15:16:20,362 - exchange.bybit_client - INFO - USDT 잔고 - 총자산: $53,212.38, 가용잔고: $0.00, 사용중: $0.00
2025-03-11 15:16:20,362 - order_service - INFO - 가용 잔고: $0.0, 총 자산: $53212.38221098, 사용중: $0.0
2025-03-11 15:16:20,549 - order_service - INFO - 계산 입력값 - 총자산: $53212.38221098, 미실현손익: $0.0, 비율: 10%, 레버리지: 5배, 진입가: $55702.8
2025-03-11 15:16:20,549 - order_service - INFO - 순수 자산: $53212.38221098
2025-03-11 15:16:20,549 - order_service - INFO - 포지션 가치(USDT): $26606.19110549
2025-03-11 15:16:20,549 - order_service - INFO - 계산된 BTC 수량: 0.4776454882966386
2025-03-11 15:16:20,549 - order_service - INFO - 최종 BTC 수량(반올림): 0.478
2025-03-11 15:16:20,738 - order_service - INFO - 주문 상세 정보: {
  "symbol": "BTCUSDT",
  "side": "Sell",
  "leverage": 5,
  "position_size": 0.0010000000000000009,
  "entry_price": 55702.8,
  "stop_loss": 56000.0,
  "take_profit": 54500.0,
  "is_btc_unit": false,
  "is_reduce_only": false,
  "needs_sl_tp": true
}
2025-03-11 15:16:20,922 - exchange.bybit_client - INFO - USDT 잔고 - 총자산: $53,212.38, 가용잔고: $0.00, 사용중: $0.00
2025-03-11 15:16:20,922 - order_service - INFO - USDT 잔고 - 총자산: $53212.38221098, 가용잔고: $0.0, 사용중: $0.0
2025-03-11 15:16:20,922 - order_service - INFO - 주문 실행 시도: {'category': 'linear', 'symbol': 'BTCUSDT', 'side': 'Sell', 'orderType': 'Limit', 'qty': '0.001', 'price': '55702.8', 'timeInForce': 'GTC', 'positionIdx': 0, 'reduceOnly': False, 'stopLoss': '56000.0', 'takeProfit': '54500.0'}
2025-03-11 15:16:21,039 - exchange.bybit_client - INFO - 서버 시간 동기화 완료: server_time=1741673781000, local_time=1741673781039, offset=-39ms
2025-03-11 15:16:21,150 - order_service - INFO - === 주문 요청 및 응답 상세 ===
2025-03-11 15:16:21,150 - order_service - INFO - 요청 파라미터:
{
  "category": "linear",
  "symbol": "BTCUSDT",
  "side": "Sell",
  "orderType": "Limit",
  "qty": "0.001",
  "price": "55702.8",
  "timeInForce": "GTC",
  "positionIdx": 0,
  "reduceOnly": false,
  "stopLoss": "56000.0",
  "takeProfit": "54500.0"
}
2025-03-11 15:16:21,150 - order_service - INFO - API 응답:
{
  "retCode": 0,
  "retMsg": "OK",
  "result": {
    "orderId": "1e299d9b-b88d-46b0-be6f-731742768be6",
    "orderLinkId": ""
  },
  "retExtInfo": {},
  "time": 1741673781247
}
2025-03-11 15:16:22,157 - telegram_bot.monitors.auto_analyzer - INFO - 초기 분석 실행 완료
2025-03-11 15:18:56,124 - main - INFO - 환경변수 및 설정 초기화 중...
2025-03-11 15:18:56,124 - main - INFO - Bybit 테스트넷 클라이언트 초기화 중...
2025-03-11 15:18:56,360 - main - INFO - 서비스 초기화 중...
2025-03-11 15:18:56,360 - main - INFO - 마켓 데이터 서비스 중...
2025-03-11 15:18:58,485 - services.market_data_service - INFO - 마켓 데이터 로드 완료
2025-03-11 15:18:58,756 - telegram_bot.bot - INFO - 텔레그램 설정 로드:
2025-03-11 15:18:58,756 - telegram_bot.bot - INFO - - admin_chat_id: 583881676
2025-03-11 15:18:58,756 - telegram_bot.bot - INFO - - alert_chat_ids: [-1002464784986]
2025-03-11 15:18:59,190 - telegram_bot.monitors.auto_analyzer - INFO - AutoAnalyzer 초기화 시작
2025-03-11 15:18:59,191 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 설정 시작
2025-03-11 15:18:59,193 - telegram_bot.monitors.auto_analyzer - INFO - 다음 실행 예정 시간: 2025-03-11 16:00:00
2025-03-11 15:18:59,194 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-03-11 15:18:59,194 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 설정 완료
2025-03-11 15:18:59,194 - telegram_bot.bot - INFO - 봇 초기화 시작...
2025-03-11 15:18:59,195 - services.trade_history_service - INFO - === 포지션 정보 초기화 시작 ===
2025-03-11 15:18:59,195 - services.trade_history_service - INFO - 조회 기간: 2024-12-11 ~ 2025-03-11
2025-03-11 15:18:59,195 - services.trade_store - INFO - 날짜 범위 조회: 20241211 ~ 20250311
2025-03-11 15:18:59,196 - services.trade_store - INFO - 날짜: 20241211, 포지션 수: 1건
2025-03-11 15:18:59,196 - services.trade_store - INFO - 날짜: 20241212, 포지션 수: 1건
2025-03-11 15:18:59,197 - services.trade_store - INFO - 날짜: 20241213, 포지션 수: 2건
2025-03-11 15:18:59,197 - services.trade_store - INFO - 날짜: 20241214, 포지션 수: 2건
2025-03-11 15:18:59,198 - services.trade_store - INFO - 날짜: 20241215, 포지션 수: 0건
2025-03-11 15:18:59,198 - services.trade_store - INFO - 날짜: 20241216, 포지션 수: 0건
2025-03-11 15:18:59,198 - services.trade_store - INFO - 날짜: 20241217, 포지션 수: 10건
2025-03-11 15:18:59,198 - services.trade_store - INFO - 날짜: 20241218, 포지션 수: 5건
2025-03-11 15:18:59,199 - services.trade_store - INFO - 날짜: 20241219, 포지션 수: 1건
2025-03-11 15:18:59,199 - services.trade_store - INFO - 날짜: 20241220, 포지션 수: 31건
2025-03-11 15:18:59,200 - services.trade_store - INFO - 날짜: 20241221, 포지션 수: 3건
2025-03-11 15:18:59,200 - services.trade_store - INFO - 날짜: 20241222, 포지션 수: 10건
2025-03-11 15:18:59,202 - services.trade_store - INFO - 날짜: 20241223, 포지션 수: 7건
2025-03-11 15:18:59,202 - services.trade_store - INFO - 날짜: 20241224, 포지션 수: 11건
2025-03-11 15:18:59,202 - services.trade_store - INFO - 날짜: 20241225, 포지션 수: 2건
2025-03-11 15:18:59,203 - services.trade_store - INFO - 날짜: 20241226, 포지션 수: 7건
2025-03-11 15:18:59,203 - services.trade_store - INFO - 날짜: 20241227, 포지션 수: 7건
2025-03-11 15:18:59,204 - services.trade_store - INFO - 날짜: 20241228, 포지션 수: 4건
2025-03-11 15:18:59,204 - services.trade_store - INFO - 날짜: 20241229, 포지션 수: 0건
2025-03-11 15:18:59,205 - services.trade_store - INFO - 날짜: 20241230, 포지션 수: 15건
2025-03-11 15:18:59,206 - services.trade_store - INFO - 날짜: 20241231, 포지션 수: 8건
2025-03-11 15:18:59,206 - services.trade_store - INFO - 날짜: 20250101, 포지션 수: 0건
2025-03-11 15:18:59,207 - services.trade_store - INFO - 날짜: 20250102, 포지션 수: 0건
2025-03-11 15:18:59,207 - services.trade_store - INFO - 날짜: 20250103, 포지션 수: 0건
2025-03-11 15:18:59,207 - services.trade_store - INFO - 날짜: 20250104, 포지션 수: 0건
2025-03-11 15:18:59,207 - services.trade_store - INFO - 날짜: 20250105, 포지션 수: 0건
2025-03-11 15:18:59,207 - services.trade_store - INFO - 날짜: 20250106, 포지션 수: 0건
2025-03-11 15:18:59,207 - services.trade_store - INFO - 날짜: 20250107, 포지션 수: 0건
2025-03-11 15:18:59,208 - services.trade_store - INFO - 날짜: 20250108, 포지션 수: 0건
2025-03-11 15:18:59,208 - services.trade_store - INFO - 날짜: 20250109, 포지션 수: 0건
2025-03-11 15:18:59,208 - services.trade_store - INFO - 날짜: 20250110, 포지션 수: 0건
2025-03-11 15:18:59,208 - services.trade_store - INFO - 날짜: 20250111, 포지션 수: 0건
2025-03-11 15:18:59,208 - services.trade_store - INFO - 날짜: 20250112, 포지션 수: 0건
2025-03-11 15:18:59,208 - services.trade_store - INFO - 날짜: 20250113, 포지션 수: 0건
2025-03-11 15:18:59,208 - services.trade_store - INFO - 날짜: 20250114, 포지션 수: 0건
2025-03-11 15:18:59,208 - services.trade_store - INFO - 날짜: 20250115, 포지션 수: 0건
2025-03-11 15:18:59,208 - services.trade_store - INFO - 날짜: 20250116, 포지션 수: 0건
2025-03-11 15:18:59,209 - services.trade_store - INFO - 날짜: 20250117, 포지션 수: 0건
2025-03-11 15:18:59,209 - services.trade_store - INFO - 날짜: 20250118, 포지션 수: 0건
2025-03-11 15:18:59,209 - services.trade_store - INFO - 날짜: 20250119, 포지션 수: 0건
2025-03-11 15:18:59,209 - services.trade_store - INFO - 날짜: 20250120, 포지션 수: 0건
2025-03-11 15:18:59,209 - services.trade_store - INFO - 날짜: 20250121, 포지션 수: 0건
2025-03-11 15:18:59,209 - services.trade_store - INFO - 날짜: 20250122, 포지션 수: 0건
2025-03-11 15:18:59,209 - services.trade_store - INFO - 날짜: 20250123, 포지션 수: 0건
2025-03-11 15:18:59,209 - services.trade_store - INFO - 날짜: 20250124, 포지션 수: 0건
2025-03-11 15:18:59,209 - services.trade_store - INFO - 날짜: 20250125, 포지션 수: 0건
2025-03-11 15:18:59,210 - services.trade_store - INFO - 날짜: 20250126, 포지션 수: 0건
2025-03-11 15:18:59,211 - services.trade_store - INFO - 날짜: 20250127, 포지션 수: 0건
2025-03-11 15:18:59,211 - services.trade_store - INFO - 날짜: 20250128, 포지션 수: 0건
2025-03-11 15:18:59,212 - services.trade_store - INFO - 날짜: 20250129, 포지션 수: 0건
2025-03-11 15:18:59,212 - services.trade_store - INFO - 날짜: 20250130, 포지션 수: 0건
2025-03-11 15:18:59,212 - services.trade_store - INFO - 날짜: 20250131, 포지션 수: 0건
2025-03-11 15:18:59,212 - services.trade_store - INFO - 날짜: 20250201, 포지션 수: 0건
2025-03-11 15:18:59,212 - services.trade_store - INFO - 날짜: 20250202, 포지션 수: 0건
2025-03-11 15:18:59,214 - services.trade_store - INFO - 날짜: 20250203, 포지션 수: 0건
2025-03-11 15:18:59,214 - services.trade_store - INFO - 날짜: 20250204, 포지션 수: 0건
2025-03-11 15:18:59,214 - services.trade_store - INFO - 날짜: 20250205, 포지션 수: 0건
2025-03-11 15:18:59,214 - services.trade_store - INFO - 날짜: 20250206, 포지션 수: 0건
2025-03-11 15:18:59,214 - services.trade_store - INFO - 날짜: 20250207, 포지션 수: 0건
2025-03-11 15:18:59,215 - services.trade_store - INFO - 날짜: 20250208, 포지션 수: 0건
2025-03-11 15:18:59,215 - services.trade_store - INFO - 날짜: 20250209, 포지션 수: 0건
2025-03-11 15:18:59,215 - services.trade_store - INFO - 날짜: 20250210, 포지션 수: 0건
2025-03-11 15:18:59,216 - services.trade_store - INFO - 날짜: 20250211, 포지션 수: 0건
2025-03-11 15:18:59,216 - services.trade_store - INFO - 날짜: 20250212, 포지션 수: 0건
2025-03-11 15:18:59,217 - services.trade_store - INFO - 날짜: 20250213, 포지션 수: 0건
2025-03-11 15:18:59,218 - services.trade_store - INFO - 날짜: 20250214, 포지션 수: 2건
2025-03-11 15:18:59,219 - services.trade_store - INFO - 날짜: 20250215, 포지션 수: 2건
2025-03-11 15:18:59,219 - services.trade_store - INFO - 날짜: 20250216, 포지션 수: 0건
2025-03-11 15:18:59,219 - services.trade_store - INFO - 날짜: 20250217, 포지션 수: 2건
2025-03-11 15:18:59,220 - services.trade_store - INFO - 날짜: 20250218, 포지션 수: 0건
2025-03-11 15:18:59,220 - services.trade_store - INFO - 날짜: 20250219, 포지션 수: 0건
2025-03-11 15:18:59,220 - services.trade_store - INFO - 날짜: 20250220, 포지션 수: 0건
2025-03-11 15:18:59,220 - services.trade_store - INFO - 날짜: 20250221, 포지션 수: 2건
2025-03-11 15:18:59,220 - services.trade_store - INFO - 날짜: 20250222, 포지션 수: 0건
2025-03-11 15:18:59,220 - services.trade_store - INFO - 날짜: 20250223, 포지션 수: 0건
2025-03-11 15:18:59,221 - services.trade_store - INFO - 날짜: 20250224, 포지션 수: 0건
2025-03-11 15:18:59,221 - services.trade_store - INFO - 날짜: 20250225, 포지션 수: 0건
2025-03-11 15:18:59,221 - services.trade_store - INFO - 날짜: 20250226, 포지션 수: 0건
2025-03-11 15:18:59,221 - services.trade_store - INFO - 날짜: 20250227, 포지션 수: 0건
2025-03-11 15:18:59,221 - services.trade_store - INFO - 날짜: 20250228, 포지션 수: 0건
2025-03-11 15:18:59,221 - services.trade_store - INFO - 날짜: 20250301, 포지션 수: 0건
2025-03-11 15:18:59,222 - services.trade_store - INFO - 날짜: 20250302, 포지션 수: 0건
2025-03-11 15:18:59,222 - services.trade_store - INFO - 날짜: 20250303, 포지션 수: 0건
2025-03-11 15:18:59,222 - services.trade_store - INFO - 날짜: 20250304, 포지션 수: 0건
2025-03-11 15:18:59,222 - services.trade_store - INFO - 날짜: 20250305, 포지션 수: 0건
2025-03-11 15:18:59,223 - services.trade_store - INFO - 날짜: 20250306, 포지션 수: 0건
2025-03-11 15:18:59,223 - services.trade_store - INFO - 날짜: 20250307, 포지션 수: 0건
2025-03-11 15:18:59,224 - services.trade_store - INFO - 날짜: 20250308, 포지션 수: 0건
2025-03-11 15:18:59,224 - services.trade_store - INFO - 날짜: 20250309, 포지션 수: 0건
2025-03-11 15:18:59,224 - services.trade_store - INFO - 날짜: 20250310, 포지션 수: 0건
2025-03-11 15:18:59,224 - services.trade_store - INFO - 날짜: 20250311, 포지션 수: 0건
2025-03-11 15:18:59,224 - services.trade_store - INFO - 총 135건의 포지션 데이터 로드됨
2025-03-11 15:18:59,224 - services.trade_history_service - INFO - 기존 데이터: 135건
2025-03-11 15:18:59,224 - telegram_bot.bot - INFO - Application 빌드 시작...
2025-03-11 15:18:59,676 - telegram_bot.bot - INFO - 봇 초기화 완료, 시작 준비 중...
2025-03-11 15:18:59,676 - telegram_bot.bot - INFO - 봇 시작 시도...
2025-03-11 15:18:59,676 - telegram_bot.bot - INFO - === 봇 시작 시도 ===
2025-03-11 15:19:00,757 - apscheduler.scheduler - INFO - Scheduler started
2025-03-11 15:19:00,757 - telegram.ext.Application - INFO - Application started
2025-03-11 15:19:00,757 - telegram_bot.bot - INFO - 🤖 바이빗 트레이딩 봇이 시작되었습니다
2025-03-11 15:19:01,712 - telegram_bot.monitors.auto_analyzer - INFO - AutoAnalyzer 시작 요청됨
2025-03-11 15:19:01,712 - apscheduler.scheduler - INFO - Added job "AutoAnalyzer._scheduled_analysis" to job store "default"
2025-03-11 15:19:01,724 - apscheduler.scheduler - INFO - Scheduler started
2025-03-11 15:19:01,724 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 시작됨. 다음 실행 시간: 2025-03-11 16:00:00+09:00
2025-03-11 15:19:01,724 - telegram_bot.monitors.auto_analyzer - INFO - 초기 분석 실행 시작
2025-03-11 15:19:01,724 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄된 분석 시작 - 2025-03-11 15:19:01.724145
2025-03-11 15:19:01,724 - telegram_bot.monitors.auto_analyzer - INFO - 🔄' 1시간봉 분석 시작 (자동) ...
2025-03-11 15:19:01,724 - services.market_data_service - INFO - OHLCV 데이터 조회 시작 - 심볼: BTCUSDT, 시간대: 1h
2025-03-11 15:19:02,024 - ai.gpt_analyzer - INFO - 계산된 지표: ['open', 'high', 'low', 'close', 'volume', 'price_change_24h', 'volume_change_24h', 'rsi', 'macd', 'macd_signal', 'bb_upper', 'bb_middle', 'bb_lower', 'sma_10', 'sma_30', 'adx', 'di_plus', 'di_minus', 'trend', 'trend_strength', 'divergence_type', 'divergence_desc']
2025-03-11 15:19:02,024 - ai.gpt_analyzer - INFO - 시장 데이터: {'symbol': 'BTCUSDT', 'last_price': 55626.1, 'bid': 55463.6, 'ask': 55788.7, 'volume': 863367.201, 'timestamp': None}
2025-03-11 15:19:02,024 - ai.gpt_client - INFO - GPT API 호출 시작 (캐시 사용: False)
2025-03-11 15:19:02,028 - ai.gpt_client - INFO - 캐시 사용하지 않음 - 실제 API 호출
2025-03-11 15:19:04,781 - telegram_bot.formatters.storage_formatter - INFO - 1h 분석 결과 저장 완료: C:\Users\oasis\Aibybit_2\src\data\analysis\analysis_1h.json
2025-03-11 15:19:05,731 - telegram_bot.monitors.auto_analyzer - INFO - 분석 결과 position_suggestion: SELL
2025-03-11 15:19:05,731 - telegram_bot.monitors.auto_analyzer - INFO - 매매 신호 감지: SELL
2025-03-11 15:19:05,731 - order_service - INFO - 매매 신호 실행: {'position_suggestion': 'SELL', 'leverage': 5, 'position_size': 10, 'entry_price': 55626.1, 'stop_loss': 56000.0, 'take_profit1': 54600.0, 'take_profit2': 53600.0, 'reason': '하락 추세 및 부정적인 지표'}
2025-03-11 15:19:05,731 - order_service - INFO - 주문 시도: {'symbol': 'BTCUSDT', 'side': 'Sell', 'leverage': 5, 'position_size': 10, 'entry_price': 55626.1, 'stop_loss': 56000.0, 'take_profit': 54600.0, 'is_btc_unit': False}
2025-03-11 15:19:05,731 - order_service - INFO - 주문 상세 정보: {
  "symbol": "BTCUSDT",
  "side": "Sell",
  "leverage": 5,
  "position_size": 10,
  "entry_price": 55626.1,
  "stop_loss": 56000.0,
  "take_profit": 54600.0,
  "is_btc_unit": false
}
2025-03-11 15:19:05,731 - order_service - INFO - 주문 시도: {'symbol': 'BTCUSDT', 'side': 'Sell', 'leverage': 5, 'position_size': 10, 'entry_price': 55626.1, 'stop_loss': 56000.0, 'take_profit': 54600.0, 'is_btc_unit': False}
2025-03-11 15:19:06,181 - order_service - INFO - 현재 포지션: {'symbol': 'BTC/USDT:USDT', 'side': 'Short', 'size': 0.478, 'leverage': 5, 'entryPrice': 55788.52029289, 'markPrice': 55707.73, 'unrealisedPnl': 38.61776, 'stopLoss': 0.0, 'takeProfit': 0.0}
2025-03-11 15:19:06,181 - order_service - INFO - 레버리지 차이가 작음(0) - 크기만 조정
2025-03-11 15:19:06,363 - exchange.bybit_client - INFO - USDT 잔고 - 총자산: $53,212.37, 가용잔고: $0.00, 사용중: $0.00
2025-03-11 15:19:06,363 - order_service - INFO - 가용 잔고: $0.0, 총 자산: $53212.37107042, 사용중: $0.0
2025-03-11 15:19:06,547 - order_service - INFO - 계산 입력값 - 총자산: $53212.37107042, 미실현손익: $0.0, 비율: 10%, 레버리지: 5배, 진입가: $55626.1
2025-03-11 15:19:06,547 - order_service - INFO - 순수 자산: $53212.37107042
2025-03-11 15:19:06,547 - order_service - INFO - 포지션 가치(USDT): $26606.185535210003
2025-03-11 15:19:06,547 - order_service - INFO - 계산된 BTC 수량: 0.478303989228258
2025-03-11 15:19:06,547 - order_service - INFO - 최종 BTC 수량(반올림): 0.478
2025-03-11 15:19:06,734 - order_service - INFO - 주문 상세 정보: {
  "symbol": "BTCUSDT",
  "side": "Sell",
  "leverage": 5,
  "position_size": 0.0,
  "entry_price": 55626.1,
  "stop_loss": 56000.0,
  "take_profit": 54600.0,
  "is_btc_unit": false,
  "is_reduce_only": false,
  "needs_sl_tp": true
}
2025-03-11 15:19:06,929 - exchange.bybit_client - INFO - USDT 잔고 - 총자산: $53,212.37, 가용잔고: $0.00, 사용중: $0.00
2025-03-11 15:19:06,929 - order_service - INFO - USDT 잔고 - 총자산: $53212.37107042, 가용잔고: $0.0, 사용중: $0.0
2025-03-11 15:19:06,929 - order_service - INFO - 주문 실행 시도: {'category': 'linear', 'symbol': 'BTCUSDT', 'side': 'Sell', 'orderType': 'Limit', 'qty': '0.000', 'price': '55626.1', 'timeInForce': 'GTC', 'positionIdx': 0, 'reduceOnly': False, 'stopLoss': '56000.0', 'takeProfit': '54600.0'}
2025-03-11 15:19:07,048 - exchange.bybit_client - INFO - 서버 시간 동기화 완료: server_time=1741673947000, local_time=1741673947048, offset=-48ms
2025-03-11 15:19:07,184 - order_service - INFO - === 주문 요청 및 응답 상세 ===
2025-03-11 15:19:07,186 - order_service - INFO - 요청 파라미터:
{
  "category": "linear",
  "symbol": "BTCUSDT",
  "side": "Sell",
  "orderType": "Limit",
  "qty": "0.000",
  "price": "55626.1",
  "timeInForce": "GTC",
  "positionIdx": 0,
  "reduceOnly": false,
  "stopLoss": "56000.0",
  "takeProfit": "54600.0"
}
2025-03-11 15:19:07,186 - order_service - INFO - API 응답:
{
  "retCode": 10001,
  "retMsg": "The number of contracts exceeds minimum limit allowed",
  "result": {},
  "retExtInfo": {},
  "time": 1741673947272
}
2025-03-11 15:19:08,132 - telegram_bot.monitors.auto_analyzer - INFO - 초기 분석 실행 완료
2025-03-11 15:21:02,507 - main - INFO - 환경변수 및 설정 초기화 중...
2025-03-11 15:21:02,507 - main - INFO - Bybit 테스트넷 클라이언트 초기화 중...
2025-03-11 15:21:02,741 - main - INFO - 서비스 초기화 중...
2025-03-11 15:21:02,741 - main - INFO - 마켓 데이터 서비스 중...
2025-03-11 15:21:04,942 - services.market_data_service - INFO - 마켓 데이터 로드 완료
2025-03-11 15:21:05,186 - telegram_bot.bot - INFO - 텔레그램 설정 로드:
2025-03-11 15:21:05,186 - telegram_bot.bot - INFO - - admin_chat_id: 583881676
2025-03-11 15:21:05,186 - telegram_bot.bot - INFO - - alert_chat_ids: [-1002464784986]
2025-03-11 15:21:05,654 - telegram_bot.monitors.auto_analyzer - INFO - AutoAnalyzer 초기화 시작
2025-03-11 15:21:05,654 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 설정 시작
2025-03-11 15:21:05,654 - telegram_bot.monitors.auto_analyzer - INFO - 다음 실행 예정 시간: 2025-03-11 16:00:00
2025-03-11 15:21:05,654 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-03-11 15:21:05,654 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 설정 완료
2025-03-11 15:21:05,654 - telegram_bot.bot - INFO - 봇 초기화 시작...
2025-03-11 15:21:05,654 - services.trade_history_service - INFO - === 포지션 정보 초기화 시작 ===
2025-03-11 15:21:05,654 - services.trade_history_service - INFO - 조회 기간: 2024-12-11 ~ 2025-03-11
2025-03-11 15:21:05,663 - services.trade_store - INFO - 날짜 범위 조회: 20241211 ~ 20250311
2025-03-11 15:21:05,663 - services.trade_store - INFO - 날짜: 20241211, 포지션 수: 1건
2025-03-11 15:21:05,664 - services.trade_store - INFO - 날짜: 20241212, 포지션 수: 1건
2025-03-11 15:21:05,665 - services.trade_store - INFO - 날짜: 20241213, 포지션 수: 2건
2025-03-11 15:21:05,665 - services.trade_store - INFO - 날짜: 20241214, 포지션 수: 2건
2025-03-11 15:21:05,665 - services.trade_store - INFO - 날짜: 20241215, 포지션 수: 0건
2025-03-11 15:21:05,667 - services.trade_store - INFO - 날짜: 20241216, 포지션 수: 0건
2025-03-11 15:21:05,667 - services.trade_store - INFO - 날짜: 20241217, 포지션 수: 10건
2025-03-11 15:21:05,668 - services.trade_store - INFO - 날짜: 20241218, 포지션 수: 5건
2025-03-11 15:21:05,668 - services.trade_store - INFO - 날짜: 20241219, 포지션 수: 1건
2025-03-11 15:21:05,669 - services.trade_store - INFO - 날짜: 20241220, 포지션 수: 31건
2025-03-11 15:21:05,669 - services.trade_store - INFO - 날짜: 20241221, 포지션 수: 3건
2025-03-11 15:21:05,671 - services.trade_store - INFO - 날짜: 20241222, 포지션 수: 10건
2025-03-11 15:21:05,671 - services.trade_store - INFO - 날짜: 20241223, 포지션 수: 7건
2025-03-11 15:21:05,672 - services.trade_store - INFO - 날짜: 20241224, 포지션 수: 11건
2025-03-11 15:21:05,672 - services.trade_store - INFO - 날짜: 20241225, 포지션 수: 2건
2025-03-11 15:21:05,672 - services.trade_store - INFO - 날짜: 20241226, 포지션 수: 7건
2025-03-11 15:21:05,672 - services.trade_store - INFO - 날짜: 20241227, 포지션 수: 7건
2025-03-11 15:21:05,676 - services.trade_store - INFO - 날짜: 20241228, 포지션 수: 4건
2025-03-11 15:21:05,677 - services.trade_store - INFO - 날짜: 20241229, 포지션 수: 0건
2025-03-11 15:21:05,678 - services.trade_store - INFO - 날짜: 20241230, 포지션 수: 15건
2025-03-11 15:21:05,678 - services.trade_store - INFO - 날짜: 20241231, 포지션 수: 8건
2025-03-11 15:21:05,678 - services.trade_store - INFO - 날짜: 20250101, 포지션 수: 0건
2025-03-11 15:21:05,679 - services.trade_store - INFO - 날짜: 20250102, 포지션 수: 0건
2025-03-11 15:21:05,679 - services.trade_store - INFO - 날짜: 20250103, 포지션 수: 0건
2025-03-11 15:21:05,679 - services.trade_store - INFO - 날짜: 20250104, 포지션 수: 0건
2025-03-11 15:21:05,679 - services.trade_store - INFO - 날짜: 20250105, 포지션 수: 0건
2025-03-11 15:21:05,679 - services.trade_store - INFO - 날짜: 20250106, 포지션 수: 0건
2025-03-11 15:21:05,680 - services.trade_store - INFO - 날짜: 20250107, 포지션 수: 0건
2025-03-11 15:21:05,680 - services.trade_store - INFO - 날짜: 20250108, 포지션 수: 0건
2025-03-11 15:21:05,680 - services.trade_store - INFO - 날짜: 20250109, 포지션 수: 0건
2025-03-11 15:21:05,680 - services.trade_store - INFO - 날짜: 20250110, 포지션 수: 0건
2025-03-11 15:21:05,680 - services.trade_store - INFO - 날짜: 20250111, 포지션 수: 0건
2025-03-11 15:21:05,680 - services.trade_store - INFO - 날짜: 20250112, 포지션 수: 0건
2025-03-11 15:21:05,681 - services.trade_store - INFO - 날짜: 20250113, 포지션 수: 0건
2025-03-11 15:21:05,681 - services.trade_store - INFO - 날짜: 20250114, 포지션 수: 0건
2025-03-11 15:21:05,681 - services.trade_store - INFO - 날짜: 20250115, 포지션 수: 0건
2025-03-11 15:21:05,681 - services.trade_store - INFO - 날짜: 20250116, 포지션 수: 0건
2025-03-11 15:21:05,682 - services.trade_store - INFO - 날짜: 20250117, 포지션 수: 0건
2025-03-11 15:21:05,682 - services.trade_store - INFO - 날짜: 20250118, 포지션 수: 0건
2025-03-11 15:21:05,682 - services.trade_store - INFO - 날짜: 20250119, 포지션 수: 0건
2025-03-11 15:21:05,684 - services.trade_store - INFO - 날짜: 20250120, 포지션 수: 0건
2025-03-11 15:21:05,684 - services.trade_store - INFO - 날짜: 20250121, 포지션 수: 0건
2025-03-11 15:21:05,684 - services.trade_store - INFO - 날짜: 20250122, 포지션 수: 0건
2025-03-11 15:21:05,684 - services.trade_store - INFO - 날짜: 20250123, 포지션 수: 0건
2025-03-11 15:21:05,685 - services.trade_store - INFO - 날짜: 20250124, 포지션 수: 0건
2025-03-11 15:21:05,685 - services.trade_store - INFO - 날짜: 20250125, 포지션 수: 0건
2025-03-11 15:21:05,685 - services.trade_store - INFO - 날짜: 20250126, 포지션 수: 0건
2025-03-11 15:21:05,685 - services.trade_store - INFO - 날짜: 20250127, 포지션 수: 0건
2025-03-11 15:21:05,685 - services.trade_store - INFO - 날짜: 20250128, 포지션 수: 0건
2025-03-11 15:21:05,686 - services.trade_store - INFO - 날짜: 20250129, 포지션 수: 0건
2025-03-11 15:21:05,686 - services.trade_store - INFO - 날짜: 20250130, 포지션 수: 0건
2025-03-11 15:21:05,686 - services.trade_store - INFO - 날짜: 20250131, 포지션 수: 0건
2025-03-11 15:21:05,686 - services.trade_store - INFO - 날짜: 20250201, 포지션 수: 0건
2025-03-11 15:21:05,686 - services.trade_store - INFO - 날짜: 20250202, 포지션 수: 0건
2025-03-11 15:21:05,686 - services.trade_store - INFO - 날짜: 20250203, 포지션 수: 0건
2025-03-11 15:21:05,687 - services.trade_store - INFO - 날짜: 20250204, 포지션 수: 0건
2025-03-11 15:21:05,687 - services.trade_store - INFO - 날짜: 20250205, 포지션 수: 0건
2025-03-11 15:21:05,687 - services.trade_store - INFO - 날짜: 20250206, 포지션 수: 0건
2025-03-11 15:21:05,687 - services.trade_store - INFO - 날짜: 20250207, 포지션 수: 0건
2025-03-11 15:21:05,687 - services.trade_store - INFO - 날짜: 20250208, 포지션 수: 0건
2025-03-11 15:21:05,687 - services.trade_store - INFO - 날짜: 20250209, 포지션 수: 0건
2025-03-11 15:21:05,689 - services.trade_store - INFO - 날짜: 20250210, 포지션 수: 0건
2025-03-11 15:21:05,689 - services.trade_store - INFO - 날짜: 20250211, 포지션 수: 0건
2025-03-11 15:21:05,689 - services.trade_store - INFO - 날짜: 20250212, 포지션 수: 0건
2025-03-11 15:21:05,689 - services.trade_store - INFO - 날짜: 20250213, 포지션 수: 0건
2025-03-11 15:21:05,690 - services.trade_store - INFO - 날짜: 20250214, 포지션 수: 2건
2025-03-11 15:21:05,690 - services.trade_store - INFO - 날짜: 20250215, 포지션 수: 2건
2025-03-11 15:21:05,690 - services.trade_store - INFO - 날짜: 20250216, 포지션 수: 0건
2025-03-11 15:21:05,690 - services.trade_store - INFO - 날짜: 20250217, 포지션 수: 2건
2025-03-11 15:21:05,690 - services.trade_store - INFO - 날짜: 20250218, 포지션 수: 0건
2025-03-11 15:21:05,691 - services.trade_store - INFO - 날짜: 20250219, 포지션 수: 0건
2025-03-11 15:21:05,691 - services.trade_store - INFO - 날짜: 20250220, 포지션 수: 0건
2025-03-11 15:21:05,691 - services.trade_store - INFO - 날짜: 20250221, 포지션 수: 2건
2025-03-11 15:21:05,691 - services.trade_store - INFO - 날짜: 20250222, 포지션 수: 0건
2025-03-11 15:21:05,691 - services.trade_store - INFO - 날짜: 20250223, 포지션 수: 0건
2025-03-11 15:21:05,691 - services.trade_store - INFO - 날짜: 20250224, 포지션 수: 0건
2025-03-11 15:21:05,691 - services.trade_store - INFO - 날짜: 20250225, 포지션 수: 0건
2025-03-11 15:21:05,692 - services.trade_store - INFO - 날짜: 20250226, 포지션 수: 0건
2025-03-11 15:21:05,692 - services.trade_store - INFO - 날짜: 20250227, 포지션 수: 0건
2025-03-11 15:21:05,692 - services.trade_store - INFO - 날짜: 20250228, 포지션 수: 0건
2025-03-11 15:21:05,693 - services.trade_store - INFO - 날짜: 20250301, 포지션 수: 0건
2025-03-11 15:21:05,693 - services.trade_store - INFO - 날짜: 20250302, 포지션 수: 0건
2025-03-11 15:21:05,693 - services.trade_store - INFO - 날짜: 20250303, 포지션 수: 0건
2025-03-11 15:21:05,693 - services.trade_store - INFO - 날짜: 20250304, 포지션 수: 0건
2025-03-11 15:21:05,694 - services.trade_store - INFO - 날짜: 20250305, 포지션 수: 0건
2025-03-11 15:21:05,694 - services.trade_store - INFO - 날짜: 20250306, 포지션 수: 0건
2025-03-11 15:21:05,694 - services.trade_store - INFO - 날짜: 20250307, 포지션 수: 0건
2025-03-11 15:21:05,694 - services.trade_store - INFO - 날짜: 20250308, 포지션 수: 0건
2025-03-11 15:21:05,694 - services.trade_store - INFO - 날짜: 20250309, 포지션 수: 0건
2025-03-11 15:21:05,695 - services.trade_store - INFO - 날짜: 20250310, 포지션 수: 0건
2025-03-11 15:21:05,695 - services.trade_store - INFO - 날짜: 20250311, 포지션 수: 0건
2025-03-11 15:21:05,695 - services.trade_store - INFO - 총 135건의 포지션 데이터 로드됨
2025-03-11 15:21:05,695 - services.trade_history_service - INFO - 기존 데이터: 135건
2025-03-11 15:21:05,695 - telegram_bot.bot - INFO - Application 빌드 시작...
2025-03-11 15:21:06,175 - telegram_bot.bot - INFO - 봇 초기화 완료, 시작 준비 중...
2025-03-11 15:21:06,175 - telegram_bot.bot - INFO - 봇 시작 시도...
2025-03-11 15:21:06,175 - telegram_bot.bot - INFO - === 봇 시작 시도 ===
2025-03-11 15:21:07,359 - apscheduler.scheduler - INFO - Scheduler started
2025-03-11 15:21:07,359 - telegram.ext.Application - INFO - Application started
2025-03-11 15:21:07,359 - telegram_bot.bot - INFO - 🤖 바이빗 트레이딩 봇이 시작되었습니다
2025-03-11 15:21:08,397 - telegram_bot.monitors.auto_analyzer - INFO - AutoAnalyzer 시작 요청됨
2025-03-11 15:21:08,398 - apscheduler.scheduler - INFO - Added job "AutoAnalyzer._scheduled_analysis" to job store "default"
2025-03-11 15:21:08,399 - apscheduler.scheduler - INFO - Scheduler started
2025-03-11 15:21:08,399 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 시작됨. 다음 실행 시간: 2025-03-11 16:00:00+09:00
2025-03-11 15:21:08,400 - telegram_bot.monitors.auto_analyzer - INFO - 초기 분석 실행 시작
2025-03-11 15:21:08,400 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄된 분석 시작 - 2025-03-11 15:21:08.400945
2025-03-11 15:21:08,401 - telegram_bot.monitors.auto_analyzer - INFO - 🔄' 1시간봉 분석 시작 (자동) ...
2025-03-11 15:21:08,402 - services.market_data_service - INFO - OHLCV 데이터 조회 시작 - 심볼: BTCUSDT, 시간대: 1h
2025-03-11 15:21:08,688 - ai.gpt_analyzer - INFO - 계산된 지표: ['open', 'high', 'low', 'close', 'volume', 'price_change_24h', 'volume_change_24h', 'rsi', 'macd', 'macd_signal', 'bb_upper', 'bb_middle', 'bb_lower', 'sma_10', 'sma_30', 'adx', 'di_plus', 'di_minus', 'trend', 'trend_strength', 'divergence_type', 'divergence_desc']
2025-03-11 15:21:08,688 - ai.gpt_analyzer - INFO - 시장 데이터: {'symbol': 'BTCUSDT', 'last_price': 55788.7, 'bid': 55626.1, 'ask': 55800.0, 'volume': 863367.479, 'timestamp': None}
2025-03-11 15:21:08,695 - ai.gpt_client - INFO - GPT API 호출 시작 (캐시 사용: False)
2025-03-11 15:21:08,695 - ai.gpt_client - INFO - 캐시 사용하지 않음 - 실제 API 호출
2025-03-11 15:21:10,574 - telegram_bot.formatters.storage_formatter - INFO - 1h 분석 결과 저장 완료: C:\Users\oasis\Aibybit_2\src\data\analysis\analysis_1h.json
2025-03-11 15:21:11,680 - telegram_bot.monitors.auto_analyzer - INFO - 분석 결과 position_suggestion: SELL
2025-03-11 15:21:11,680 - telegram_bot.monitors.auto_analyzer - INFO - 매매 신호 감지: SELL
2025-03-11 15:21:11,680 - order_service - INFO - 매매 신호 실행: {'position_suggestion': 'SELL', 'leverage': 5, 'position_size': 10, 'entry_price': 55788.7, 'stop_loss': 56000.0, 'take_profit1': 55000.0, 'take_profit2': 54000.0, 'reason': '하락 추세 및 부정적인 지표'}
2025-03-11 15:21:11,681 - order_service - INFO - 주문 시도: {'symbol': 'BTCUSDT', 'side': 'Sell', 'leverage': 5, 'position_size': 10, 'entry_price': 55788.7, 'stop_loss': 56000.0, 'take_profit': 55000.0, 'is_btc_unit': False}
2025-03-11 15:21:11,681 - order_service - INFO - 주문 상세 정보: {
  "symbol": "BTCUSDT",
  "side": "Sell",
  "leverage": 5,
  "position_size": 10,
  "entry_price": 55788.7,
  "stop_loss": 56000.0,
  "take_profit": 55000.0,
  "is_btc_unit": false
}
2025-03-11 15:21:11,681 - order_service - INFO - 주문 시도: {'symbol': 'BTCUSDT', 'side': 'Sell', 'leverage': 5, 'position_size': 10, 'entry_price': 55788.7, 'stop_loss': 56000.0, 'take_profit': 55000.0, 'is_btc_unit': False}
2025-03-11 15:21:12,028 - order_service - INFO - 현재 포지션: {'symbol': 'BTC/USDT:USDT', 'side': 'Short', 'size': 0.478, 'leverage': 5, 'entryPrice': 55788.52029289, 'markPrice': 55788.7, 'unrealisedPnl': -0.0859, 'stopLoss': 0.0, 'takeProfit': 0.0}
2025-03-11 15:21:12,028 - order_service - INFO - 레버리지 차이가 작음(0) - 크기만 조정
2025-03-11 15:21:12,212 - exchange.bybit_client - INFO - USDT 잔고 - 총자산: $53,212.37, 가용잔고: $0.00, 사용중: $0.00
2025-03-11 15:21:12,224 - order_service - INFO - 가용 잔고: $0.0, 총 자산: $53212.37107042, 사용중: $0.0
2025-03-11 15:21:12,556 - order_service - INFO - 계산 입력값 - 총자산: $53212.37107042, 미실현손익: $0.0, 비율: 10%, 레버리지: 5배, 진입가: $55788.7
2025-03-11 15:21:12,556 - order_service - INFO - 순수 자산: $53212.37107042
2025-03-11 15:21:12,556 - order_service - INFO - 포지션 가치(USDT): $26606.185535210003
2025-03-11 15:21:12,556 - order_service - INFO - 계산된 BTC 수량: 0.47690993938216886
2025-03-11 15:21:12,556 - order_service - INFO - 최종 BTC 수량(반올림): 0.477
2025-03-11 15:21:12,727 - order_service - INFO - 주문 상세 정보: {
  "symbol": "BTCUSDT",
  "side": "Buy",
  "leverage": 5,
  "position_size": 0.0010000000000000009,
  "entry_price": 55788.7,
  "stop_loss": 56000.0,
  "take_profit": 55000.0,
  "is_btc_unit": false,
  "is_reduce_only": true,
  "needs_sl_tp": false
}
2025-03-11 15:21:12,913 - exchange.bybit_client - INFO - USDT 잔고 - 총자산: $53,212.37, 가용잔고: $0.00, 사용중: $0.00
2025-03-11 15:21:12,913 - order_service - INFO - USDT 잔고 - 총자산: $53212.37107042, 가용잔고: $0.0, 사용중: $0.0
2025-03-11 15:21:12,913 - order_service - INFO - 주문 실행 시도: {'category': 'linear', 'symbol': 'BTCUSDT', 'side': 'Buy', 'orderType': 'Limit', 'qty': '0.001', 'price': '55788.7', 'timeInForce': 'GTC', 'positionIdx': 0, 'reduceOnly': True}
2025-03-11 15:21:13,297 - exchange.bybit_client - INFO - 서버 시간 동기화 완료: server_time=1741674073000, local_time=1741674073297, offset=-297ms
2025-03-11 15:21:13,556 - order_service - INFO - === 주문 요청 및 응답 상세 ===
2025-03-11 15:21:13,556 - order_service - INFO - 요청 파라미터:
{
  "category": "linear",
  "symbol": "BTCUSDT",
  "side": "Buy",
  "orderType": "Limit",
  "qty": "0.001",
  "price": "55788.7",
  "timeInForce": "GTC",
  "positionIdx": 0,
  "reduceOnly": true
}
2025-03-11 15:21:13,556 - order_service - INFO - API 응답:
{
  "retCode": 0,
  "retMsg": "OK",
  "result": {
    "orderId": "ba341186-dfff-4dd8-a9a9-11b3d65ab1a9",
    "orderLinkId": ""
  },
  "retExtInfo": {},
  "time": 1741674073656
}
2025-03-11 15:21:14,650 - telegram_bot.monitors.auto_analyzer - INFO - 초기 분석 실행 완료
2025-03-11 15:27:06,311 - main - INFO - 환경변수 및 설정 초기화 중...
2025-03-11 15:27:06,311 - main - INFO - Bybit 테스트넷 클라이언트 초기화 중...
2025-03-11 15:27:06,561 - main - INFO - 서비스 초기화 중...
2025-03-11 15:27:06,561 - main - INFO - 마켓 데이터 서비스 중...
2025-03-11 15:27:08,527 - services.market_data_service - INFO - 마켓 데이터 로드 완료
2025-03-11 15:27:08,774 - telegram_bot.bot - INFO - 텔레그램 설정 로드:
2025-03-11 15:27:08,774 - telegram_bot.bot - INFO - - admin_chat_id: 583881676
2025-03-11 15:27:08,774 - telegram_bot.bot - INFO - - alert_chat_ids: [-1002464784986]
2025-03-11 15:27:09,231 - telegram_bot.monitors.auto_analyzer - INFO - AutoAnalyzer 초기화 시작
2025-03-11 15:27:09,232 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 설정 시작
2025-03-11 15:27:09,234 - telegram_bot.monitors.auto_analyzer - INFO - 다음 실행 예정 시간: 2025-03-11 16:00:00
2025-03-11 15:27:09,235 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-03-11 15:27:09,235 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 설정 완료
2025-03-11 15:27:09,236 - telegram_bot.bot - INFO - 봇 초기화 시작...
2025-03-11 15:27:09,236 - services.trade_history_service - INFO - === 포지션 정보 초기화 시작 ===
2025-03-11 15:27:09,236 - services.trade_history_service - INFO - 조회 기간: 2024-12-11 ~ 2025-03-11
2025-03-11 15:27:09,237 - services.trade_store - INFO - 날짜 범위 조회: 20241211 ~ 20250311
2025-03-11 15:27:09,237 - services.trade_store - INFO - 날짜: 20241211, 포지션 수: 1건
2025-03-11 15:27:09,238 - services.trade_store - INFO - 날짜: 20241212, 포지션 수: 1건
2025-03-11 15:27:09,238 - services.trade_store - INFO - 날짜: 20241213, 포지션 수: 2건
2025-03-11 15:27:09,239 - services.trade_store - INFO - 날짜: 20241214, 포지션 수: 2건
2025-03-11 15:27:09,239 - services.trade_store - INFO - 날짜: 20241215, 포지션 수: 0건
2025-03-11 15:27:09,239 - services.trade_store - INFO - 날짜: 20241216, 포지션 수: 0건
2025-03-11 15:27:09,240 - services.trade_store - INFO - 날짜: 20241217, 포지션 수: 10건
2025-03-11 15:27:09,240 - services.trade_store - INFO - 날짜: 20241218, 포지션 수: 5건
2025-03-11 15:27:09,240 - services.trade_store - INFO - 날짜: 20241219, 포지션 수: 1건
2025-03-11 15:27:09,241 - services.trade_store - INFO - 날짜: 20241220, 포지션 수: 31건
2025-03-11 15:27:09,241 - services.trade_store - INFO - 날짜: 20241221, 포지션 수: 3건
2025-03-11 15:27:09,241 - services.trade_store - INFO - 날짜: 20241222, 포지션 수: 10건
2025-03-11 15:27:09,242 - services.trade_store - INFO - 날짜: 20241223, 포지션 수: 7건
2025-03-11 15:27:09,242 - services.trade_store - INFO - 날짜: 20241224, 포지션 수: 11건
2025-03-11 15:27:09,242 - services.trade_store - INFO - 날짜: 20241225, 포지션 수: 2건
2025-03-11 15:27:09,244 - services.trade_store - INFO - 날짜: 20241226, 포지션 수: 7건
2025-03-11 15:27:09,245 - services.trade_store - INFO - 날짜: 20241227, 포지션 수: 7건
2025-03-11 15:27:09,245 - services.trade_store - INFO - 날짜: 20241228, 포지션 수: 4건
2025-03-11 15:27:09,245 - services.trade_store - INFO - 날짜: 20241229, 포지션 수: 0건
2025-03-11 15:27:09,247 - services.trade_store - INFO - 날짜: 20241230, 포지션 수: 15건
2025-03-11 15:27:09,247 - services.trade_store - INFO - 날짜: 20241231, 포지션 수: 8건
2025-03-11 15:27:09,247 - services.trade_store - INFO - 날짜: 20250101, 포지션 수: 0건
2025-03-11 15:27:09,247 - services.trade_store - INFO - 날짜: 20250102, 포지션 수: 0건
2025-03-11 15:27:09,247 - services.trade_store - INFO - 날짜: 20250103, 포지션 수: 0건
2025-03-11 15:27:09,247 - services.trade_store - INFO - 날짜: 20250104, 포지션 수: 0건
2025-03-11 15:27:09,248 - services.trade_store - INFO - 날짜: 20250105, 포지션 수: 0건
2025-03-11 15:27:09,248 - services.trade_store - INFO - 날짜: 20250106, 포지션 수: 0건
2025-03-11 15:27:09,248 - services.trade_store - INFO - 날짜: 20250107, 포지션 수: 0건
2025-03-11 15:27:09,248 - services.trade_store - INFO - 날짜: 20250108, 포지션 수: 0건
2025-03-11 15:27:09,248 - services.trade_store - INFO - 날짜: 20250109, 포지션 수: 0건
2025-03-11 15:27:09,249 - services.trade_store - INFO - 날짜: 20250110, 포지션 수: 0건
2025-03-11 15:27:09,249 - services.trade_store - INFO - 날짜: 20250111, 포지션 수: 0건
2025-03-11 15:27:09,249 - services.trade_store - INFO - 날짜: 20250112, 포지션 수: 0건
2025-03-11 15:27:09,249 - services.trade_store - INFO - 날짜: 20250113, 포지션 수: 0건
2025-03-11 15:27:09,249 - services.trade_store - INFO - 날짜: 20250114, 포지션 수: 0건
2025-03-11 15:27:09,249 - services.trade_store - INFO - 날짜: 20250115, 포지션 수: 0건
2025-03-11 15:27:09,249 - services.trade_store - INFO - 날짜: 20250116, 포지션 수: 0건
2025-03-11 15:27:09,250 - services.trade_store - INFO - 날짜: 20250117, 포지션 수: 0건
2025-03-11 15:27:09,250 - services.trade_store - INFO - 날짜: 20250118, 포지션 수: 0건
2025-03-11 15:27:09,250 - services.trade_store - INFO - 날짜: 20250119, 포지션 수: 0건
2025-03-11 15:27:09,250 - services.trade_store - INFO - 날짜: 20250120, 포지션 수: 0건
2025-03-11 15:27:09,250 - services.trade_store - INFO - 날짜: 20250121, 포지션 수: 0건
2025-03-11 15:27:09,250 - services.trade_store - INFO - 날짜: 20250122, 포지션 수: 0건
2025-03-11 15:27:09,251 - services.trade_store - INFO - 날짜: 20250123, 포지션 수: 0건
2025-03-11 15:27:09,251 - services.trade_store - INFO - 날짜: 20250124, 포지션 수: 0건
2025-03-11 15:27:09,251 - services.trade_store - INFO - 날짜: 20250125, 포지션 수: 0건
2025-03-11 15:27:09,251 - services.trade_store - INFO - 날짜: 20250126, 포지션 수: 0건
2025-03-11 15:27:09,251 - services.trade_store - INFO - 날짜: 20250127, 포지션 수: 0건
2025-03-11 15:27:09,251 - services.trade_store - INFO - 날짜: 20250128, 포지션 수: 0건
2025-03-11 15:27:09,251 - services.trade_store - INFO - 날짜: 20250129, 포지션 수: 0건
2025-03-11 15:27:09,252 - services.trade_store - INFO - 날짜: 20250130, 포지션 수: 0건
2025-03-11 15:27:09,252 - services.trade_store - INFO - 날짜: 20250131, 포지션 수: 0건
2025-03-11 15:27:09,252 - services.trade_store - INFO - 날짜: 20250201, 포지션 수: 0건
2025-03-11 15:27:09,253 - services.trade_store - INFO - 날짜: 20250202, 포지션 수: 0건
2025-03-11 15:27:09,253 - services.trade_store - INFO - 날짜: 20250203, 포지션 수: 0건
2025-03-11 15:27:09,253 - services.trade_store - INFO - 날짜: 20250204, 포지션 수: 0건
2025-03-11 15:27:09,253 - services.trade_store - INFO - 날짜: 20250205, 포지션 수: 0건
2025-03-11 15:27:09,253 - services.trade_store - INFO - 날짜: 20250206, 포지션 수: 0건
2025-03-11 15:27:09,253 - services.trade_store - INFO - 날짜: 20250207, 포지션 수: 0건
2025-03-11 15:27:09,254 - services.trade_store - INFO - 날짜: 20250208, 포지션 수: 0건
2025-03-11 15:27:09,254 - services.trade_store - INFO - 날짜: 20250209, 포지션 수: 0건
2025-03-11 15:27:09,254 - services.trade_store - INFO - 날짜: 20250210, 포지션 수: 0건
2025-03-11 15:27:09,254 - services.trade_store - INFO - 날짜: 20250211, 포지션 수: 0건
2025-03-11 15:27:09,254 - services.trade_store - INFO - 날짜: 20250212, 포지션 수: 0건
2025-03-11 15:27:09,255 - services.trade_store - INFO - 날짜: 20250213, 포지션 수: 0건
2025-03-11 15:27:09,255 - services.trade_store - INFO - 날짜: 20250214, 포지션 수: 2건
2025-03-11 15:27:09,255 - services.trade_store - INFO - 날짜: 20250215, 포지션 수: 2건
2025-03-11 15:27:09,257 - services.trade_store - INFO - 날짜: 20250216, 포지션 수: 0건
2025-03-11 15:27:09,257 - services.trade_store - INFO - 날짜: 20250217, 포지션 수: 2건
2025-03-11 15:27:09,257 - services.trade_store - INFO - 날짜: 20250218, 포지션 수: 0건
2025-03-11 15:27:09,257 - services.trade_store - INFO - 날짜: 20250219, 포지션 수: 0건
2025-03-11 15:27:09,257 - services.trade_store - INFO - 날짜: 20250220, 포지션 수: 0건
2025-03-11 15:27:09,257 - services.trade_store - INFO - 날짜: 20250221, 포지션 수: 2건
2025-03-11 15:27:09,257 - services.trade_store - INFO - 날짜: 20250222, 포지션 수: 0건
2025-03-11 15:27:09,258 - services.trade_store - INFO - 날짜: 20250223, 포지션 수: 0건
2025-03-11 15:27:09,258 - services.trade_store - INFO - 날짜: 20250224, 포지션 수: 0건
2025-03-11 15:27:09,258 - services.trade_store - INFO - 날짜: 20250225, 포지션 수: 0건
2025-03-11 15:27:09,258 - services.trade_store - INFO - 날짜: 20250226, 포지션 수: 0건
2025-03-11 15:27:09,258 - services.trade_store - INFO - 날짜: 20250227, 포지션 수: 0건
2025-03-11 15:27:09,258 - services.trade_store - INFO - 날짜: 20250228, 포지션 수: 0건
2025-03-11 15:27:09,258 - services.trade_store - INFO - 날짜: 20250301, 포지션 수: 0건
2025-03-11 15:27:09,259 - services.trade_store - INFO - 날짜: 20250302, 포지션 수: 0건
2025-03-11 15:27:09,259 - services.trade_store - INFO - 날짜: 20250303, 포지션 수: 0건
2025-03-11 15:27:09,259 - services.trade_store - INFO - 날짜: 20250304, 포지션 수: 0건
2025-03-11 15:27:09,259 - services.trade_store - INFO - 날짜: 20250305, 포지션 수: 0건
2025-03-11 15:27:09,259 - services.trade_store - INFO - 날짜: 20250306, 포지션 수: 0건
2025-03-11 15:27:09,259 - services.trade_store - INFO - 날짜: 20250307, 포지션 수: 0건
2025-03-11 15:27:09,259 - services.trade_store - INFO - 날짜: 20250308, 포지션 수: 0건
2025-03-11 15:27:09,259 - services.trade_store - INFO - 날짜: 20250309, 포지션 수: 0건
2025-03-11 15:27:09,259 - services.trade_store - INFO - 날짜: 20250310, 포지션 수: 0건
2025-03-11 15:27:09,259 - services.trade_store - INFO - 날짜: 20250311, 포지션 수: 0건
2025-03-11 15:27:09,259 - services.trade_store - INFO - 총 135건의 포지션 데이터 로드됨
2025-03-11 15:27:09,259 - services.trade_history_service - INFO - 기존 데이터: 135건
2025-03-11 15:27:09,259 - telegram_bot.bot - INFO - Application 빌드 시작...
2025-03-11 15:27:09,717 - telegram_bot.bot - INFO - 봇 초기화 완료, 시작 준비 중...
2025-03-11 15:27:09,718 - telegram_bot.bot - INFO - 봇 시작 시도...
2025-03-11 15:27:09,718 - telegram_bot.bot - INFO - === 봇 시작 시도 ===
2025-03-11 15:27:10,802 - apscheduler.scheduler - INFO - Scheduler started
2025-03-11 15:27:10,802 - telegram.ext.Application - INFO - Application started
2025-03-11 15:27:10,803 - telegram_bot.bot - INFO - 🤖 바이빗 트레이딩 봇이 시작되었습니다
2025-03-11 15:27:11,756 - telegram_bot.monitors.auto_analyzer - INFO - AutoAnalyzer 시작 요청됨
2025-03-11 15:27:11,757 - apscheduler.scheduler - INFO - Added job "AutoAnalyzer._scheduled_analysis" to job store "default"
2025-03-11 15:27:11,758 - apscheduler.scheduler - INFO - Scheduler started
2025-03-11 15:27:11,758 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 시작됨. 다음 실행 시간: 2025-03-11 16:00:00+09:00
2025-03-11 15:27:11,759 - telegram_bot.monitors.auto_analyzer - INFO - 초기 분석 실행 시작
2025-03-11 15:27:11,759 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄된 분석 시작 - 2025-03-11 15:27:11.759987
2025-03-11 15:27:11,759 - telegram_bot.monitors.auto_analyzer - INFO - 🔄' 1시간봉 분석 시작 (자동) ...
2025-03-11 15:27:11,761 - services.market_data_service - INFO - OHLCV 데이터 조회 시작 - 심볼: BTCUSDT, 시간대: 1h
2025-03-11 15:27:12,032 - ai.gpt_analyzer - INFO - 계산된 지표: ['open', 'high', 'low', 'close', 'volume', 'price_change_24h', 'volume_change_24h', 'rsi', 'macd', 'macd_signal', 'bb_upper', 'bb_middle', 'bb_lower', 'sma_10', 'sma_30', 'adx', 'di_plus', 'di_minus', 'trend', 'trend_strength', 'divergence_type', 'divergence_desc']
2025-03-11 15:27:12,032 - ai.gpt_analyzer - INFO - 시장 데이터: {'symbol': 'BTCUSDT', 'last_price': 55888.1, 'bid': 55710.0, 'ask': 55888.1, 'volume': 863368.071, 'timestamp': None}
2025-03-11 15:27:12,047 - ai.gpt_client - INFO - GPT API 호출 시작 (캐시 사용: False)
2025-03-11 15:27:12,047 - ai.gpt_client - INFO - 캐시 사용하지 않음 - 실제 API 호출
2025-03-11 15:27:14,208 - telegram_bot.formatters.storage_formatter - INFO - 1h 분석 결과 저장 완료: C:\Users\oasis\Aibybit_2\src\data\analysis\analysis_1h.json
2025-03-11 15:27:15,176 - telegram_bot.monitors.auto_analyzer - INFO - 분석 결과 position_suggestion: SELL
2025-03-11 15:27:15,176 - telegram_bot.monitors.auto_analyzer - INFO - 매매 신호 감지: SELL
2025-03-11 15:27:15,176 - order_service - INFO - 매매 신호 실행: {'position_suggestion': 'SELL', 'leverage': 5, 'position_size': 10, 'entry_price': 55888.1, 'stop_loss': 56000.0, 'take_profit1': 55000.0, 'take_profit2': 54000.0, 'reason': '하락 추세 및 부정적인 지표'}
2025-03-11 15:27:15,191 - order_service - INFO - 주문 시도: {'symbol': 'BTCUSDT', 'side': 'Sell', 'leverage': 5, 'position_size': 10, 'entry_price': 55888.1, 'stop_loss': 56000.0, 'take_profit': 55000.0, 'is_btc_unit': False}
2025-03-11 15:27:15,191 - order_service - INFO - 주문 상세 정보: {
  "symbol": "BTCUSDT",
  "side": "Sell",
  "leverage": 5,
  "position_size": 10,
  "entry_price": 55888.1,
  "stop_loss": 56000.0,
  "take_profit": 55000.0,
  "is_btc_unit": false
}
2025-03-11 15:27:15,191 - order_service - INFO - 주문 시도: {'symbol': 'BTCUSDT', 'side': 'Sell', 'leverage': 5, 'position_size': 10, 'entry_price': 55888.1, 'stop_loss': 56000.0, 'take_profit': 55000.0, 'is_btc_unit': False}
2025-03-11 15:27:15,549 - order_service - INFO - 현재 포지션: {'symbol': 'BTC/USDT:USDT', 'side': 'Short', 'size': 0.477, 'leverage': 5, 'entryPrice': 55788.52029289, 'markPrice': 55888.1, 'unrealisedPnl': -47.49952029, 'stopLoss': 0.0, 'takeProfit': 0.0}
2025-03-11 15:27:15,549 - order_service - INFO - 레버리지 차이가 작음(0) - 크기만 조정
2025-03-11 15:27:15,730 - exchange.bybit_client - INFO - USDT 잔고 - 총자산: $53,212.36, 가용잔고: $0.00, 사용중: $0.00
2025-03-11 15:27:15,730 - order_service - INFO - 가용 잔고: $0.0, 총 자산: $53212.35973297, 사용중: $0.0
2025-03-11 15:27:15,916 - order_service - INFO - 계산 입력값 - 총자산: $53212.35973297, 미실현손익: $0.0, 비율: 10%, 레버리지: 5배, 진입가: $55888.1
2025-03-11 15:27:15,916 - order_service - INFO - 순수 자산: $53212.35973297
2025-03-11 15:27:15,916 - order_service - INFO - 포지션 가치(USDT): $26606.179866485
2025-03-11 15:27:15,916 - order_service - INFO - 계산된 BTC 수량: 0.47606162790441975
2025-03-11 15:27:15,918 - order_service - INFO - 최종 BTC 수량(반올림): 0.476
2025-03-11 15:27:16,100 - order_service - INFO - 주문 상세 정보: {
  "symbol": "BTCUSDT",
  "side": "Buy",
  "leverage": 5,
  "position_size": 0.0010000000000000009,
  "entry_price": 55888.1,
  "stop_loss": 56000.0,
  "take_profit": 55000.0,
  "is_btc_unit": false,
  "is_reduce_only": true,
  "needs_sl_tp": false
}
2025-03-11 15:27:16,281 - exchange.bybit_client - INFO - USDT 잔고 - 총자산: $53,212.36, 가용잔고: $0.00, 사용중: $0.00
2025-03-11 15:27:16,281 - order_service - INFO - USDT 잔고 - 총자산: $53212.35973297, 가용잔고: $0.0, 사용중: $0.0
2025-03-11 15:27:16,281 - order_service - INFO - 주문 실행 시도: {'category': 'linear', 'symbol': 'BTCUSDT', 'side': 'Buy', 'orderType': 'Limit', 'qty': '0.001', 'price': '55888.1', 'timeInForce': 'GTC', 'positionIdx': 0, 'reduceOnly': True}
2025-03-11 15:27:16,534 - exchange.bybit_client - INFO - 서버 시간 동기화 완료: server_time=1741674436000, local_time=1741674436534, offset=-534ms
2025-03-11 15:27:16,665 - order_service - INFO - === 주문 요청 및 응답 상세 ===
2025-03-11 15:27:16,665 - order_service - INFO - 요청 파라미터:
{
  "category": "linear",
  "symbol": "BTCUSDT",
  "side": "Buy",
  "orderType": "Limit",
  "qty": "0.001",
  "price": "55888.1",
  "timeInForce": "GTC",
  "positionIdx": 0,
  "reduceOnly": true
}
2025-03-11 15:27:16,665 - order_service - INFO - API 응답:
{
  "retCode": 0,
  "retMsg": "OK",
  "result": {
    "orderId": "7e138408-1931-4c3d-b49e-3be7663c1427",
    "orderLinkId": ""
  },
  "retExtInfo": {},
  "time": 1741674436754
}
2025-03-11 15:27:17,622 - telegram_bot.monitors.auto_analyzer - INFO - 초기 분석 실행 완료
2025-03-11 15:31:38,615 - main - INFO - 환경변수 및 설정 초기화 중...
2025-03-11 15:31:38,615 - main - INFO - Bybit 테스트넷 클라이언트 초기화 중...
2025-03-11 15:31:38,845 - main - INFO - 서비스 초기화 중...
2025-03-11 15:31:38,846 - main - INFO - 마켓 데이터 서비스 중...
2025-03-11 15:31:40,598 - services.market_data_service - INFO - 마켓 데이터 로드 완료
2025-03-11 15:31:40,860 - telegram_bot.bot - INFO - 텔레그램 설정 로드:
2025-03-11 15:31:40,861 - telegram_bot.bot - INFO - - admin_chat_id: 583881676
2025-03-11 15:31:40,861 - telegram_bot.bot - INFO - - alert_chat_ids: [-1002464784986]
2025-03-11 15:31:41,372 - telegram_bot.monitors.auto_analyzer - INFO - AutoAnalyzer 초기화 시작
2025-03-11 15:31:41,372 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 설정 시작
2025-03-11 15:31:41,373 - telegram_bot.monitors.auto_analyzer - INFO - 다음 실행 예정 시간: 2025-03-11 16:00:00
2025-03-11 15:31:41,373 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-03-11 15:31:41,373 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 설정 완료
2025-03-11 15:31:41,373 - telegram_bot.bot - INFO - 봇 초기화 시작...
2025-03-11 15:31:41,373 - services.trade_history_service - INFO - === 포지션 정보 초기화 시작 ===
2025-03-11 15:31:41,373 - services.trade_history_service - INFO - 조회 기간: 2024-12-11 ~ 2025-03-11
2025-03-11 15:31:41,373 - services.trade_store - INFO - 날짜 범위 조회: 20241211 ~ 20250311
2025-03-11 15:31:41,373 - services.trade_store - INFO - 날짜: 20241211, 포지션 수: 1건
2025-03-11 15:31:41,378 - services.trade_store - INFO - 날짜: 20241212, 포지션 수: 1건
2025-03-11 15:31:41,378 - services.trade_store - INFO - 날짜: 20241213, 포지션 수: 2건
2025-03-11 15:31:41,379 - services.trade_store - INFO - 날짜: 20241214, 포지션 수: 2건
2025-03-11 15:31:41,379 - services.trade_store - INFO - 날짜: 20241215, 포지션 수: 0건
2025-03-11 15:31:41,379 - services.trade_store - INFO - 날짜: 20241216, 포지션 수: 0건
2025-03-11 15:31:41,379 - services.trade_store - INFO - 날짜: 20241217, 포지션 수: 10건
2025-03-11 15:31:41,380 - services.trade_store - INFO - 날짜: 20241218, 포지션 수: 5건
2025-03-11 15:31:41,380 - services.trade_store - INFO - 날짜: 20241219, 포지션 수: 1건
2025-03-11 15:31:41,381 - services.trade_store - INFO - 날짜: 20241220, 포지션 수: 31건
2025-03-11 15:31:41,381 - services.trade_store - INFO - 날짜: 20241221, 포지션 수: 3건
2025-03-11 15:31:41,381 - services.trade_store - INFO - 날짜: 20241222, 포지션 수: 10건
2025-03-11 15:31:41,382 - services.trade_store - INFO - 날짜: 20241223, 포지션 수: 7건
2025-03-11 15:31:41,383 - services.trade_store - INFO - 날짜: 20241224, 포지션 수: 11건
2025-03-11 15:31:41,383 - services.trade_store - INFO - 날짜: 20241225, 포지션 수: 2건
2025-03-11 15:31:41,384 - services.trade_store - INFO - 날짜: 20241226, 포지션 수: 7건
2025-03-11 15:31:41,385 - services.trade_store - INFO - 날짜: 20241227, 포지션 수: 7건
2025-03-11 15:31:41,387 - services.trade_store - INFO - 날짜: 20241228, 포지션 수: 4건
2025-03-11 15:31:41,387 - services.trade_store - INFO - 날짜: 20241229, 포지션 수: 0건
2025-03-11 15:31:41,388 - services.trade_store - INFO - 날짜: 20241230, 포지션 수: 15건
2025-03-11 15:31:41,388 - services.trade_store - INFO - 날짜: 20241231, 포지션 수: 8건
2025-03-11 15:31:41,388 - services.trade_store - INFO - 날짜: 20250101, 포지션 수: 0건
2025-03-11 15:31:41,389 - services.trade_store - INFO - 날짜: 20250102, 포지션 수: 0건
2025-03-11 15:31:41,389 - services.trade_store - INFO - 날짜: 20250103, 포지션 수: 0건
2025-03-11 15:31:41,389 - services.trade_store - INFO - 날짜: 20250104, 포지션 수: 0건
2025-03-11 15:31:41,389 - services.trade_store - INFO - 날짜: 20250105, 포지션 수: 0건
2025-03-11 15:31:41,389 - services.trade_store - INFO - 날짜: 20250106, 포지션 수: 0건
2025-03-11 15:31:41,389 - services.trade_store - INFO - 날짜: 20250107, 포지션 수: 0건
2025-03-11 15:31:41,390 - services.trade_store - INFO - 날짜: 20250108, 포지션 수: 0건
2025-03-11 15:31:41,390 - services.trade_store - INFO - 날짜: 20250109, 포지션 수: 0건
2025-03-11 15:31:41,390 - services.trade_store - INFO - 날짜: 20250110, 포지션 수: 0건
2025-03-11 15:31:41,390 - services.trade_store - INFO - 날짜: 20250111, 포지션 수: 0건
2025-03-11 15:31:41,390 - services.trade_store - INFO - 날짜: 20250112, 포지션 수: 0건
2025-03-11 15:31:41,390 - services.trade_store - INFO - 날짜: 20250113, 포지션 수: 0건
2025-03-11 15:31:41,390 - services.trade_store - INFO - 날짜: 20250114, 포지션 수: 0건
2025-03-11 15:31:41,390 - services.trade_store - INFO - 날짜: 20250115, 포지션 수: 0건
2025-03-11 15:31:41,391 - services.trade_store - INFO - 날짜: 20250116, 포지션 수: 0건
2025-03-11 15:31:41,391 - services.trade_store - INFO - 날짜: 20250117, 포지션 수: 0건
2025-03-11 15:31:41,391 - services.trade_store - INFO - 날짜: 20250118, 포지션 수: 0건
2025-03-11 15:31:41,391 - services.trade_store - INFO - 날짜: 20250119, 포지션 수: 0건
2025-03-11 15:31:41,391 - services.trade_store - INFO - 날짜: 20250120, 포지션 수: 0건
2025-03-11 15:31:41,392 - services.trade_store - INFO - 날짜: 20250121, 포지션 수: 0건
2025-03-11 15:31:41,392 - services.trade_store - INFO - 날짜: 20250122, 포지션 수: 0건
2025-03-11 15:31:41,392 - services.trade_store - INFO - 날짜: 20250123, 포지션 수: 0건
2025-03-11 15:31:41,393 - services.trade_store - INFO - 날짜: 20250124, 포지션 수: 0건
2025-03-11 15:31:41,393 - services.trade_store - INFO - 날짜: 20250125, 포지션 수: 0건
2025-03-11 15:31:41,393 - services.trade_store - INFO - 날짜: 20250126, 포지션 수: 0건
2025-03-11 15:31:41,394 - services.trade_store - INFO - 날짜: 20250127, 포지션 수: 0건
2025-03-11 15:31:41,394 - services.trade_store - INFO - 날짜: 20250128, 포지션 수: 0건
2025-03-11 15:31:41,394 - services.trade_store - INFO - 날짜: 20250129, 포지션 수: 0건
2025-03-11 15:31:41,394 - services.trade_store - INFO - 날짜: 20250130, 포지션 수: 0건
2025-03-11 15:31:41,394 - services.trade_store - INFO - 날짜: 20250131, 포지션 수: 0건
2025-03-11 15:31:41,395 - services.trade_store - INFO - 날짜: 20250201, 포지션 수: 0건
2025-03-11 15:31:41,395 - services.trade_store - INFO - 날짜: 20250202, 포지션 수: 0건
2025-03-11 15:31:41,395 - services.trade_store - INFO - 날짜: 20250203, 포지션 수: 0건
2025-03-11 15:31:41,395 - services.trade_store - INFO - 날짜: 20250204, 포지션 수: 0건
2025-03-11 15:31:41,395 - services.trade_store - INFO - 날짜: 20250205, 포지션 수: 0건
2025-03-11 15:31:41,396 - services.trade_store - INFO - 날짜: 20250206, 포지션 수: 0건
2025-03-11 15:31:41,396 - services.trade_store - INFO - 날짜: 20250207, 포지션 수: 0건
2025-03-11 15:31:41,396 - services.trade_store - INFO - 날짜: 20250208, 포지션 수: 0건
2025-03-11 15:31:41,396 - services.trade_store - INFO - 날짜: 20250209, 포지션 수: 0건
2025-03-11 15:31:41,396 - services.trade_store - INFO - 날짜: 20250210, 포지션 수: 0건
2025-03-11 15:31:41,396 - services.trade_store - INFO - 날짜: 20250211, 포지션 수: 0건
2025-03-11 15:31:41,396 - services.trade_store - INFO - 날짜: 20250212, 포지션 수: 0건
2025-03-11 15:31:41,396 - services.trade_store - INFO - 날짜: 20250213, 포지션 수: 0건
2025-03-11 15:31:41,397 - services.trade_store - INFO - 날짜: 20250214, 포지션 수: 2건
2025-03-11 15:31:41,397 - services.trade_store - INFO - 날짜: 20250215, 포지션 수: 2건
2025-03-11 15:31:41,397 - services.trade_store - INFO - 날짜: 20250216, 포지션 수: 0건
2025-03-11 15:31:41,397 - services.trade_store - INFO - 날짜: 20250217, 포지션 수: 2건
2025-03-11 15:31:41,397 - services.trade_store - INFO - 날짜: 20250218, 포지션 수: 0건
2025-03-11 15:31:41,397 - services.trade_store - INFO - 날짜: 20250219, 포지션 수: 0건
2025-03-11 15:31:41,397 - services.trade_store - INFO - 날짜: 20250220, 포지션 수: 0건
2025-03-11 15:31:41,397 - services.trade_store - INFO - 날짜: 20250221, 포지션 수: 2건
2025-03-11 15:31:41,397 - services.trade_store - INFO - 날짜: 20250222, 포지션 수: 0건
2025-03-11 15:31:41,397 - services.trade_store - INFO - 날짜: 20250223, 포지션 수: 0건
2025-03-11 15:31:41,397 - services.trade_store - INFO - 날짜: 20250224, 포지션 수: 0건
2025-03-11 15:31:41,397 - services.trade_store - INFO - 날짜: 20250225, 포지션 수: 0건
2025-03-11 15:31:41,401 - services.trade_store - INFO - 날짜: 20250226, 포지션 수: 0건
2025-03-11 15:31:41,401 - services.trade_store - INFO - 날짜: 20250227, 포지션 수: 0건
2025-03-11 15:31:41,401 - services.trade_store - INFO - 날짜: 20250228, 포지션 수: 0건
2025-03-11 15:31:41,401 - services.trade_store - INFO - 날짜: 20250301, 포지션 수: 0건
2025-03-11 15:31:41,401 - services.trade_store - INFO - 날짜: 20250302, 포지션 수: 0건
2025-03-11 15:31:41,402 - services.trade_store - INFO - 날짜: 20250303, 포지션 수: 0건
2025-03-11 15:31:41,402 - services.trade_store - INFO - 날짜: 20250304, 포지션 수: 0건
2025-03-11 15:31:41,402 - services.trade_store - INFO - 날짜: 20250305, 포지션 수: 0건
2025-03-11 15:31:41,402 - services.trade_store - INFO - 날짜: 20250306, 포지션 수: 0건
2025-03-11 15:31:41,402 - services.trade_store - INFO - 날짜: 20250307, 포지션 수: 0건
2025-03-11 15:31:41,403 - services.trade_store - INFO - 날짜: 20250308, 포지션 수: 0건
2025-03-11 15:31:41,403 - services.trade_store - INFO - 날짜: 20250309, 포지션 수: 0건
2025-03-11 15:31:41,403 - services.trade_store - INFO - 날짜: 20250310, 포지션 수: 0건
2025-03-11 15:31:41,403 - services.trade_store - INFO - 날짜: 20250311, 포지션 수: 0건
2025-03-11 15:31:41,404 - services.trade_store - INFO - 총 135건의 포지션 데이터 로드됨
2025-03-11 15:31:41,404 - services.trade_history_service - INFO - 기존 데이터: 135건
2025-03-11 15:31:41,404 - telegram_bot.bot - INFO - Application 빌드 시작...
2025-03-11 15:31:41,857 - telegram_bot.bot - INFO - 봇 초기화 완료, 시작 준비 중...
2025-03-11 15:31:41,857 - telegram_bot.bot - INFO - 봇 시작 시도...
2025-03-11 15:31:41,857 - telegram_bot.bot - INFO - === 봇 시작 시도 ===
2025-03-11 15:31:43,019 - apscheduler.scheduler - INFO - Scheduler started
2025-03-11 15:31:43,024 - telegram.ext.Application - INFO - Application started
2025-03-11 15:31:43,024 - telegram_bot.bot - INFO - 🤖 바이빗 트레이딩 봇이 시작되었습니다
2025-03-11 15:31:44,024 - telegram_bot.monitors.auto_analyzer - INFO - AutoAnalyzer 시작 요청됨
2025-03-11 15:31:44,024 - apscheduler.scheduler - INFO - Added job "AutoAnalyzer._scheduled_analysis" to job store "default"
2025-03-11 15:31:44,024 - apscheduler.scheduler - INFO - Scheduler started
2025-03-11 15:31:44,034 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 시작됨. 다음 실행 시간: 2025-03-11 16:00:00+09:00
2025-03-11 15:31:44,035 - telegram_bot.monitors.auto_analyzer - INFO - 초기 분석 실행 시작
2025-03-11 15:31:44,035 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄된 분석 시작 - 2025-03-11 15:31:44.035824
2025-03-11 15:31:44,036 - telegram_bot.monitors.auto_analyzer - INFO - 🔄' 1시간봉 분석 시작 (자동) ...
2025-03-11 15:31:44,036 - services.market_data_service - INFO - OHLCV 데이터 조회 시작 - 심볼: BTCUSDT, 시간대: 1h
2025-03-11 15:31:44,319 - ai.gpt_analyzer - INFO - 계산된 지표: ['open', 'high', 'low', 'close', 'volume', 'price_change_24h', 'volume_change_24h', 'rsi', 'macd', 'macd_signal', 'bb_upper', 'bb_middle', 'bb_lower', 'sma_10', 'sma_30', 'adx', 'di_plus', 'di_minus', 'trend', 'trend_strength', 'divergence_type', 'divergence_desc']
2025-03-11 15:31:44,319 - ai.gpt_analyzer - INFO - 시장 데이터: {'symbol': 'BTCUSDT', 'last_price': 55788.7, 'bid': 55463.6, 'ask': 55788.7, 'volume': 863364.908, 'timestamp': None}
2025-03-11 15:31:44,324 - ai.gpt_client - INFO - GPT API 호출 시작 (캐시 사용: False)
2025-03-11 15:31:44,324 - ai.gpt_client - INFO - 캐시 사용하지 않음 - 실제 API 호출
2025-03-11 15:31:46,301 - telegram_bot.formatters.storage_formatter - INFO - 1h 분석 결과 저장 완료: C:\Users\oasis\Aibybit_2\src\data\analysis\analysis_1h.json
2025-03-11 15:31:47,309 - telegram_bot.monitors.auto_analyzer - INFO - 분석 결과 position_suggestion: SELL
2025-03-11 15:31:47,309 - telegram_bot.monitors.auto_analyzer - INFO - 매매 신호 감지: SELL
2025-03-11 15:31:47,309 - order_service - INFO - 매매 신호 실행: {'position_suggestion': 'SELL', 'leverage': 5, 'position_size': 10, 'entry_price': 55788.7, 'stop_loss': 56000.0, 'take_profit1': 55000.0, 'take_profit2': 54000.0, 'reason': '하락 추세 및 부정적인 지표'}
2025-03-11 15:31:47,309 - order_service - INFO - 주문 시도: {'symbol': 'BTCUSDT', 'side': 'Sell', 'leverage': 5, 'position_size': 10, 'entry_price': 55788.7, 'stop_loss': 56000.0, 'take_profit': 55000.0, 'is_btc_unit': False}
2025-03-11 15:31:47,309 - order_service - INFO - 주문 상세 정보: {
  "symbol": "BTCUSDT",
  "side": "Sell",
  "leverage": 5,
  "position_size": 10,
  "entry_price": 55788.7,
  "stop_loss": 56000.0,
  "take_profit": 55000.0,
  "is_btc_unit": false
}
2025-03-11 15:31:47,320 - order_service - INFO - 주문 시도: {'symbol': 'BTCUSDT', 'side': 'Sell', 'leverage': 5, 'position_size': 10, 'entry_price': 55788.7, 'stop_loss': 56000.0, 'take_profit': 55000.0, 'is_btc_unit': False}
2025-03-11 15:31:48,004 - order_service - INFO - 현재 포지션: {'symbol': 'BTC/USDT:USDT', 'side': 'Short', 'size': 0.476, 'leverage': 5, 'entryPrice': 55788.52029289, 'markPrice': 55788.7, 'unrealisedPnl': -0.08554058, 'stopLoss': 0.0, 'takeProfit': 0.0}
2025-03-11 15:31:48,006 - order_service - INFO - 레버리지 차이가 작음(0) - 크기만 조정
2025-03-11 15:31:48,186 - exchange.bybit_client - INFO - USDT 잔고 - 총자산: $53,212.23, 가용잔고: $0.00, 사용중: $0.00
2025-03-11 15:31:48,186 - order_service - INFO - 가용 잔고: $0.0, 총 자산: $53212.2294148, 사용중: $0.0
2025-03-11 15:31:48,369 - order_service - INFO - 계산 입력값 - 총자산: $53212.2294148, 미실현손익: $0.0, 비율: 10%, 레버리지: 5배, 진입가: $55788.7
2025-03-11 15:31:48,369 - order_service - INFO - 순수 자산: $53212.2294148
2025-03-11 15:31:48,369 - order_service - INFO - 포지션 가치(USDT): $26606.114707400004
2025-03-11 15:31:48,369 - order_service - INFO - 계산된 BTC 수량: 0.47690866980947766
2025-03-11 15:31:48,369 - order_service - INFO - 최종 BTC 수량(반올림): 0.477
2025-03-11 15:31:48,556 - order_service - INFO - 주문 상세 정보: {
  "symbol": "BTCUSDT",
  "side": "Sell",
  "leverage": 5,
  "position_size": 0.0010000000000000009,
  "entry_price": 55788.7,
  "stop_loss": 56000.0,
  "take_profit": 55000.0,
  "is_btc_unit": false,
  "is_reduce_only": false,
  "needs_sl_tp": true
}
2025-03-11 15:31:48,738 - exchange.bybit_client - INFO - USDT 잔고 - 총자산: $53,212.23, 가용잔고: $0.00, 사용중: $0.00
2025-03-11 15:31:48,738 - order_service - INFO - USDT 잔고 - 총자산: $53212.2294148, 가용잔고: $0.0, 사용중: $0.0
2025-03-11 15:31:48,738 - order_service - INFO - 주문 실행 시도: {'category': 'linear', 'symbol': 'BTCUSDT', 'side': 'Sell', 'orderType': 'Limit', 'qty': '0.001', 'price': '55788.7', 'timeInForce': 'GTC', 'positionIdx': 0, 'reduceOnly': False, 'stopLoss': '56000.0', 'takeProfit': '55000.0'}
2025-03-11 15:31:49,010 - exchange.bybit_client - INFO - 서버 시간 동기화 완료: server_time=1741674709000, local_time=1741674709010, offset=-10ms
2025-03-11 15:31:49,287 - order_service - INFO - === 주문 요청 및 응답 상세 ===
2025-03-11 15:31:49,287 - order_service - INFO - 요청 파라미터:
{
  "category": "linear",
  "symbol": "BTCUSDT",
  "side": "Sell",
  "orderType": "Limit",
  "qty": "0.001",
  "price": "55788.7",
  "timeInForce": "GTC",
  "positionIdx": 0,
  "reduceOnly": false,
  "stopLoss": "56000.0",
  "takeProfit": "55000.0"
}
2025-03-11 15:31:49,288 - order_service - INFO - API 응답:
{
  "retCode": 0,
  "retMsg": "OK",
  "result": {
    "orderId": "5364df7a-1d42-4dc9-bc16-3c29cb236f3d",
    "orderLinkId": ""
  },
  "retExtInfo": {},
  "time": 1741674709376
}
2025-03-11 15:31:50,256 - telegram_bot.monitors.auto_analyzer - INFO - 초기 분석 실행 완료
2025-03-11 15:35:12,244 - main - INFO - 환경변수 및 설정 초기화 중...
2025-03-11 15:35:12,244 - main - INFO - Bybit 테스트넷 클라이언트 초기화 중...
2025-03-11 15:35:12,496 - main - INFO - 서비스 초기화 중...
2025-03-11 15:35:12,497 - main - INFO - 마켓 데이터 서비스 중...
2025-03-11 15:35:14,273 - services.market_data_service - INFO - 마켓 데이터 로드 완료
2025-03-11 15:35:14,531 - telegram_bot.bot - INFO - 텔레그램 설정 로드:
2025-03-11 15:35:14,531 - telegram_bot.bot - INFO - - admin_chat_id: 583881676
2025-03-11 15:35:14,531 - telegram_bot.bot - INFO - - alert_chat_ids: [-1002464784986]
2025-03-11 15:35:15,004 - telegram_bot.monitors.auto_analyzer - INFO - AutoAnalyzer 초기화 시작
2025-03-11 15:35:15,004 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 설정 시작
2025-03-11 15:35:15,006 - telegram_bot.monitors.auto_analyzer - INFO - 다음 실행 예정 시간: 2025-03-11 16:00:00
2025-03-11 15:35:15,007 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-03-11 15:35:15,007 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 설정 완료
2025-03-11 15:35:15,007 - telegram_bot.bot - INFO - 명령어 핸들러 등록 시작...
2025-03-11 15:35:15,008 - telegram_bot.bot - INFO - 명령어 핸들러 등록 완료
2025-03-11 15:35:15,008 - telegram_bot.bot - INFO - 봇 초기화 시작...
2025-03-11 15:35:15,009 - services.trade_history_service - INFO - === 포지션 정보 초기화 시작 ===
2025-03-11 15:35:15,009 - services.trade_history_service - INFO - 조회 기간: 2024-12-11 ~ 2025-03-11
2025-03-11 15:35:15,009 - services.trade_store - INFO - 날짜 범위 조회: 20241211 ~ 20250311
2025-03-11 15:35:15,010 - services.trade_store - INFO - 날짜: 20241211, 포지션 수: 1건
2025-03-11 15:35:15,011 - services.trade_store - INFO - 날짜: 20241212, 포지션 수: 1건
2025-03-11 15:35:15,011 - services.trade_store - INFO - 날짜: 20241213, 포지션 수: 2건
2025-03-11 15:35:15,011 - services.trade_store - INFO - 날짜: 20241214, 포지션 수: 2건
2025-03-11 15:35:15,011 - services.trade_store - INFO - 날짜: 20241215, 포지션 수: 0건
2025-03-11 15:35:15,012 - services.trade_store - INFO - 날짜: 20241216, 포지션 수: 0건
2025-03-11 15:35:15,012 - services.trade_store - INFO - 날짜: 20241217, 포지션 수: 10건
2025-03-11 15:35:15,013 - services.trade_store - INFO - 날짜: 20241218, 포지션 수: 5건
2025-03-11 15:35:15,013 - services.trade_store - INFO - 날짜: 20241219, 포지션 수: 1건
2025-03-11 15:35:15,014 - services.trade_store - INFO - 날짜: 20241220, 포지션 수: 31건
2025-03-11 15:35:15,020 - services.trade_store - INFO - 날짜: 20241221, 포지션 수: 3건
2025-03-11 15:35:15,021 - services.trade_store - INFO - 날짜: 20241222, 포지션 수: 10건
2025-03-11 15:35:15,022 - services.trade_store - INFO - 날짜: 20241223, 포지션 수: 7건
2025-03-11 15:35:15,022 - services.trade_store - INFO - 날짜: 20241224, 포지션 수: 11건
2025-03-11 15:35:15,022 - services.trade_store - INFO - 날짜: 20241225, 포지션 수: 2건
2025-03-11 15:35:15,024 - services.trade_store - INFO - 날짜: 20241226, 포지션 수: 7건
2025-03-11 15:35:15,024 - services.trade_store - INFO - 날짜: 20241227, 포지션 수: 7건
2025-03-11 15:35:15,025 - services.trade_store - INFO - 날짜: 20241228, 포지션 수: 4건
2025-03-11 15:35:15,025 - services.trade_store - INFO - 날짜: 20241229, 포지션 수: 0건
2025-03-11 15:35:15,025 - services.trade_store - INFO - 날짜: 20241230, 포지션 수: 15건
2025-03-11 15:35:15,026 - services.trade_store - INFO - 날짜: 20241231, 포지션 수: 8건
2025-03-11 15:35:15,026 - services.trade_store - INFO - 날짜: 20250101, 포지션 수: 0건
2025-03-11 15:35:15,026 - services.trade_store - INFO - 날짜: 20250102, 포지션 수: 0건
2025-03-11 15:35:15,026 - services.trade_store - INFO - 날짜: 20250103, 포지션 수: 0건
2025-03-11 15:35:15,026 - services.trade_store - INFO - 날짜: 20250104, 포지션 수: 0건
2025-03-11 15:35:15,026 - services.trade_store - INFO - 날짜: 20250105, 포지션 수: 0건
2025-03-11 15:35:15,027 - services.trade_store - INFO - 날짜: 20250106, 포지션 수: 0건
2025-03-11 15:35:15,027 - services.trade_store - INFO - 날짜: 20250107, 포지션 수: 0건
2025-03-11 15:35:15,027 - services.trade_store - INFO - 날짜: 20250108, 포지션 수: 0건
2025-03-11 15:35:15,027 - services.trade_store - INFO - 날짜: 20250109, 포지션 수: 0건
2025-03-11 15:35:15,027 - services.trade_store - INFO - 날짜: 20250110, 포지션 수: 0건
2025-03-11 15:35:15,027 - services.trade_store - INFO - 날짜: 20250111, 포지션 수: 0건
2025-03-11 15:35:15,027 - services.trade_store - INFO - 날짜: 20250112, 포지션 수: 0건
2025-03-11 15:35:15,028 - services.trade_store - INFO - 날짜: 20250113, 포지션 수: 0건
2025-03-11 15:35:15,028 - services.trade_store - INFO - 날짜: 20250114, 포지션 수: 0건
2025-03-11 15:35:15,028 - services.trade_store - INFO - 날짜: 20250115, 포지션 수: 0건
2025-03-11 15:35:15,028 - services.trade_store - INFO - 날짜: 20250116, 포지션 수: 0건
2025-03-11 15:35:15,028 - services.trade_store - INFO - 날짜: 20250117, 포지션 수: 0건
2025-03-11 15:35:15,029 - services.trade_store - INFO - 날짜: 20250118, 포지션 수: 0건
2025-03-11 15:35:15,029 - services.trade_store - INFO - 날짜: 20250119, 포지션 수: 0건
2025-03-11 15:35:15,029 - services.trade_store - INFO - 날짜: 20250120, 포지션 수: 0건
2025-03-11 15:35:15,029 - services.trade_store - INFO - 날짜: 20250121, 포지션 수: 0건
2025-03-11 15:35:15,029 - services.trade_store - INFO - 날짜: 20250122, 포지션 수: 0건
2025-03-11 15:35:15,029 - services.trade_store - INFO - 날짜: 20250123, 포지션 수: 0건
2025-03-11 15:35:15,029 - services.trade_store - INFO - 날짜: 20250124, 포지션 수: 0건
2025-03-11 15:35:15,030 - services.trade_store - INFO - 날짜: 20250125, 포지션 수: 0건
2025-03-11 15:35:15,030 - services.trade_store - INFO - 날짜: 20250126, 포지션 수: 0건
2025-03-11 15:35:15,030 - services.trade_store - INFO - 날짜: 20250127, 포지션 수: 0건
2025-03-11 15:35:15,030 - services.trade_store - INFO - 날짜: 20250128, 포지션 수: 0건
2025-03-11 15:35:15,030 - services.trade_store - INFO - 날짜: 20250129, 포지션 수: 0건
2025-03-11 15:35:15,031 - services.trade_store - INFO - 날짜: 20250130, 포지션 수: 0건
2025-03-11 15:35:15,031 - services.trade_store - INFO - 날짜: 20250131, 포지션 수: 0건
2025-03-11 15:35:15,031 - services.trade_store - INFO - 날짜: 20250201, 포지션 수: 0건
2025-03-11 15:35:15,031 - services.trade_store - INFO - 날짜: 20250202, 포지션 수: 0건
2025-03-11 15:35:15,031 - services.trade_store - INFO - 날짜: 20250203, 포지션 수: 0건
2025-03-11 15:35:15,032 - services.trade_store - INFO - 날짜: 20250204, 포지션 수: 0건
2025-03-11 15:35:15,032 - services.trade_store - INFO - 날짜: 20250205, 포지션 수: 0건
2025-03-11 15:35:15,032 - services.trade_store - INFO - 날짜: 20250206, 포지션 수: 0건
2025-03-11 15:35:15,033 - services.trade_store - INFO - 날짜: 20250207, 포지션 수: 0건
2025-03-11 15:35:15,035 - services.trade_store - INFO - 날짜: 20250208, 포지션 수: 0건
2025-03-11 15:35:15,035 - services.trade_store - INFO - 날짜: 20250209, 포지션 수: 0건
2025-03-11 15:35:15,035 - services.trade_store - INFO - 날짜: 20250210, 포지션 수: 0건
2025-03-11 15:35:15,035 - services.trade_store - INFO - 날짜: 20250211, 포지션 수: 0건
2025-03-11 15:35:15,036 - services.trade_store - INFO - 날짜: 20250212, 포지션 수: 0건
2025-03-11 15:35:15,036 - services.trade_store - INFO - 날짜: 20250213, 포지션 수: 0건
2025-03-11 15:35:15,036 - services.trade_store - INFO - 날짜: 20250214, 포지션 수: 2건
2025-03-11 15:35:15,037 - services.trade_store - INFO - 날짜: 20250215, 포지션 수: 2건
2025-03-11 15:35:15,037 - services.trade_store - INFO - 날짜: 20250216, 포지션 수: 0건
2025-03-11 15:35:15,037 - services.trade_store - INFO - 날짜: 20250217, 포지션 수: 2건
2025-03-11 15:35:15,037 - services.trade_store - INFO - 날짜: 20250218, 포지션 수: 0건
2025-03-11 15:35:15,037 - services.trade_store - INFO - 날짜: 20250219, 포지션 수: 0건
2025-03-11 15:35:15,037 - services.trade_store - INFO - 날짜: 20250220, 포지션 수: 0건
2025-03-11 15:35:15,037 - services.trade_store - INFO - 날짜: 20250221, 포지션 수: 2건
2025-03-11 15:35:15,040 - services.trade_store - INFO - 날짜: 20250222, 포지션 수: 0건
2025-03-11 15:35:15,040 - services.trade_store - INFO - 날짜: 20250223, 포지션 수: 0건
2025-03-11 15:35:15,040 - services.trade_store - INFO - 날짜: 20250224, 포지션 수: 0건
2025-03-11 15:35:15,040 - services.trade_store - INFO - 날짜: 20250225, 포지션 수: 0건
2025-03-11 15:35:15,040 - services.trade_store - INFO - 날짜: 20250226, 포지션 수: 0건
2025-03-11 15:35:15,040 - services.trade_store - INFO - 날짜: 20250227, 포지션 수: 0건
2025-03-11 15:35:15,040 - services.trade_store - INFO - 날짜: 20250228, 포지션 수: 0건
2025-03-11 15:35:15,040 - services.trade_store - INFO - 날짜: 20250301, 포지션 수: 0건
2025-03-11 15:35:15,041 - services.trade_store - INFO - 날짜: 20250302, 포지션 수: 0건
2025-03-11 15:35:15,041 - services.trade_store - INFO - 날짜: 20250303, 포지션 수: 0건
2025-03-11 15:35:15,041 - services.trade_store - INFO - 날짜: 20250304, 포지션 수: 0건
2025-03-11 15:35:15,041 - services.trade_store - INFO - 날짜: 20250305, 포지션 수: 0건
2025-03-11 15:35:15,041 - services.trade_store - INFO - 날짜: 20250306, 포지션 수: 0건
2025-03-11 15:35:15,042 - services.trade_store - INFO - 날짜: 20250307, 포지션 수: 0건
2025-03-11 15:35:15,042 - services.trade_store - INFO - 날짜: 20250308, 포지션 수: 0건
2025-03-11 15:35:15,042 - services.trade_store - INFO - 날짜: 20250309, 포지션 수: 0건
2025-03-11 15:35:15,042 - services.trade_store - INFO - 날짜: 20250310, 포지션 수: 0건
2025-03-11 15:35:15,042 - services.trade_store - INFO - 날짜: 20250311, 포지션 수: 0건
2025-03-11 15:35:15,042 - services.trade_store - INFO - 총 135건의 포지션 데이터 로드됨
2025-03-11 15:35:15,043 - services.trade_history_service - INFO - 기존 데이터: 135건
2025-03-11 15:35:15,043 - telegram_bot.bot - INFO - Application 빌드 시작...
2025-03-11 15:35:15,521 - telegram_bot.bot - INFO - 봇 초기화 완료, 시작 준비 중...
2025-03-11 15:35:15,521 - telegram_bot.bot - INFO - 봇 시작 시도...
2025-03-11 15:35:15,522 - telegram_bot.bot - INFO - === 봇 시작 시도 ===
2025-03-11 15:35:16,685 - apscheduler.scheduler - INFO - Scheduler started
2025-03-11 15:35:16,686 - telegram.ext.Application - INFO - Application started
2025-03-11 15:35:16,686 - telegram_bot.bot - INFO - 🤖 바이빗 트레이딩 봇이 시작되었습니다
2025-03-11 15:35:17,710 - telegram_bot.monitors.auto_analyzer - INFO - AutoAnalyzer 시작 요청됨
2025-03-11 15:35:17,711 - apscheduler.scheduler - INFO - Added job "AutoAnalyzer._scheduled_analysis" to job store "default"
2025-03-11 15:35:17,711 - apscheduler.scheduler - INFO - Scheduler started
2025-03-11 15:35:17,712 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 시작됨. 다음 실행 시간: 2025-03-11 16:00:00+09:00
2025-03-11 15:35:17,712 - telegram_bot.monitors.auto_analyzer - INFO - 초기 분석 실행 시작
2025-03-11 15:35:17,714 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄된 분석 시작 - 2025-03-11 15:35:17.714000
2025-03-11 15:35:17,714 - telegram_bot.monitors.auto_analyzer - INFO - 🔄' 1시간봉 분석 시작 (자동) ...
2025-03-11 15:35:17,714 - services.market_data_service - INFO - OHLCV 데이터 조회 시작 - 심볼: BTCUSDT, 시간대: 1h
2025-03-11 15:35:18,005 - ai.gpt_analyzer - INFO - 계산된 지표: ['open', 'high', 'low', 'close', 'volume', 'price_change_24h', 'volume_change_24h', 'rsi', 'macd', 'macd_signal', 'bb_upper', 'bb_middle', 'bb_lower', 'sma_10', 'sma_30', 'adx', 'di_plus', 'di_minus', 'trend', 'trend_strength', 'divergence_type', 'divergence_desc']
2025-03-11 15:35:18,006 - ai.gpt_analyzer - INFO - 시장 데이터: {'symbol': 'BTCUSDT', 'last_price': 55700.0, 'bid': 55626.1, 'ask': 55878.0, 'volume': 863169.898, 'timestamp': None}
2025-03-11 15:35:18,009 - ai.gpt_client - INFO - GPT API 호출 시작 (캐시 사용: False)
2025-03-11 15:35:18,009 - ai.gpt_client - INFO - 캐시 사용하지 않음 - 실제 API 호출
2025-03-11 15:35:20,210 - telegram_bot.formatters.storage_formatter - INFO - 1h 분석 결과 저장 완료: C:\Users\oasis\Aibybit_2\src\data\analysis\analysis_1h.json
2025-03-11 15:35:21,381 - telegram_bot.monitors.auto_analyzer - INFO - 분석 결과 position_suggestion: SELL
2025-03-11 15:35:21,381 - telegram_bot.monitors.auto_analyzer - INFO - 매매 신호 감지: SELL
2025-03-11 15:35:21,381 - order_service - INFO - 매매 신호 실행: {'position_suggestion': 'SELL', 'leverage': 5, 'position_size': 10, 'entry_price': 55700.0, 'stop_loss': 56000.0, 'take_profit1': 54500.0, 'take_profit2': 54000.0, 'reason': '하락 추세 및 부정적인 지표'}
2025-03-11 15:35:21,381 - order_service - INFO - 주문 시도: {'symbol': 'BTCUSDT', 'side': 'Sell', 'leverage': 5, 'position_size': 10, 'entry_price': 55700.0, 'stop_loss': 56000.0, 'take_profit': 54500.0, 'is_btc_unit': False}
2025-03-11 15:35:21,381 - order_service - INFO - 주문 상세 정보: {
  "symbol": "BTCUSDT",
  "side": "Sell",
  "leverage": 5,
  "position_size": 10,
  "entry_price": 55700.0,
  "stop_loss": 56000.0,
  "take_profit": 54500.0,
  "is_btc_unit": false
}
2025-03-11 15:35:21,381 - order_service - INFO - 주문 시도: {'symbol': 'BTCUSDT', 'side': 'Sell', 'leverage': 5, 'position_size': 10, 'entry_price': 55700.0, 'stop_loss': 56000.0, 'take_profit': 54500.0, 'is_btc_unit': False}
2025-03-11 15:35:22,218 - order_service - INFO - 현재 포지션: {'symbol': 'BTC/USDT:USDT', 'side': 'Short', 'size': 0.477, 'leverage': 5, 'entryPrice': 55788.52066964, 'markPrice': 55718.21, 'unrealisedPnl': 33.53818942, 'stopLoss': 0.0, 'takeProfit': 0.0}
2025-03-11 15:35:22,218 - order_service - INFO - 레버리지 차이가 작음(0) - 크기만 조정
2025-03-11 15:35:22,405 - exchange.bybit_client - INFO - USDT 잔고 - 총자산: $53,212.22, 가용잔고: $0.00, 사용중: $0.00
2025-03-11 15:35:22,405 - order_service - INFO - 가용 잔고: $0.0, 총 자산: $53212.21825706, 사용중: $0.0
2025-03-11 15:35:22,615 - order_service - INFO - 계산 입력값 - 총자산: $53212.21825706, 미실현손익: $0.0, 비율: 10%, 레버리지: 5배, 진입가: $55700.0
2025-03-11 15:35:22,616 - order_service - INFO - 순수 자산: $53212.21825706
2025-03-11 15:35:22,616 - order_service - INFO - 포지션 가치(USDT): $26606.109128530003
2025-03-11 15:35:22,618 - order_service - INFO - 계산된 BTC 수량: 0.47766802744219033
2025-03-11 15:35:22,618 - order_service - INFO - 최종 BTC 수량(반올림): 0.478
2025-03-11 15:35:22,805 - order_service - INFO - 주문 상세 정보: {
  "symbol": "BTCUSDT",
  "side": "Sell",
  "leverage": 5,
  "position_size": 0.0010000000000000009,
  "entry_price": 55700.0,
  "stop_loss": 56000.0,
  "take_profit": 54500.0,
  "is_btc_unit": false,
  "is_reduce_only": false,
  "needs_sl_tp": true
}
2025-03-11 15:35:22,989 - exchange.bybit_client - INFO - USDT 잔고 - 총자산: $53,212.22, 가용잔고: $0.00, 사용중: $0.00
2025-03-11 15:35:22,991 - order_service - INFO - USDT 잔고 - 총자산: $53212.21825706, 가용잔고: $0.0, 사용중: $0.0
2025-03-11 15:35:22,991 - order_service - INFO - 주문 실행 시도: {'category': 'linear', 'symbol': 'BTCUSDT', 'side': 'Sell', 'orderType': 'Limit', 'qty': '0.001', 'price': '55700.0', 'timeInForce': 'GTC', 'positionIdx': 0, 'reduceOnly': False, 'stopLoss': '56000.0', 'takeProfit': '54500.0'}
2025-03-11 15:35:23,284 - exchange.bybit_client - INFO - 서버 시간 동기화 완료: server_time=1741674923000, local_time=1741674923284, offset=-284ms
2025-03-11 15:35:23,608 - order_service - INFO - === 주문 요청 및 응답 상세 ===
2025-03-11 15:35:23,609 - order_service - INFO - 요청 파라미터:
{
  "category": "linear",
  "symbol": "BTCUSDT",
  "side": "Sell",
  "orderType": "Limit",
  "qty": "0.001",
  "price": "55700.0",
  "timeInForce": "GTC",
  "positionIdx": 0,
  "reduceOnly": false,
  "stopLoss": "56000.0",
  "takeProfit": "54500.0"
}
2025-03-11 15:35:23,609 - order_service - INFO - API 응답:
{
  "retCode": 0,
  "retMsg": "OK",
  "result": {
    "orderId": "ceefd48e-9b96-42af-a652-cd863d1ac7cd",
    "orderLinkId": ""
  },
  "retExtInfo": {},
  "time": 1741674923700
}
2025-03-11 15:35:24,613 - telegram_bot.monitors.auto_analyzer - INFO - 초기 분석 실행 완료
2025-03-11 15:42:37,557 - main - INFO - 환경변수 및 설정 초기화 중...
2025-03-11 15:42:37,557 - main - INFO - Bybit 테스트넷 클라이언트 초기화 중...
2025-03-11 15:42:37,803 - main - INFO - 서비스 초기화 중...
2025-03-11 15:42:37,803 - main - INFO - 마켓 데이터 서비스 중...
2025-03-11 15:42:39,567 - services.market_data_service - INFO - 마켓 데이터 로드 완료
2025-03-11 15:42:39,824 - telegram_bot.bot - INFO - 텔레그램 설정 로드:
2025-03-11 15:42:39,824 - telegram_bot.bot - INFO - - admin_chat_id: 583881676
2025-03-11 15:42:39,824 - telegram_bot.bot - INFO - - alert_chat_ids: [-1002464784986]
2025-03-11 15:42:40,289 - telegram_bot.monitors.auto_analyzer - INFO - AutoAnalyzer 초기화 시작
2025-03-11 15:42:40,289 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 설정 시작
2025-03-11 15:42:40,291 - telegram_bot.monitors.auto_analyzer - INFO - 다음 실행 예정 시간: 2025-03-11 16:00:00
2025-03-11 15:42:40,291 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-03-11 15:42:40,291 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 설정 완료
2025-03-11 15:42:40,291 - telegram_bot.bot - INFO - 명령어 핸들러 등록 시작...
2025-03-11 15:42:40,291 - telegram_bot.bot - INFO - 명령어 핸들러 등록 완료
2025-03-11 15:42:40,291 - telegram_bot.bot - INFO - 봇 초기화 시작...
2025-03-11 15:42:40,291 - services.trade_history_service - INFO - === 포지션 정보 초기화 시작 ===
2025-03-11 15:42:40,291 - services.trade_history_service - INFO - 조회 기간: 2024-12-11 ~ 2025-03-11
2025-03-11 15:42:40,296 - services.trade_store - INFO - 날짜 범위 조회: 20241211 ~ 20250311
2025-03-11 15:42:40,296 - services.trade_store - INFO - 날짜: 20241211, 포지션 수: 1건
2025-03-11 15:42:40,297 - services.trade_store - INFO - 날짜: 20241212, 포지션 수: 1건
2025-03-11 15:42:40,297 - services.trade_store - INFO - 날짜: 20241213, 포지션 수: 2건
2025-03-11 15:42:40,298 - services.trade_store - INFO - 날짜: 20241214, 포지션 수: 2건
2025-03-11 15:42:40,298 - services.trade_store - INFO - 날짜: 20241215, 포지션 수: 0건
2025-03-11 15:42:40,298 - services.trade_store - INFO - 날짜: 20241216, 포지션 수: 0건
2025-03-11 15:42:40,298 - services.trade_store - INFO - 날짜: 20241217, 포지션 수: 10건
2025-03-11 15:42:40,299 - services.trade_store - INFO - 날짜: 20241218, 포지션 수: 5건
2025-03-11 15:42:40,299 - services.trade_store - INFO - 날짜: 20241219, 포지션 수: 1건
2025-03-11 15:42:40,299 - services.trade_store - INFO - 날짜: 20241220, 포지션 수: 31건
2025-03-11 15:42:40,300 - services.trade_store - INFO - 날짜: 20241221, 포지션 수: 3건
2025-03-11 15:42:40,300 - services.trade_store - INFO - 날짜: 20241222, 포지션 수: 10건
2025-03-11 15:42:40,300 - services.trade_store - INFO - 날짜: 20241223, 포지션 수: 7건
2025-03-11 15:42:40,302 - services.trade_store - INFO - 날짜: 20241224, 포지션 수: 11건
2025-03-11 15:42:40,302 - services.trade_store - INFO - 날짜: 20241225, 포지션 수: 2건
2025-03-11 15:42:40,303 - services.trade_store - INFO - 날짜: 20241226, 포지션 수: 7건
2025-03-11 15:42:40,303 - services.trade_store - INFO - 날짜: 20241227, 포지션 수: 7건
2025-03-11 15:42:40,304 - services.trade_store - INFO - 날짜: 20241228, 포지션 수: 4건
2025-03-11 15:42:40,304 - services.trade_store - INFO - 날짜: 20241229, 포지션 수: 0건
2025-03-11 15:42:40,305 - services.trade_store - INFO - 날짜: 20241230, 포지션 수: 15건
2025-03-11 15:42:40,305 - services.trade_store - INFO - 날짜: 20241231, 포지션 수: 8건
2025-03-11 15:42:40,305 - services.trade_store - INFO - 날짜: 20250101, 포지션 수: 0건
2025-03-11 15:42:40,305 - services.trade_store - INFO - 날짜: 20250102, 포지션 수: 0건
2025-03-11 15:42:40,306 - services.trade_store - INFO - 날짜: 20250103, 포지션 수: 0건
2025-03-11 15:42:40,306 - services.trade_store - INFO - 날짜: 20250104, 포지션 수: 0건
2025-03-11 15:42:40,306 - services.trade_store - INFO - 날짜: 20250105, 포지션 수: 0건
2025-03-11 15:42:40,306 - services.trade_store - INFO - 날짜: 20250106, 포지션 수: 0건
2025-03-11 15:42:40,307 - services.trade_store - INFO - 날짜: 20250107, 포지션 수: 0건
2025-03-11 15:42:40,307 - services.trade_store - INFO - 날짜: 20250108, 포지션 수: 0건
2025-03-11 15:42:40,307 - services.trade_store - INFO - 날짜: 20250109, 포지션 수: 0건
2025-03-11 15:42:40,307 - services.trade_store - INFO - 날짜: 20250110, 포지션 수: 0건
2025-03-11 15:42:40,307 - services.trade_store - INFO - 날짜: 20250111, 포지션 수: 0건
2025-03-11 15:42:40,307 - services.trade_store - INFO - 날짜: 20250112, 포지션 수: 0건
2025-03-11 15:42:40,307 - services.trade_store - INFO - 날짜: 20250113, 포지션 수: 0건
2025-03-11 15:42:40,307 - services.trade_store - INFO - 날짜: 20250114, 포지션 수: 0건
2025-03-11 15:42:40,307 - services.trade_store - INFO - 날짜: 20250115, 포지션 수: 0건
2025-03-11 15:42:40,307 - services.trade_store - INFO - 날짜: 20250116, 포지션 수: 0건
2025-03-11 15:42:40,308 - services.trade_store - INFO - 날짜: 20250117, 포지션 수: 0건
2025-03-11 15:42:40,308 - services.trade_store - INFO - 날짜: 20250118, 포지션 수: 0건
2025-03-11 15:42:40,308 - services.trade_store - INFO - 날짜: 20250119, 포지션 수: 0건
2025-03-11 15:42:40,308 - services.trade_store - INFO - 날짜: 20250120, 포지션 수: 0건
2025-03-11 15:42:40,308 - services.trade_store - INFO - 날짜: 20250121, 포지션 수: 0건
2025-03-11 15:42:40,308 - services.trade_store - INFO - 날짜: 20250122, 포지션 수: 0건
2025-03-11 15:42:40,308 - services.trade_store - INFO - 날짜: 20250123, 포지션 수: 0건
2025-03-11 15:42:40,310 - services.trade_store - INFO - 날짜: 20250124, 포지션 수: 0건
2025-03-11 15:42:40,310 - services.trade_store - INFO - 날짜: 20250125, 포지션 수: 0건
2025-03-11 15:42:40,310 - services.trade_store - INFO - 날짜: 20250126, 포지션 수: 0건
2025-03-11 15:42:40,310 - services.trade_store - INFO - 날짜: 20250127, 포지션 수: 0건
2025-03-11 15:42:40,310 - services.trade_store - INFO - 날짜: 20250128, 포지션 수: 0건
2025-03-11 15:42:40,310 - services.trade_store - INFO - 날짜: 20250129, 포지션 수: 0건
2025-03-11 15:42:40,310 - services.trade_store - INFO - 날짜: 20250130, 포지션 수: 0건
2025-03-11 15:42:40,310 - services.trade_store - INFO - 날짜: 20250131, 포지션 수: 0건
2025-03-11 15:42:40,311 - services.trade_store - INFO - 날짜: 20250201, 포지션 수: 0건
2025-03-11 15:42:40,311 - services.trade_store - INFO - 날짜: 20250202, 포지션 수: 0건
2025-03-11 15:42:40,311 - services.trade_store - INFO - 날짜: 20250203, 포지션 수: 0건
2025-03-11 15:42:40,311 - services.trade_store - INFO - 날짜: 20250204, 포지션 수: 0건
2025-03-11 15:42:40,312 - services.trade_store - INFO - 날짜: 20250205, 포지션 수: 0건
2025-03-11 15:42:40,312 - services.trade_store - INFO - 날짜: 20250206, 포지션 수: 0건
2025-03-11 15:42:40,312 - services.trade_store - INFO - 날짜: 20250207, 포지션 수: 0건
2025-03-11 15:42:40,312 - services.trade_store - INFO - 날짜: 20250208, 포지션 수: 0건
2025-03-11 15:42:40,312 - services.trade_store - INFO - 날짜: 20250209, 포지션 수: 0건
2025-03-11 15:42:40,312 - services.trade_store - INFO - 날짜: 20250210, 포지션 수: 0건
2025-03-11 15:42:40,312 - services.trade_store - INFO - 날짜: 20250211, 포지션 수: 0건
2025-03-11 15:42:40,313 - services.trade_store - INFO - 날짜: 20250212, 포지션 수: 0건
2025-03-11 15:42:40,313 - services.trade_store - INFO - 날짜: 20250213, 포지션 수: 0건
2025-03-11 15:42:40,313 - services.trade_store - INFO - 날짜: 20250214, 포지션 수: 2건
2025-03-11 15:42:40,313 - services.trade_store - INFO - 날짜: 20250215, 포지션 수: 2건
2025-03-11 15:42:40,314 - services.trade_store - INFO - 날짜: 20250216, 포지션 수: 0건
2025-03-11 15:42:40,314 - services.trade_store - INFO - 날짜: 20250217, 포지션 수: 2건
2025-03-11 15:42:40,314 - services.trade_store - INFO - 날짜: 20250218, 포지션 수: 0건
2025-03-11 15:42:40,314 - services.trade_store - INFO - 날짜: 20250219, 포지션 수: 0건
2025-03-11 15:42:40,315 - services.trade_store - INFO - 날짜: 20250220, 포지션 수: 0건
2025-03-11 15:42:40,315 - services.trade_store - INFO - 날짜: 20250221, 포지션 수: 2건
2025-03-11 15:42:40,315 - services.trade_store - INFO - 날짜: 20250222, 포지션 수: 0건
2025-03-11 15:42:40,315 - services.trade_store - INFO - 날짜: 20250223, 포지션 수: 0건
2025-03-11 15:42:40,315 - services.trade_store - INFO - 날짜: 20250224, 포지션 수: 0건
2025-03-11 15:42:40,316 - services.trade_store - INFO - 날짜: 20250225, 포지션 수: 0건
2025-03-11 15:42:40,316 - services.trade_store - INFO - 날짜: 20250226, 포지션 수: 0건
2025-03-11 15:42:40,316 - services.trade_store - INFO - 날짜: 20250227, 포지션 수: 0건
2025-03-11 15:42:40,316 - services.trade_store - INFO - 날짜: 20250228, 포지션 수: 0건
2025-03-11 15:42:40,316 - services.trade_store - INFO - 날짜: 20250301, 포지션 수: 0건
2025-03-11 15:42:40,316 - services.trade_store - INFO - 날짜: 20250302, 포지션 수: 0건
2025-03-11 15:42:40,316 - services.trade_store - INFO - 날짜: 20250303, 포지션 수: 0건
2025-03-11 15:42:40,316 - services.trade_store - INFO - 날짜: 20250304, 포지션 수: 0건
2025-03-11 15:42:40,316 - services.trade_store - INFO - 날짜: 20250305, 포지션 수: 0건
2025-03-11 15:42:40,318 - services.trade_store - INFO - 날짜: 20250306, 포지션 수: 0건
2025-03-11 15:42:40,318 - services.trade_store - INFO - 날짜: 20250307, 포지션 수: 0건
2025-03-11 15:42:40,318 - services.trade_store - INFO - 날짜: 20250308, 포지션 수: 0건
2025-03-11 15:42:40,318 - services.trade_store - INFO - 날짜: 20250309, 포지션 수: 0건
2025-03-11 15:42:40,318 - services.trade_store - INFO - 날짜: 20250310, 포지션 수: 0건
2025-03-11 15:42:40,318 - services.trade_store - INFO - 날짜: 20250311, 포지션 수: 0건
2025-03-11 15:42:40,318 - services.trade_store - INFO - 총 135건의 포지션 데이터 로드됨
2025-03-11 15:42:40,318 - services.trade_history_service - INFO - 기존 데이터: 135건
2025-03-11 15:42:40,318 - telegram_bot.bot - INFO - Application 빌드 시작...
2025-03-11 15:42:40,774 - telegram_bot.bot - INFO - 봇 초기화 완료, 시작 준비 중...
2025-03-11 15:42:40,774 - telegram_bot.bot - INFO - 봇 시작 시도...
2025-03-11 15:42:40,774 - telegram_bot.bot - INFO - === 봇 시작 시도 ===
2025-03-11 15:42:41,892 - apscheduler.scheduler - INFO - Scheduler started
2025-03-11 15:42:41,892 - telegram.ext.Application - INFO - Application started
2025-03-11 15:42:41,892 - telegram_bot.bot - INFO - 🤖 바이빗 트레이딩 봇이 시작되었습니다
2025-03-11 15:42:42,861 - telegram_bot.monitors.auto_analyzer - INFO - AutoAnalyzer 시작 요청됨
2025-03-11 15:42:42,861 - apscheduler.scheduler - INFO - Added job "AutoAnalyzer._scheduled_analysis" to job store "default"
2025-03-11 15:42:42,861 - apscheduler.scheduler - INFO - Scheduler started
2025-03-11 15:42:42,861 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 시작됨. 다음 실행 시간: 2025-03-11 16:00:00+09:00
2025-03-11 15:42:42,861 - telegram_bot.monitors.auto_analyzer - INFO - 초기 분석 실행 시작
2025-03-11 15:42:42,861 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄된 분석 시작 - 2025-03-11 15:42:42.861563
2025-03-11 15:42:42,861 - telegram_bot.monitors.auto_analyzer - INFO - 🔄' 1시간봉 분석 시작 (자동) ...
2025-03-11 15:42:42,861 - services.market_data_service - INFO - OHLCV 데이터 조회 시작 - 심볼: BTCUSDT, 시간대: 1h
2025-03-11 15:42:43,152 - ai.gpt_analyzer - INFO - 계산된 지표: ['open', 'high', 'low', 'close', 'volume', 'price_change_24h', 'volume_change_24h', 'rsi', 'macd', 'macd_signal', 'bb_upper', 'bb_middle', 'bb_lower', 'sma_10', 'sma_30', 'adx', 'di_plus', 'di_minus', 'trend', 'trend_strength', 'divergence_type', 'divergence_desc']
2025-03-11 15:42:43,152 - ai.gpt_analyzer - INFO - 시장 데이터: {'symbol': 'BTCUSDT', 'last_price': 55788.7, 'bid': 55700.0, 'ask': 55800.0, 'volume': 827100.699, 'timestamp': None}
2025-03-11 15:42:43,156 - ai.gpt_client - INFO - GPT API 호출 시작 (캐시 사용: False)
2025-03-11 15:42:43,156 - ai.gpt_client - INFO - 캐시 사용하지 않음 - 실제 API 호출
2025-03-11 15:42:45,247 - telegram_bot.formatters.storage_formatter - INFO - 1h 분석 결과 저장 완료: C:\Users\oasis\Aibybit_2\src\data\analysis\analysis_1h.json
2025-03-11 15:42:46,218 - telegram_bot.monitors.auto_analyzer - INFO - 분석 결과 position_suggestion: SELL
2025-03-11 15:42:46,218 - telegram_bot.monitors.auto_analyzer - INFO - 매매 신호 감지: SELL
2025-03-11 15:42:46,218 - order_service - INFO - 매매 신호 실행: {'position_suggestion': 'SELL', 'leverage': 5, 'position_size': 10, 'entry_price': 55788.7, 'stop_loss': 56000.0, 'take_profit1': 55000.0, 'take_profit2': 54000.0, 'reason': '하락 추세 및 부정적인 지표'}
2025-03-11 15:42:46,218 - order_service - INFO - 주문 시도: {'symbol': 'BTCUSDT', 'side': 'Sell', 'leverage': 5, 'position_size': 10, 'entry_price': 55788.7, 'stop_loss': 56000.0, 'take_profit': 55000.0, 'is_btc_unit': False}
2025-03-11 15:42:46,218 - order_service - INFO - 주문 상세 정보: {
  "symbol": "BTCUSDT",
  "side": "Sell",
  "leverage": 5,
  "position_size": 10,
  "entry_price": 55788.7,
  "stop_loss": 56000.0,
  "take_profit": 55000.0,
  "is_btc_unit": false
}
2025-03-11 15:42:46,218 - order_service - INFO - 주문 시도: {'symbol': 'BTCUSDT', 'side': 'Sell', 'leverage': 5, 'position_size': 10, 'entry_price': 55788.7, 'stop_loss': 56000.0, 'take_profit': 55000.0, 'is_btc_unit': False}
2025-03-11 15:42:46,774 - order_service - INFO - 현재 포지션: {'symbol': 'BTC/USDT:USDT', 'side': 'Short', 'size': 0.478, 'leverage': 5, 'entryPrice': 55788.33547996, 'markPrice': 55788.7, 'unrealisedPnl': -0.17424058, 'stopLoss': 0.0, 'takeProfit': 0.0}
2025-03-11 15:42:46,774 - order_service - INFO - 레버리지 차이가 작음(0) - 크기만 조정
2025-03-11 15:42:46,952 - exchange.bybit_client - INFO - USDT 잔고 - 총자산: $53,212.21, 가용잔고: $0.00, 사용중: $0.00
2025-03-11 15:42:46,952 - order_service - INFO - 가용 잔고: $0.0, 총 자산: $53212.20711706, 사용중: $0.0
2025-03-11 15:42:47,136 - order_service - INFO - 계산 입력값 - 총자산: $53212.20711706, 미실현손익: $0.0, 비율: 10%, 레버리지: 5배, 진입가: $55788.7
2025-03-11 15:42:47,136 - order_service - INFO - 순수 자산: $53212.20711706
2025-03-11 15:42:47,136 - order_service - INFO - 포지션 가치(USDT): $26606.103558530005
2025-03-11 15:42:47,136 - order_service - INFO - 계산된 BTC 수량: 0.4769084699684704
2025-03-11 15:42:47,136 - order_service - INFO - 최종 BTC 수량(반올림): 0.477
2025-03-11 15:42:47,324 - order_service - INFO - 주문 상세 정보: {
  "symbol": "BTCUSDT",
  "side": "Buy",
  "leverage": 5,
  "position_size": 0.0010000000000000009,
  "entry_price": 55788.7,
  "stop_loss": 56000.0,
  "take_profit": 55000.0,
  "is_btc_unit": false,
  "is_reduce_only": true,
  "needs_sl_tp": false
}
2025-03-11 15:42:47,504 - exchange.bybit_client - INFO - USDT 잔고 - 총자산: $53,212.21, 가용잔고: $0.00, 사용중: $0.00
2025-03-11 15:42:47,504 - order_service - INFO - USDT 잔고 - 총자산: $53212.20711706, 가용잔고: $0.0, 사용중: $0.0
2025-03-11 15:42:47,504 - order_service - INFO - 주문 실행 시도: {'category': 'linear', 'symbol': 'BTCUSDT', 'side': 'Buy', 'orderType': 'Limit', 'qty': '0.001', 'price': '55788.7', 'timeInForce': 'GTC', 'positionIdx': 0, 'reduceOnly': True}
2025-03-11 15:42:47,650 - exchange.bybit_client - INFO - 서버 시간 동기화 완료: server_time=1741675367000, local_time=1741675367650, offset=-650ms
2025-03-11 15:42:47,771 - order_service - INFO - === 주문 요청 및 응답 상세 ===
2025-03-11 15:42:47,771 - order_service - INFO - 요청 파라미터:
{
  "category": "linear",
  "symbol": "BTCUSDT",
  "side": "Buy",
  "orderType": "Limit",
  "qty": "0.001",
  "price": "55788.7",
  "timeInForce": "GTC",
  "positionIdx": 0,
  "reduceOnly": true
}
2025-03-11 15:42:47,773 - order_service - INFO - API 응답:
{
  "retCode": 0,
  "retMsg": "OK",
  "result": {
    "orderId": "58d6f8a9-2957-44da-8413-d10e8c72b057",
    "orderLinkId": ""
  },
  "retExtInfo": {},
  "time": 1741675367866
}
2025-03-11 15:42:48,745 - telegram_bot.monitors.auto_analyzer - INFO - 초기 분석 실행 완료
2025-03-11 15:46:22,104 - main - INFO - 환경변수 및 설정 초기화 중...
2025-03-11 15:46:22,104 - main - INFO - Bybit 테스트넷 클라이언트 초기화 중...
2025-03-11 15:46:22,356 - main - INFO - 서비스 초기화 중...
2025-03-11 15:46:22,357 - main - INFO - 마켓 데이터 서비스 중...
2025-03-11 15:46:24,002 - services.market_data_service - INFO - 마켓 데이터 로드 완료
2025-03-11 15:46:24,254 - telegram_bot.bot - INFO - 텔레그램 설정 로드:
2025-03-11 15:46:24,254 - telegram_bot.bot - INFO - - admin_chat_id: 583881676
2025-03-11 15:46:24,254 - telegram_bot.bot - INFO - - alert_chat_ids: [-1002464784986]
2025-03-11 15:46:24,722 - telegram_bot.monitors.auto_analyzer - INFO - AutoAnalyzer 초기화 시작
2025-03-11 15:46:24,724 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 설정 시작
2025-03-11 15:46:24,725 - telegram_bot.monitors.auto_analyzer - INFO - 다음 실행 예정 시간: 2025-03-11 16:00:00
2025-03-11 15:46:24,726 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-03-11 15:46:24,727 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 설정 완료
2025-03-11 15:46:24,727 - telegram_bot.bot - INFO - 봇 초기화 시작...
2025-03-11 15:46:24,727 - services.trade_history_service - INFO - === 포지션 정보 초기화 시작 ===
2025-03-11 15:46:24,727 - services.trade_history_service - INFO - 조회 기간: 2024-12-11 ~ 2025-03-11
2025-03-11 15:46:24,728 - services.trade_store - INFO - 날짜 범위 조회: 20241211 ~ 20250311
2025-03-11 15:46:24,729 - services.trade_store - INFO - 날짜: 20241211, 포지션 수: 1건
2025-03-11 15:46:24,729 - services.trade_store - INFO - 날짜: 20241212, 포지션 수: 1건
2025-03-11 15:46:24,730 - services.trade_store - INFO - 날짜: 20241213, 포지션 수: 2건
2025-03-11 15:46:24,730 - services.trade_store - INFO - 날짜: 20241214, 포지션 수: 2건
2025-03-11 15:46:24,730 - services.trade_store - INFO - 날짜: 20241215, 포지션 수: 0건
2025-03-11 15:46:24,730 - services.trade_store - INFO - 날짜: 20241216, 포지션 수: 0건
2025-03-11 15:46:24,731 - services.trade_store - INFO - 날짜: 20241217, 포지션 수: 10건
2025-03-11 15:46:24,731 - services.trade_store - INFO - 날짜: 20241218, 포지션 수: 5건
2025-03-11 15:46:24,731 - services.trade_store - INFO - 날짜: 20241219, 포지션 수: 1건
2025-03-11 15:46:24,732 - services.trade_store - INFO - 날짜: 20241220, 포지션 수: 31건
2025-03-11 15:46:24,732 - services.trade_store - INFO - 날짜: 20241221, 포지션 수: 3건
2025-03-11 15:46:24,733 - services.trade_store - INFO - 날짜: 20241222, 포지션 수: 10건
2025-03-11 15:46:24,733 - services.trade_store - INFO - 날짜: 20241223, 포지션 수: 7건
2025-03-11 15:46:24,734 - services.trade_store - INFO - 날짜: 20241224, 포지션 수: 11건
2025-03-11 15:46:24,734 - services.trade_store - INFO - 날짜: 20241225, 포지션 수: 2건
2025-03-11 15:46:24,734 - services.trade_store - INFO - 날짜: 20241226, 포지션 수: 7건
2025-03-11 15:46:24,736 - services.trade_store - INFO - 날짜: 20241227, 포지션 수: 7건
2025-03-11 15:46:24,736 - services.trade_store - INFO - 날짜: 20241228, 포지션 수: 4건
2025-03-11 15:46:24,737 - services.trade_store - INFO - 날짜: 20241229, 포지션 수: 0건
2025-03-11 15:46:24,737 - services.trade_store - INFO - 날짜: 20241230, 포지션 수: 15건
2025-03-11 15:46:24,737 - services.trade_store - INFO - 날짜: 20241231, 포지션 수: 8건
2025-03-11 15:46:24,738 - services.trade_store - INFO - 날짜: 20250101, 포지션 수: 0건
2025-03-11 15:46:24,738 - services.trade_store - INFO - 날짜: 20250102, 포지션 수: 0건
2025-03-11 15:46:24,738 - services.trade_store - INFO - 날짜: 20250103, 포지션 수: 0건
2025-03-11 15:46:24,738 - services.trade_store - INFO - 날짜: 20250104, 포지션 수: 0건
2025-03-11 15:46:24,739 - services.trade_store - INFO - 날짜: 20250105, 포지션 수: 0건
2025-03-11 15:46:24,739 - services.trade_store - INFO - 날짜: 20250106, 포지션 수: 0건
2025-03-11 15:46:24,739 - services.trade_store - INFO - 날짜: 20250107, 포지션 수: 0건
2025-03-11 15:46:24,739 - services.trade_store - INFO - 날짜: 20250108, 포지션 수: 0건
2025-03-11 15:46:24,739 - services.trade_store - INFO - 날짜: 20250109, 포지션 수: 0건
2025-03-11 15:46:24,740 - services.trade_store - INFO - 날짜: 20250110, 포지션 수: 0건
2025-03-11 15:46:24,740 - services.trade_store - INFO - 날짜: 20250111, 포지션 수: 0건
2025-03-11 15:46:24,740 - services.trade_store - INFO - 날짜: 20250112, 포지션 수: 0건
2025-03-11 15:46:24,740 - services.trade_store - INFO - 날짜: 20250113, 포지션 수: 0건
2025-03-11 15:46:24,740 - services.trade_store - INFO - 날짜: 20250114, 포지션 수: 0건
2025-03-11 15:46:24,740 - services.trade_store - INFO - 날짜: 20250115, 포지션 수: 0건
2025-03-11 15:46:24,740 - services.trade_store - INFO - 날짜: 20250116, 포지션 수: 0건
2025-03-11 15:46:24,741 - services.trade_store - INFO - 날짜: 20250117, 포지션 수: 0건
2025-03-11 15:46:24,741 - services.trade_store - INFO - 날짜: 20250118, 포지션 수: 0건
2025-03-11 15:46:24,741 - services.trade_store - INFO - 날짜: 20250119, 포지션 수: 0건
2025-03-11 15:46:24,741 - services.trade_store - INFO - 날짜: 20250120, 포지션 수: 0건
2025-03-11 15:46:24,741 - services.trade_store - INFO - 날짜: 20250121, 포지션 수: 0건
2025-03-11 15:46:24,741 - services.trade_store - INFO - 날짜: 20250122, 포지션 수: 0건
2025-03-11 15:46:24,741 - services.trade_store - INFO - 날짜: 20250123, 포지션 수: 0건
2025-03-11 15:46:24,741 - services.trade_store - INFO - 날짜: 20250124, 포지션 수: 0건
2025-03-11 15:46:24,742 - services.trade_store - INFO - 날짜: 20250125, 포지션 수: 0건
2025-03-11 15:46:24,742 - services.trade_store - INFO - 날짜: 20250126, 포지션 수: 0건
2025-03-11 15:46:24,742 - services.trade_store - INFO - 날짜: 20250127, 포지션 수: 0건
2025-03-11 15:46:24,742 - services.trade_store - INFO - 날짜: 20250128, 포지션 수: 0건
2025-03-11 15:46:24,742 - services.trade_store - INFO - 날짜: 20250129, 포지션 수: 0건
2025-03-11 15:46:24,742 - services.trade_store - INFO - 날짜: 20250130, 포지션 수: 0건
2025-03-11 15:46:24,742 - services.trade_store - INFO - 날짜: 20250131, 포지션 수: 0건
2025-03-11 15:46:24,742 - services.trade_store - INFO - 날짜: 20250201, 포지션 수: 0건
2025-03-11 15:46:24,743 - services.trade_store - INFO - 날짜: 20250202, 포지션 수: 0건
2025-03-11 15:46:24,743 - services.trade_store - INFO - 날짜: 20250203, 포지션 수: 0건
2025-03-11 15:46:24,743 - services.trade_store - INFO - 날짜: 20250204, 포지션 수: 0건
2025-03-11 15:46:24,743 - services.trade_store - INFO - 날짜: 20250205, 포지션 수: 0건
2025-03-11 15:46:24,743 - services.trade_store - INFO - 날짜: 20250206, 포지션 수: 0건
2025-03-11 15:46:24,744 - services.trade_store - INFO - 날짜: 20250207, 포지션 수: 0건
2025-03-11 15:46:24,744 - services.trade_store - INFO - 날짜: 20250208, 포지션 수: 0건
2025-03-11 15:46:24,744 - services.trade_store - INFO - 날짜: 20250209, 포지션 수: 0건
2025-03-11 15:46:24,744 - services.trade_store - INFO - 날짜: 20250210, 포지션 수: 0건
2025-03-11 15:46:24,744 - services.trade_store - INFO - 날짜: 20250211, 포지션 수: 0건
2025-03-11 15:46:24,745 - services.trade_store - INFO - 날짜: 20250212, 포지션 수: 0건
2025-03-11 15:46:24,745 - services.trade_store - INFO - 날짜: 20250213, 포지션 수: 0건
2025-03-11 15:46:24,745 - services.trade_store - INFO - 날짜: 20250214, 포지션 수: 2건
2025-03-11 15:46:24,746 - services.trade_store - INFO - 날짜: 20250215, 포지션 수: 2건
2025-03-11 15:46:24,746 - services.trade_store - INFO - 날짜: 20250216, 포지션 수: 0건
2025-03-11 15:46:24,746 - services.trade_store - INFO - 날짜: 20250217, 포지션 수: 2건
2025-03-11 15:46:24,746 - services.trade_store - INFO - 날짜: 20250218, 포지션 수: 0건
2025-03-11 15:46:24,746 - services.trade_store - INFO - 날짜: 20250219, 포지션 수: 0건
2025-03-11 15:46:24,747 - services.trade_store - INFO - 날짜: 20250220, 포지션 수: 0건
2025-03-11 15:46:24,747 - services.trade_store - INFO - 날짜: 20250221, 포지션 수: 2건
2025-03-11 15:46:24,747 - services.trade_store - INFO - 날짜: 20250222, 포지션 수: 0건
2025-03-11 15:46:24,747 - services.trade_store - INFO - 날짜: 20250223, 포지션 수: 0건
2025-03-11 15:46:24,747 - services.trade_store - INFO - 날짜: 20250224, 포지션 수: 0건
2025-03-11 15:46:24,748 - services.trade_store - INFO - 날짜: 20250225, 포지션 수: 0건
2025-03-11 15:46:24,748 - services.trade_store - INFO - 날짜: 20250226, 포지션 수: 0건
2025-03-11 15:46:24,748 - services.trade_store - INFO - 날짜: 20250227, 포지션 수: 0건
2025-03-11 15:46:24,748 - services.trade_store - INFO - 날짜: 20250228, 포지션 수: 0건
2025-03-11 15:46:24,748 - services.trade_store - INFO - 날짜: 20250301, 포지션 수: 0건
2025-03-11 15:46:24,748 - services.trade_store - INFO - 날짜: 20250302, 포지션 수: 0건
2025-03-11 15:46:24,748 - services.trade_store - INFO - 날짜: 20250303, 포지션 수: 0건
2025-03-11 15:46:24,748 - services.trade_store - INFO - 날짜: 20250304, 포지션 수: 0건
2025-03-11 15:46:24,748 - services.trade_store - INFO - 날짜: 20250305, 포지션 수: 0건
2025-03-11 15:46:24,748 - services.trade_store - INFO - 날짜: 20250306, 포지션 수: 0건
2025-03-11 15:46:24,748 - services.trade_store - INFO - 날짜: 20250307, 포지션 수: 0건
2025-03-11 15:46:24,748 - services.trade_store - INFO - 날짜: 20250308, 포지션 수: 0건
2025-03-11 15:46:24,748 - services.trade_store - INFO - 날짜: 20250309, 포지션 수: 0건
2025-03-11 15:46:24,748 - services.trade_store - INFO - 날짜: 20250310, 포지션 수: 0건
2025-03-11 15:46:24,748 - services.trade_store - INFO - 날짜: 20250311, 포지션 수: 0건
2025-03-11 15:46:24,748 - services.trade_store - INFO - 총 135건의 포지션 데이터 로드됨
2025-03-11 15:46:24,748 - services.trade_history_service - INFO - 기존 데이터: 135건
2025-03-11 15:46:25,210 - telegram_bot.bot - INFO - 명령어 핸들러 등록 시작...
2025-03-11 15:46:25,211 - telegram_bot.bot - INFO - 명령어 핸들러 등록 완료
2025-03-11 15:46:25,212 - telegram_bot.bot - INFO - 봇 초기화 완료, 시작 준비 중...
2025-03-11 15:46:25,212 - telegram_bot.bot - INFO - 봇 시작 시도...
2025-03-11 15:46:25,212 - telegram_bot.bot - INFO - === 봇 시작 시도 ===
2025-03-11 15:46:26,303 - apscheduler.scheduler - INFO - Scheduler started
2025-03-11 15:46:26,304 - telegram.ext.Application - INFO - Application started
2025-03-11 15:46:26,305 - telegram_bot.bot - INFO - 🤖 바이빗 트레이딩 봇이 시작되었습니다
2025-03-11 15:46:27,274 - telegram_bot.monitors.auto_analyzer - INFO - AutoAnalyzer 시작 요청됨
2025-03-11 15:46:27,274 - apscheduler.scheduler - INFO - Added job "AutoAnalyzer._scheduled_analysis" to job store "default"
2025-03-11 15:46:27,274 - apscheduler.scheduler - INFO - Scheduler started
2025-03-11 15:46:27,274 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 시작됨. 다음 실행 시간: 2025-03-11 16:00:00+09:00
2025-03-11 15:46:27,274 - telegram_bot.monitors.auto_analyzer - INFO - 초기 분석 실행 시작
2025-03-11 15:46:27,274 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄된 분석 시작 - 2025-03-11 15:46:27.274107
2025-03-11 15:46:27,274 - telegram_bot.monitors.auto_analyzer - INFO - 🔄' 1시간봉 분석 시작 (자동) ...
2025-03-11 15:46:27,274 - services.market_data_service - INFO - OHLCV 데이터 조회 시작 - 심볼: BTCUSDT, 시간대: 1h
2025-03-11 15:46:27,553 - ai.gpt_analyzer - INFO - 계산된 지표: ['open', 'high', 'low', 'close', 'volume', 'price_change_24h', 'volume_change_24h', 'rsi', 'macd', 'macd_signal', 'bb_upper', 'bb_middle', 'bb_lower', 'sma_10', 'sma_30', 'adx', 'di_plus', 'di_minus', 'trend', 'trend_strength', 'divergence_type', 'divergence_desc']
2025-03-11 15:46:27,553 - ai.gpt_analyzer - INFO - 시장 데이터: {'symbol': 'BTCUSDT', 'last_price': 55626.1, 'bid': 55717.8, 'ask': 55878.1, 'volume': 827097.891, 'timestamp': None}
2025-03-11 15:46:27,553 - ai.gpt_client - INFO - GPT API 호출 시작 (캐시 사용: False)
2025-03-11 15:46:27,553 - ai.gpt_client - INFO - 캐시 사용하지 않음 - 실제 API 호출
2025-03-11 15:46:30,062 - telegram_bot.formatters.storage_formatter - INFO - 1h 분석 결과 저장 완료: C:\Users\oasis\Aibybit_2\src\data\analysis\analysis_1h.json
2025-03-11 15:46:31,241 - telegram_bot.monitors.auto_analyzer - INFO - 분석 결과 position_suggestion: SELL
2025-03-11 15:46:31,251 - telegram_bot.monitors.auto_analyzer - INFO - 매매 신호 감지: SELL
2025-03-11 15:46:31,251 - order_service - INFO - 매매 신호 실행: {'position_suggestion': 'SELL', 'leverage': 5, 'position_size': 10, 'entry_price': 55626.1, 'stop_loss': 56000.0, 'take_profit1': 54600.0, 'take_profit2': 53600.0, 'reason': '하락 추세 및 부정적인 지표'}
2025-03-11 15:46:31,251 - order_service - INFO - 주문 시도: {'symbol': 'BTCUSDT', 'side': 'Sell', 'leverage': 5, 'position_size': 10, 'entry_price': 55626.1, 'stop_loss': 56000.0, 'take_profit': 54600.0, 'is_btc_unit': False}
2025-03-11 15:46:31,251 - order_service - INFO - 주문 상세 정보: {
  "symbol": "BTCUSDT",
  "side": "Sell",
  "leverage": 5,
  "position_size": 10,
  "entry_price": 55626.1,
  "stop_loss": 56000.0,
  "take_profit": 54600.0,
  "is_btc_unit": false
}
2025-03-11 15:46:31,252 - order_service - INFO - 주문 시도: {'symbol': 'BTCUSDT', 'side': 'Sell', 'leverage': 5, 'position_size': 10, 'entry_price': 55626.1, 'stop_loss': 56000.0, 'take_profit': 54600.0, 'is_btc_unit': False}
2025-03-11 15:46:31,803 - order_service - INFO - 현재 포지션: {'symbol': 'BTC/USDT:USDT', 'side': 'Short', 'size': 0.477, 'leverage': 5, 'entryPrice': 55788.33547996, 'markPrice': 55743.51, 'unrealisedPnl': 21.38175395, 'stopLoss': 0.0, 'takeProfit': 0.0}
2025-03-11 15:46:31,803 - order_service - INFO - 레버리지 차이가 작음(0) - 크기만 조정
2025-03-11 15:46:32,141 - exchange.bybit_client - INFO - USDT 잔고 - 총자산: $53,212.20, 가용잔고: $0.00, 사용중: $0.00
2025-03-11 15:46:32,141 - order_service - INFO - 가용 잔고: $0.0, 총 자산: $53212.19559479, 사용중: $0.0
2025-03-11 15:46:32,328 - order_service - INFO - 계산 입력값 - 총자산: $53212.19559479, 미실현손익: $0.0, 비율: 10%, 레버리지: 5배, 진입가: $55626.1
2025-03-11 15:46:32,330 - order_service - INFO - 순수 자산: $53212.19559479
2025-03-11 15:46:32,330 - order_service - INFO - 포지션 가치(USDT): $26606.097797395
2025-03-11 15:46:32,331 - order_service - INFO - 계산된 BTC 수량: 0.47830241195041534
2025-03-11 15:46:32,331 - order_service - INFO - 최종 BTC 수량(반올림): 0.478
2025-03-11 15:46:32,674 - order_service - INFO - 주문 상세 정보: {
  "symbol": "BTCUSDT",
  "side": "Sell",
  "leverage": 5,
  "position_size": 0.0010000000000000009,
  "entry_price": 55626.1,
  "stop_loss": 56000.0,
  "take_profit": 54600.0,
  "is_btc_unit": false,
  "is_reduce_only": false,
  "needs_sl_tp": true
}
2025-03-11 15:46:32,853 - exchange.bybit_client - INFO - USDT 잔고 - 총자산: $53,212.20, 가용잔고: $0.00, 사용중: $0.00
2025-03-11 15:46:32,853 - order_service - INFO - USDT 잔고 - 총자산: $53212.19559479, 가용잔고: $0.0, 사용중: $0.0
2025-03-11 15:46:32,853 - order_service - INFO - 주문 실행 시도: {'category': 'linear', 'symbol': 'BTCUSDT', 'side': 'Sell', 'orderType': 'Limit', 'qty': '0.001', 'price': '55626.1', 'timeInForce': 'GTC', 'positionIdx': 0, 'reduceOnly': False, 'stopLoss': '56000.0', 'takeProfit': '54600.0'}
2025-03-11 15:46:33,006 - exchange.bybit_client - INFO - 서버 시간 동기화 완료: server_time=1741675593000, local_time=1741675593006, offset=-6ms
2025-03-11 15:46:33,129 - order_service - INFO - === 주문 요청 및 응답 상세 ===
2025-03-11 15:46:33,129 - order_service - INFO - 요청 파라미터:
{
  "category": "linear",
  "symbol": "BTCUSDT",
  "side": "Sell",
  "orderType": "Limit",
  "qty": "0.001",
  "price": "55626.1",
  "timeInForce": "GTC",
  "positionIdx": 0,
  "reduceOnly": false,
  "stopLoss": "56000.0",
  "takeProfit": "54600.0"
}
2025-03-11 15:46:33,129 - order_service - INFO - API 응답:
{
  "retCode": 0,
  "retMsg": "OK",
  "result": {
    "orderId": "c3db684f-287f-4677-a754-898293cef498",
    "orderLinkId": ""
  },
  "retExtInfo": {},
  "time": 1741675593230
}
2025-03-11 15:46:34,076 - telegram_bot.monitors.auto_analyzer - INFO - 초기 분석 실행 완료
2025-03-11 15:46:53,814 - telegram_bot.handlers.system_handler - INFO - check_permission 시작
2025-03-11 15:46:53,815 - telegram_bot.handlers.system_handler - INFO - check_permission: chat_id=583881676, is_admin=True
2025-03-11 15:46:53,817 - telegram_bot.handlers.system_handler - INFO - 봇 종료 요청 (chat_id: 583881676)
2025-03-11 15:46:55,426 - telegram_bot.handlers.system_handler - INFO - 봇 종료
2025-03-11 15:48:02,707 - main - INFO - 환경변수 및 설정 초기화 중...
2025-03-11 15:48:02,707 - main - INFO - Bybit 테스트넷 클라이언트 초기화 중...
2025-03-11 15:48:02,985 - main - INFO - 서비스 초기화 중...
2025-03-11 15:48:02,987 - main - INFO - 마켓 데이터 서비스 중...
2025-03-11 15:48:05,057 - services.market_data_service - INFO - 마켓 데이터 로드 완료
2025-03-11 15:48:05,332 - telegram_bot.bot - INFO - 텔레그램 설정 로드:
2025-03-11 15:48:05,339 - telegram_bot.bot - INFO - - admin_chat_id: 583881676
2025-03-11 15:48:05,339 - telegram_bot.bot - INFO - - alert_chat_ids: [-1002464784986]
2025-03-11 15:48:05,932 - telegram_bot.monitors.auto_analyzer - INFO - AutoAnalyzer 초기화 시작
2025-03-11 15:48:05,932 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 설정 시작
2025-03-11 15:48:05,932 - telegram_bot.monitors.auto_analyzer - INFO - 다음 실행 예정 시간: 2025-03-11 16:00:00
2025-03-11 15:48:05,932 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-03-11 15:48:05,932 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 설정 완료
2025-03-11 15:48:05,932 - telegram_bot.bot - INFO - 봇 초기화 시작...
2025-03-11 15:48:05,932 - services.trade_history_service - INFO - === 포지션 정보 초기화 시작 ===
2025-03-11 15:48:05,932 - services.trade_history_service - INFO - 조회 기간: 2024-12-11 ~ 2025-03-11
2025-03-11 15:48:05,940 - services.trade_store - INFO - 날짜 범위 조회: 20241211 ~ 20250311
2025-03-11 15:48:05,940 - services.trade_store - INFO - 날짜: 20241211, 포지션 수: 1건
2025-03-11 15:48:05,940 - services.trade_store - INFO - 날짜: 20241212, 포지션 수: 1건
2025-03-11 15:48:05,941 - services.trade_store - INFO - 날짜: 20241213, 포지션 수: 2건
2025-03-11 15:48:05,941 - services.trade_store - INFO - 날짜: 20241214, 포지션 수: 2건
2025-03-11 15:48:05,941 - services.trade_store - INFO - 날짜: 20241215, 포지션 수: 0건
2025-03-11 15:48:05,941 - services.trade_store - INFO - 날짜: 20241216, 포지션 수: 0건
2025-03-11 15:48:05,942 - services.trade_store - INFO - 날짜: 20241217, 포지션 수: 10건
2025-03-11 15:48:05,942 - services.trade_store - INFO - 날짜: 20241218, 포지션 수: 5건
2025-03-11 15:48:05,942 - services.trade_store - INFO - 날짜: 20241219, 포지션 수: 1건
2025-03-11 15:48:05,943 - services.trade_store - INFO - 날짜: 20241220, 포지션 수: 31건
2025-03-11 15:48:05,943 - services.trade_store - INFO - 날짜: 20241221, 포지션 수: 3건
2025-03-11 15:48:05,943 - services.trade_store - INFO - 날짜: 20241222, 포지션 수: 10건
2025-03-11 15:48:05,944 - services.trade_store - INFO - 날짜: 20241223, 포지션 수: 7건
2025-03-11 15:48:05,944 - services.trade_store - INFO - 날짜: 20241224, 포지션 수: 11건
2025-03-11 15:48:05,945 - services.trade_store - INFO - 날짜: 20241225, 포지션 수: 2건
2025-03-11 15:48:05,945 - services.trade_store - INFO - 날짜: 20241226, 포지션 수: 7건
2025-03-11 15:48:05,945 - services.trade_store - INFO - 날짜: 20241227, 포지션 수: 7건
2025-03-11 15:48:05,945 - services.trade_store - INFO - 날짜: 20241228, 포지션 수: 4건
2025-03-11 15:48:05,947 - services.trade_store - INFO - 날짜: 20241229, 포지션 수: 0건
2025-03-11 15:48:05,947 - services.trade_store - INFO - 날짜: 20241230, 포지션 수: 15건
2025-03-11 15:48:05,947 - services.trade_store - INFO - 날짜: 20241231, 포지션 수: 8건
2025-03-11 15:48:05,947 - services.trade_store - INFO - 날짜: 20250101, 포지션 수: 0건
2025-03-11 15:48:05,948 - services.trade_store - INFO - 날짜: 20250102, 포지션 수: 0건
2025-03-11 15:48:05,948 - services.trade_store - INFO - 날짜: 20250103, 포지션 수: 0건
2025-03-11 15:48:05,948 - services.trade_store - INFO - 날짜: 20250104, 포지션 수: 0건
2025-03-11 15:48:05,948 - services.trade_store - INFO - 날짜: 20250105, 포지션 수: 0건
2025-03-11 15:48:05,948 - services.trade_store - INFO - 날짜: 20250106, 포지션 수: 0건
2025-03-11 15:48:05,948 - services.trade_store - INFO - 날짜: 20250107, 포지션 수: 0건
2025-03-11 15:48:05,948 - services.trade_store - INFO - 날짜: 20250108, 포지션 수: 0건
2025-03-11 15:48:05,949 - services.trade_store - INFO - 날짜: 20250109, 포지션 수: 0건
2025-03-11 15:48:05,949 - services.trade_store - INFO - 날짜: 20250110, 포지션 수: 0건
2025-03-11 15:48:05,949 - services.trade_store - INFO - 날짜: 20250111, 포지션 수: 0건
2025-03-11 15:48:05,950 - services.trade_store - INFO - 날짜: 20250112, 포지션 수: 0건
2025-03-11 15:48:05,950 - services.trade_store - INFO - 날짜: 20250113, 포지션 수: 0건
2025-03-11 15:48:05,950 - services.trade_store - INFO - 날짜: 20250114, 포지션 수: 0건
2025-03-11 15:48:05,951 - services.trade_store - INFO - 날짜: 20250115, 포지션 수: 0건
2025-03-11 15:48:05,951 - services.trade_store - INFO - 날짜: 20250116, 포지션 수: 0건
2025-03-11 15:48:05,951 - services.trade_store - INFO - 날짜: 20250117, 포지션 수: 0건
2025-03-11 15:48:05,951 - services.trade_store - INFO - 날짜: 20250118, 포지션 수: 0건
2025-03-11 15:48:05,951 - services.trade_store - INFO - 날짜: 20250119, 포지션 수: 0건
2025-03-11 15:48:05,951 - services.trade_store - INFO - 날짜: 20250120, 포지션 수: 0건
2025-03-11 15:48:05,951 - services.trade_store - INFO - 날짜: 20250121, 포지션 수: 0건
2025-03-11 15:48:05,951 - services.trade_store - INFO - 날짜: 20250122, 포지션 수: 0건
2025-03-11 15:48:05,952 - services.trade_store - INFO - 날짜: 20250123, 포지션 수: 0건
2025-03-11 15:48:05,952 - services.trade_store - INFO - 날짜: 20250124, 포지션 수: 0건
2025-03-11 15:48:05,952 - services.trade_store - INFO - 날짜: 20250125, 포지션 수: 0건
2025-03-11 15:48:05,952 - services.trade_store - INFO - 날짜: 20250126, 포지션 수: 0건
2025-03-11 15:48:05,952 - services.trade_store - INFO - 날짜: 20250127, 포지션 수: 0건
2025-03-11 15:48:05,952 - services.trade_store - INFO - 날짜: 20250128, 포지션 수: 0건
2025-03-11 15:48:05,952 - services.trade_store - INFO - 날짜: 20250129, 포지션 수: 0건
2025-03-11 15:48:05,952 - services.trade_store - INFO - 날짜: 20250130, 포지션 수: 0건
2025-03-11 15:48:05,952 - services.trade_store - INFO - 날짜: 20250131, 포지션 수: 0건
2025-03-11 15:48:05,953 - services.trade_store - INFO - 날짜: 20250201, 포지션 수: 0건
2025-03-11 15:48:05,953 - services.trade_store - INFO - 날짜: 20250202, 포지션 수: 0건
2025-03-11 15:48:05,953 - services.trade_store - INFO - 날짜: 20250203, 포지션 수: 0건
2025-03-11 15:48:05,953 - services.trade_store - INFO - 날짜: 20250204, 포지션 수: 0건
2025-03-11 15:48:05,953 - services.trade_store - INFO - 날짜: 20250205, 포지션 수: 0건
2025-03-11 15:48:05,953 - services.trade_store - INFO - 날짜: 20250206, 포지션 수: 0건
2025-03-11 15:48:05,953 - services.trade_store - INFO - 날짜: 20250207, 포지션 수: 0건
2025-03-11 15:48:05,953 - services.trade_store - INFO - 날짜: 20250208, 포지션 수: 0건
2025-03-11 15:48:05,953 - services.trade_store - INFO - 날짜: 20250209, 포지션 수: 0건
2025-03-11 15:48:05,954 - services.trade_store - INFO - 날짜: 20250210, 포지션 수: 0건
2025-03-11 15:48:05,954 - services.trade_store - INFO - 날짜: 20250211, 포지션 수: 0건
2025-03-11 15:48:05,954 - services.trade_store - INFO - 날짜: 20250212, 포지션 수: 0건
2025-03-11 15:48:05,954 - services.trade_store - INFO - 날짜: 20250213, 포지션 수: 0건
2025-03-11 15:48:05,954 - services.trade_store - INFO - 날짜: 20250214, 포지션 수: 2건
2025-03-11 15:48:05,954 - services.trade_store - INFO - 날짜: 20250215, 포지션 수: 2건
2025-03-11 15:48:05,954 - services.trade_store - INFO - 날짜: 20250216, 포지션 수: 0건
2025-03-11 15:48:05,956 - services.trade_store - INFO - 날짜: 20250217, 포지션 수: 2건
2025-03-11 15:48:05,956 - services.trade_store - INFO - 날짜: 20250218, 포지션 수: 0건
2025-03-11 15:48:05,956 - services.trade_store - INFO - 날짜: 20250219, 포지션 수: 0건
2025-03-11 15:48:05,956 - services.trade_store - INFO - 날짜: 20250220, 포지션 수: 0건
2025-03-11 15:48:05,956 - services.trade_store - INFO - 날짜: 20250221, 포지션 수: 2건
2025-03-11 15:48:05,957 - services.trade_store - INFO - 날짜: 20250222, 포지션 수: 0건
2025-03-11 15:48:05,957 - services.trade_store - INFO - 날짜: 20250223, 포지션 수: 0건
2025-03-11 15:48:05,957 - services.trade_store - INFO - 날짜: 20250224, 포지션 수: 0건
2025-03-11 15:48:05,957 - services.trade_store - INFO - 날짜: 20250225, 포지션 수: 0건
2025-03-11 15:48:05,957 - services.trade_store - INFO - 날짜: 20250226, 포지션 수: 0건
2025-03-11 15:48:05,957 - services.trade_store - INFO - 날짜: 20250227, 포지션 수: 0건
2025-03-11 15:48:05,957 - services.trade_store - INFO - 날짜: 20250228, 포지션 수: 0건
2025-03-11 15:48:05,957 - services.trade_store - INFO - 날짜: 20250301, 포지션 수: 0건
2025-03-11 15:48:05,958 - services.trade_store - INFO - 날짜: 20250302, 포지션 수: 0건
2025-03-11 15:48:05,958 - services.trade_store - INFO - 날짜: 20250303, 포지션 수: 0건
2025-03-11 15:48:05,958 - services.trade_store - INFO - 날짜: 20250304, 포지션 수: 0건
2025-03-11 15:48:05,958 - services.trade_store - INFO - 날짜: 20250305, 포지션 수: 0건
2025-03-11 15:48:05,958 - services.trade_store - INFO - 날짜: 20250306, 포지션 수: 0건
2025-03-11 15:48:05,958 - services.trade_store - INFO - 날짜: 20250307, 포지션 수: 0건
2025-03-11 15:48:05,958 - services.trade_store - INFO - 날짜: 20250308, 포지션 수: 0건
2025-03-11 15:48:05,958 - services.trade_store - INFO - 날짜: 20250309, 포지션 수: 0건
2025-03-11 15:48:05,958 - services.trade_store - INFO - 날짜: 20250310, 포지션 수: 0건
2025-03-11 15:48:05,958 - services.trade_store - INFO - 날짜: 20250311, 포지션 수: 0건
2025-03-11 15:48:05,959 - services.trade_store - INFO - 총 135건의 포지션 데이터 로드됨
2025-03-11 15:48:05,959 - services.trade_history_service - INFO - 기존 데이터: 135건
2025-03-11 15:48:06,527 - telegram_bot.bot - INFO - 명령어 핸들러 등록 시작...
2025-03-11 15:48:06,533 - telegram_bot.bot - INFO - 명령어 핸들러 등록 완료
2025-03-11 15:48:06,533 - telegram_bot.bot - INFO - 봇 초기화 완료, 시작 준비 중...
2025-03-11 15:48:06,533 - telegram_bot.bot - INFO - 봇 시작 시도...
2025-03-11 15:48:06,533 - telegram_bot.bot - INFO - === 봇 시작 시도 ===
2025-03-11 15:48:07,648 - apscheduler.scheduler - INFO - Scheduler started
2025-03-11 15:48:07,649 - telegram.ext.Application - INFO - Application started
2025-03-11 15:48:07,650 - telegram_bot.bot - INFO - 🤖 바이빗 트레이딩 봇이 시작되었습니다
2025-03-11 15:48:08,626 - telegram_bot.monitors.auto_analyzer - INFO - AutoAnalyzer 시작 요청됨
2025-03-11 15:48:08,627 - apscheduler.scheduler - INFO - Added job "AutoAnalyzer._scheduled_analysis" to job store "default"
2025-03-11 15:48:08,628 - apscheduler.scheduler - INFO - Scheduler started
2025-03-11 15:48:08,628 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 시작됨. 다음 실행 시간: 2025-03-11 16:00:00+09:00
2025-03-11 15:48:08,628 - telegram_bot.monitors.auto_analyzer - INFO - 초기 분석 실행 시작
2025-03-11 15:48:08,628 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄된 분석 시작 - 2025-03-11 15:48:08.628825
2025-03-11 15:48:08,628 - telegram_bot.monitors.auto_analyzer - INFO - 🔄' 1시간봉 분석 시작 (자동) ...
2025-03-11 15:48:08,629 - services.market_data_service - INFO - OHLCV 데이터 조회 시작 - 심볼: BTCUSDT, 시간대: 1h
2025-03-11 15:48:09,046 - ai.gpt_analyzer - INFO - 계산된 지표: ['open', 'high', 'low', 'close', 'volume', 'price_change_24h', 'volume_change_24h', 'rsi', 'macd', 'macd_signal', 'bb_upper', 'bb_middle', 'bb_lower', 'sma_10', 'sma_30', 'adx', 'di_plus', 'di_minus', 'trend', 'trend_strength', 'divergence_type', 'divergence_desc']
2025-03-11 15:48:09,046 - ai.gpt_analyzer - INFO - 시장 데이터: {'symbol': 'BTCUSDT', 'last_price': 55679.4, 'bid': 55679.2, 'ask': 55878.1, 'volume': 827097.081, 'timestamp': None}
2025-03-11 15:48:09,059 - ai.gpt_client - INFO - GPT API 호출 시작 (캐시 사용: False)
2025-03-11 15:48:09,059 - ai.gpt_client - INFO - 캐시 사용하지 않음 - 실제 API 호출
2025-03-11 15:48:10,986 - telegram_bot.formatters.storage_formatter - INFO - 1h 분석 결과 저장 완료: C:\Users\oasis\Aibybit_2\src\data\analysis\analysis_1h.json
2025-03-11 15:48:11,946 - telegram_bot.monitors.auto_analyzer - INFO - 분석 결과 position_suggestion: SELL
2025-03-11 15:48:11,946 - telegram_bot.monitors.auto_analyzer - INFO - 매매 신호 감지: SELL
2025-03-11 15:48:11,946 - order_service - INFO - 매매 신호 실행: {'position_suggestion': 'SELL', 'leverage': 5, 'position_size': 10, 'entry_price': 55679.4, 'stop_loss': 55779.4, 'take_profit1': 54679.4, 'take_profit2': 53679.4, 'reason': '하락 추세 및 부정적인 지표'}
2025-03-11 15:48:11,946 - order_service - INFO - 주문 시도: {'symbol': 'BTCUSDT', 'side': 'Sell', 'leverage': 5, 'position_size': 10, 'entry_price': 55679.4, 'stop_loss': 55779.4, 'take_profit': 54679.4, 'is_btc_unit': False}
2025-03-11 15:48:11,946 - order_service - INFO - 주문 상세 정보: {
  "symbol": "BTCUSDT",
  "side": "Sell",
  "leverage": 5,
  "position_size": 10,
  "entry_price": 55679.4,
  "stop_loss": 55779.4,
  "take_profit": 54679.4,
  "is_btc_unit": false
}
2025-03-11 15:48:11,946 - order_service - INFO - 주문 시도: {'symbol': 'BTCUSDT', 'side': 'Sell', 'leverage': 5, 'position_size': 10, 'entry_price': 55679.4, 'stop_loss': 55779.4, 'take_profit': 54679.4, 'is_btc_unit': False}
2025-03-11 15:48:12,413 - order_service - INFO - 현재 포지션: {'symbol': 'BTC/USDT:USDT', 'side': 'Short', 'size': 0.478, 'leverage': 5, 'entryPrice': 55788.18791621, 'markPrice': 55745.69, 'unrealisedPnl': 20.31400395, 'stopLoss': 0.0, 'takeProfit': 0.0}
2025-03-11 15:48:12,413 - order_service - INFO - 레버리지 차이가 작음(0) - 크기만 조정
2025-03-11 15:48:12,598 - exchange.bybit_client - INFO - USDT 잔고 - 총자산: $53,212.16, 가용잔고: $0.00, 사용중: $0.00
2025-03-11 15:48:12,598 - order_service - INFO - 가용 잔고: $0.0, 총 자산: $53212.16495, 사용중: $0.0
2025-03-11 15:48:12,931 - order_service - INFO - 계산 입력값 - 총자산: $53212.16495, 미실현손익: $0.0, 비율: 10%, 레버리지: 5배, 진입가: $55679.4
2025-03-11 15:48:12,932 - order_service - INFO - 순수 자산: $53212.16495
2025-03-11 15:48:12,933 - order_service - INFO - 포지션 가치(USDT): $26606.082475000003
2025-03-11 15:48:12,933 - order_service - INFO - 계산된 BTC 수량: 0.4778442740941893
2025-03-11 15:48:12,935 - order_service - INFO - 최종 BTC 수량(반올림): 0.478
2025-03-11 15:48:13,126 - order_service - INFO - 주문 상세 정보: {
  "symbol": "BTCUSDT",
  "side": "Sell",
  "leverage": 5,
  "position_size": 0.0,
  "entry_price": 55679.4,
  "stop_loss": 55779.4,
  "take_profit": 54679.4,
  "is_btc_unit": false,
  "is_reduce_only": false,
  "needs_sl_tp": true
}
2025-03-11 15:48:13,311 - exchange.bybit_client - INFO - USDT 잔고 - 총자산: $53,212.16, 가용잔고: $0.00, 사용중: $0.00
2025-03-11 15:48:13,311 - order_service - INFO - USDT 잔고 - 총자산: $53212.16495, 가용잔고: $0.0, 사용중: $0.0
2025-03-11 15:48:13,311 - order_service - INFO - 주문 실행 시도: {'category': 'linear', 'symbol': 'BTCUSDT', 'side': 'Sell', 'orderType': 'Limit', 'qty': '0.000', 'price': '55679.4', 'timeInForce': 'GTC', 'positionIdx': 0, 'reduceOnly': False, 'stopLoss': '55779.4', 'takeProfit': '54679.4'}
2025-03-11 15:48:13,429 - exchange.bybit_client - INFO - 서버 시간 동기화 완료: server_time=1741675693000, local_time=1741675693429, offset=-429ms
2025-03-11 15:48:13,568 - order_service - INFO - === 주문 요청 및 응답 상세 ===
2025-03-11 15:48:13,568 - order_service - INFO - 요청 파라미터:
{
  "category": "linear",
  "symbol": "BTCUSDT",
  "side": "Sell",
  "orderType": "Limit",
  "qty": "0.000",
  "price": "55679.4",
  "timeInForce": "GTC",
  "positionIdx": 0,
  "reduceOnly": false,
  "stopLoss": "55779.4",
  "takeProfit": "54679.4"
}
2025-03-11 15:48:13,568 - order_service - INFO - API 응답:
{
  "retCode": 10001,
  "retMsg": "The number of contracts exceeds minimum limit allowed",
  "result": {},
  "retExtInfo": {},
  "time": 1741675693665
}
2025-03-11 15:48:14,547 - telegram_bot.monitors.auto_analyzer - INFO - 초기 분석 실행 완료
2025-03-11 15:48:28,496 - telegram_bot.handlers.system_handler - INFO - check_permission 시작
2025-03-11 15:48:28,496 - telegram_bot.handlers.system_handler - INFO - check_permission: chat_id=583881676, is_admin=True
2025-03-11 15:48:28,496 - telegram_bot.handlers.system_handler - INFO - 봇 종료 요청 (chat_id: 583881676)
2025-03-11 15:48:29,984 - telegram_bot.bot - INFO - 봇 종료 시작...
2025-03-11 15:48:29,984 - telegram_bot.bot - ERROR - 봇 종료 중 오류: 'bool' object is not callable
2025-03-11 15:48:29,988 - telegram_bot.bot - ERROR - Traceback (most recent call last):
  File "C:\Users\oasis\Aibybit_2\src\telegram_bot\bot.py", line 266, in stop
    if self.auto_analyzer.is_running():
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: 'bool' object is not callable

2025-03-11 15:48:29,988 - telegram_bot.bot - INFO - 봇 실행이 취소되었습니다
2025-03-11 15:48:30,056 - asyncio - ERROR - Task exception was never retrieved
future: <Task finished name='Application:7822401030:update_fetcher' coro=<Application._update_fetcher() done, defined at C:\Users\oasis\Aibybit_2\.venv\Lib\site-packages\telegram\ext\_application.py:1145> exception=SystemExit(0)>
Traceback (most recent call last):
  File "C:\Users\oasis\Aibybit_2\src\main.py", line 109, in <module>
    asyncio.run(main())
  File "C:\Program Files\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\asyncio\base_events.py", line 640, in run_until_complete
    self.run_forever()
  File "C:\Program Files\Python311\Lib\asyncio\base_events.py", line 607, in run_forever
    self._run_once()
  File "C:\Program Files\Python311\Lib\asyncio\base_events.py", line 1922, in _run_once
    handle._run()
  File "C:\Program Files\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\oasis\Aibybit_2\.venv\Lib\site-packages\telegram\ext\_application.py", line 1170, in _update_fetcher
    await self.__process_update_wrapper(update)
  File "C:\Users\oasis\Aibybit_2\.venv\Lib\site-packages\telegram\ext\_application.py", line 1182, in __process_update_wrapper
    await self._update_processor.process_update(update, self.process_update(update))
  File "C:\Users\oasis\Aibybit_2\.venv\Lib\site-packages\telegram\ext\_baseupdateprocessor.py", line 151, in process_update
    await self.do_process_update(update, coroutine)
  File "C:\Users\oasis\Aibybit_2\.venv\Lib\site-packages\telegram\ext\_baseupdateprocessor.py", line 176, in do_process_update
    await coroutine
  File "C:\Users\oasis\Aibybit_2\.venv\Lib\site-packages\telegram\ext\_application.py", line 1234, in process_update
    await coroutine
  File "C:\Users\oasis\Aibybit_2\.venv\Lib\site-packages\telegram\ext\_basehandler.py", line 157, in handle_update
    return await self.callback(update, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\oasis\Aibybit_2\src\telegram_bot\handlers\system_handler.py", line 88, in handle_stop
    sys.exit(0)
SystemExit: 0
2025-03-11 15:49:43,298 - main - INFO - 환경변수 및 설정 초기화 중...
2025-03-11 15:49:43,298 - main - INFO - Bybit 테스트넷 클라이언트 초기화 중...
2025-03-11 15:49:43,549 - main - INFO - 서비스 초기화 중...
2025-03-11 15:49:43,549 - main - INFO - 마켓 데이터 서비스 중...
2025-03-11 15:49:45,277 - services.market_data_service - INFO - 마켓 데이터 로드 완료
2025-03-11 15:49:45,523 - telegram_bot.bot - INFO - 텔레그램 설정 로드:
2025-03-11 15:49:45,523 - telegram_bot.bot - INFO - - admin_chat_id: 583881676
2025-03-11 15:49:45,523 - telegram_bot.bot - INFO - - alert_chat_ids: [-1002464784986]
2025-03-11 15:49:45,997 - telegram_bot.monitors.auto_analyzer - INFO - AutoAnalyzer 초기화 시작
2025-03-11 15:49:45,998 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 설정 시작
2025-03-11 15:49:45,999 - telegram_bot.monitors.auto_analyzer - INFO - 다음 실행 예정 시간: 2025-03-11 16:00:00
2025-03-11 15:49:46,000 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-03-11 15:49:46,001 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 설정 완료
2025-03-11 15:49:46,001 - telegram_bot.bot - INFO - 봇 초기화 시작...
2025-03-11 15:49:46,001 - services.trade_history_service - INFO - === 포지션 정보 초기화 시작 ===
2025-03-11 15:49:46,001 - services.trade_history_service - INFO - 조회 기간: 2024-12-11 ~ 2025-03-11
2025-03-11 15:49:46,002 - services.trade_store - INFO - 날짜 범위 조회: 20241211 ~ 20250311
2025-03-11 15:49:46,002 - services.trade_store - INFO - 날짜: 20241211, 포지션 수: 1건
2025-03-11 15:49:46,003 - services.trade_store - INFO - 날짜: 20241212, 포지션 수: 1건
2025-03-11 15:49:46,003 - services.trade_store - INFO - 날짜: 20241213, 포지션 수: 2건
2025-03-11 15:49:46,003 - services.trade_store - INFO - 날짜: 20241214, 포지션 수: 2건
2025-03-11 15:49:46,003 - services.trade_store - INFO - 날짜: 20241215, 포지션 수: 0건
2025-03-11 15:49:46,003 - services.trade_store - INFO - 날짜: 20241216, 포지션 수: 0건
2025-03-11 15:49:46,005 - services.trade_store - INFO - 날짜: 20241217, 포지션 수: 10건
2025-03-11 15:49:46,005 - services.trade_store - INFO - 날짜: 20241218, 포지션 수: 5건
2025-03-11 15:49:46,005 - services.trade_store - INFO - 날짜: 20241219, 포지션 수: 1건
2025-03-11 15:49:46,006 - services.trade_store - INFO - 날짜: 20241220, 포지션 수: 31건
2025-03-11 15:49:46,006 - services.trade_store - INFO - 날짜: 20241221, 포지션 수: 3건
2025-03-11 15:49:46,006 - services.trade_store - INFO - 날짜: 20241222, 포지션 수: 10건
2025-03-11 15:49:46,007 - services.trade_store - INFO - 날짜: 20241223, 포지션 수: 7건
2025-03-11 15:49:46,007 - services.trade_store - INFO - 날짜: 20241224, 포지션 수: 11건
2025-03-11 15:49:46,007 - services.trade_store - INFO - 날짜: 20241225, 포지션 수: 2건
2025-03-11 15:49:46,008 - services.trade_store - INFO - 날짜: 20241226, 포지션 수: 7건
2025-03-11 15:49:46,008 - services.trade_store - INFO - 날짜: 20241227, 포지션 수: 7건
2025-03-11 15:49:46,009 - services.trade_store - INFO - 날짜: 20241228, 포지션 수: 4건
2025-03-11 15:49:46,009 - services.trade_store - INFO - 날짜: 20241229, 포지션 수: 0건
2025-03-11 15:49:46,009 - services.trade_store - INFO - 날짜: 20241230, 포지션 수: 15건
2025-03-11 15:49:46,010 - services.trade_store - INFO - 날짜: 20241231, 포지션 수: 8건
2025-03-11 15:49:46,011 - services.trade_store - INFO - 날짜: 20250101, 포지션 수: 0건
2025-03-11 15:49:46,011 - services.trade_store - INFO - 날짜: 20250102, 포지션 수: 0건
2025-03-11 15:49:46,011 - services.trade_store - INFO - 날짜: 20250103, 포지션 수: 0건
2025-03-11 15:49:46,012 - services.trade_store - INFO - 날짜: 20250104, 포지션 수: 0건
2025-03-11 15:49:46,012 - services.trade_store - INFO - 날짜: 20250105, 포지션 수: 0건
2025-03-11 15:49:46,013 - services.trade_store - INFO - 날짜: 20250106, 포지션 수: 0건
2025-03-11 15:49:46,013 - services.trade_store - INFO - 날짜: 20250107, 포지션 수: 0건
2025-03-11 15:49:46,013 - services.trade_store - INFO - 날짜: 20250108, 포지션 수: 0건
2025-03-11 15:49:46,013 - services.trade_store - INFO - 날짜: 20250109, 포지션 수: 0건
2025-03-11 15:49:46,013 - services.trade_store - INFO - 날짜: 20250110, 포지션 수: 0건
2025-03-11 15:49:46,013 - services.trade_store - INFO - 날짜: 20250111, 포지션 수: 0건
2025-03-11 15:49:46,013 - services.trade_store - INFO - 날짜: 20250112, 포지션 수: 0건
2025-03-11 15:49:46,015 - services.trade_store - INFO - 날짜: 20250113, 포지션 수: 0건
2025-03-11 15:49:46,015 - services.trade_store - INFO - 날짜: 20250114, 포지션 수: 0건
2025-03-11 15:49:46,015 - services.trade_store - INFO - 날짜: 20250115, 포지션 수: 0건
2025-03-11 15:49:46,015 - services.trade_store - INFO - 날짜: 20250116, 포지션 수: 0건
2025-03-11 15:49:46,016 - services.trade_store - INFO - 날짜: 20250117, 포지션 수: 0건
2025-03-11 15:49:46,016 - services.trade_store - INFO - 날짜: 20250118, 포지션 수: 0건
2025-03-11 15:49:46,016 - services.trade_store - INFO - 날짜: 20250119, 포지션 수: 0건
2025-03-11 15:49:46,016 - services.trade_store - INFO - 날짜: 20250120, 포지션 수: 0건
2025-03-11 15:49:46,017 - services.trade_store - INFO - 날짜: 20250121, 포지션 수: 0건
2025-03-11 15:49:46,017 - services.trade_store - INFO - 날짜: 20250122, 포지션 수: 0건
2025-03-11 15:49:46,017 - services.trade_store - INFO - 날짜: 20250123, 포지션 수: 0건
2025-03-11 15:49:46,017 - services.trade_store - INFO - 날짜: 20250124, 포지션 수: 0건
2025-03-11 15:49:46,018 - services.trade_store - INFO - 날짜: 20250125, 포지션 수: 0건
2025-03-11 15:49:46,018 - services.trade_store - INFO - 날짜: 20250126, 포지션 수: 0건
2025-03-11 15:49:46,018 - services.trade_store - INFO - 날짜: 20250127, 포지션 수: 0건
2025-03-11 15:49:46,018 - services.trade_store - INFO - 날짜: 20250128, 포지션 수: 0건
2025-03-11 15:49:46,018 - services.trade_store - INFO - 날짜: 20250129, 포지션 수: 0건
2025-03-11 15:49:46,018 - services.trade_store - INFO - 날짜: 20250130, 포지션 수: 0건
2025-03-11 15:49:46,019 - services.trade_store - INFO - 날짜: 20250131, 포지션 수: 0건
2025-03-11 15:49:46,019 - services.trade_store - INFO - 날짜: 20250201, 포지션 수: 0건
2025-03-11 15:49:46,024 - services.trade_store - INFO - 날짜: 20250202, 포지션 수: 0건
2025-03-11 15:49:46,025 - services.trade_store - INFO - 날짜: 20250203, 포지션 수: 0건
2025-03-11 15:49:46,025 - services.trade_store - INFO - 날짜: 20250204, 포지션 수: 0건
2025-03-11 15:49:46,026 - services.trade_store - INFO - 날짜: 20250205, 포지션 수: 0건
2025-03-11 15:49:46,026 - services.trade_store - INFO - 날짜: 20250206, 포지션 수: 0건
2025-03-11 15:49:46,026 - services.trade_store - INFO - 날짜: 20250207, 포지션 수: 0건
2025-03-11 15:49:46,026 - services.trade_store - INFO - 날짜: 20250208, 포지션 수: 0건
2025-03-11 15:49:46,027 - services.trade_store - INFO - 날짜: 20250209, 포지션 수: 0건
2025-03-11 15:49:46,027 - services.trade_store - INFO - 날짜: 20250210, 포지션 수: 0건
2025-03-11 15:49:46,027 - services.trade_store - INFO - 날짜: 20250211, 포지션 수: 0건
2025-03-11 15:49:46,027 - services.trade_store - INFO - 날짜: 20250212, 포지션 수: 0건
2025-03-11 15:49:46,027 - services.trade_store - INFO - 날짜: 20250213, 포지션 수: 0건
2025-03-11 15:49:46,027 - services.trade_store - INFO - 날짜: 20250214, 포지션 수: 2건
2025-03-11 15:49:46,027 - services.trade_store - INFO - 날짜: 20250215, 포지션 수: 2건
2025-03-11 15:49:46,027 - services.trade_store - INFO - 날짜: 20250216, 포지션 수: 0건
2025-03-11 15:49:46,027 - services.trade_store - INFO - 날짜: 20250217, 포지션 수: 2건
2025-03-11 15:49:46,027 - services.trade_store - INFO - 날짜: 20250218, 포지션 수: 0건
2025-03-11 15:49:46,027 - services.trade_store - INFO - 날짜: 20250219, 포지션 수: 0건
2025-03-11 15:49:46,027 - services.trade_store - INFO - 날짜: 20250220, 포지션 수: 0건
2025-03-11 15:49:46,027 - services.trade_store - INFO - 날짜: 20250221, 포지션 수: 2건
2025-03-11 15:49:46,027 - services.trade_store - INFO - 날짜: 20250222, 포지션 수: 0건
2025-03-11 15:49:46,027 - services.trade_store - INFO - 날짜: 20250223, 포지션 수: 0건
2025-03-11 15:49:46,031 - services.trade_store - INFO - 날짜: 20250224, 포지션 수: 0건
2025-03-11 15:49:46,031 - services.trade_store - INFO - 날짜: 20250225, 포지션 수: 0건
2025-03-11 15:49:46,031 - services.trade_store - INFO - 날짜: 20250226, 포지션 수: 0건
2025-03-11 15:49:46,032 - services.trade_store - INFO - 날짜: 20250227, 포지션 수: 0건
2025-03-11 15:49:46,032 - services.trade_store - INFO - 날짜: 20250228, 포지션 수: 0건
2025-03-11 15:49:46,032 - services.trade_store - INFO - 날짜: 20250301, 포지션 수: 0건
2025-03-11 15:49:46,032 - services.trade_store - INFO - 날짜: 20250302, 포지션 수: 0건
2025-03-11 15:49:46,033 - services.trade_store - INFO - 날짜: 20250303, 포지션 수: 0건
2025-03-11 15:49:46,033 - services.trade_store - INFO - 날짜: 20250304, 포지션 수: 0건
2025-03-11 15:49:46,033 - services.trade_store - INFO - 날짜: 20250305, 포지션 수: 0건
2025-03-11 15:49:46,034 - services.trade_store - INFO - 날짜: 20250306, 포지션 수: 0건
2025-03-11 15:49:46,034 - services.trade_store - INFO - 날짜: 20250307, 포지션 수: 0건
2025-03-11 15:49:46,034 - services.trade_store - INFO - 날짜: 20250308, 포지션 수: 0건
2025-03-11 15:49:46,034 - services.trade_store - INFO - 날짜: 20250309, 포지션 수: 0건
2025-03-11 15:49:46,034 - services.trade_store - INFO - 날짜: 20250310, 포지션 수: 0건
2025-03-11 15:49:46,035 - services.trade_store - INFO - 날짜: 20250311, 포지션 수: 0건
2025-03-11 15:49:46,035 - services.trade_store - INFO - 총 135건의 포지션 데이터 로드됨
2025-03-11 15:49:46,035 - services.trade_history_service - INFO - 기존 데이터: 135건
2025-03-11 15:49:46,488 - telegram_bot.bot - INFO - 명령어 핸들러 등록 시작...
2025-03-11 15:49:46,488 - telegram_bot.bot - INFO - 명령어 핸들러 등록 완료
2025-03-11 15:49:46,488 - telegram_bot.bot - INFO - 봇 초기화 완료, 시작 준비 중...
2025-03-11 15:49:46,488 - telegram_bot.bot - INFO - 봇 시작 시도...
2025-03-11 15:49:46,488 - telegram_bot.bot - INFO - === 봇 시작 시도 ===
2025-03-11 15:49:47,653 - apscheduler.scheduler - INFO - Scheduler started
2025-03-11 15:49:47,654 - telegram.ext.Application - INFO - Application started
2025-03-11 15:49:47,655 - telegram_bot.bot - INFO - 🤖 바이빗 트레이딩 봇이 시작되었습니다
2025-03-11 15:49:48,736 - telegram_bot.monitors.auto_analyzer - INFO - AutoAnalyzer 시작 요청됨
2025-03-11 15:49:48,736 - apscheduler.scheduler - INFO - Added job "AutoAnalyzer._scheduled_analysis" to job store "default"
2025-03-11 15:49:48,736 - apscheduler.scheduler - INFO - Scheduler started
2025-03-11 15:49:48,736 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 시작됨. 다음 실행 시간: 2025-03-11 16:00:00+09:00
2025-03-11 15:49:48,736 - telegram_bot.monitors.auto_analyzer - INFO - 초기 분석 실행 시작
2025-03-11 15:49:48,736 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄된 분석 시작 - 2025-03-11 15:49:48.736202
2025-03-11 15:49:48,736 - telegram_bot.monitors.auto_analyzer - INFO - 🔄' 1시간봉 분석 시작 (자동) ...
2025-03-11 15:49:48,736 - services.market_data_service - INFO - OHLCV 데이터 조회 시작 - 심볼: BTCUSDT, 시간대: 1h
2025-03-11 15:49:49,013 - ai.gpt_analyzer - INFO - 계산된 지표: ['open', 'high', 'low', 'close', 'volume', 'price_change_24h', 'volume_change_24h', 'rsi', 'macd', 'macd_signal', 'bb_upper', 'bb_middle', 'bb_lower', 'sma_10', 'sma_30', 'adx', 'di_plus', 'di_minus', 'trend', 'trend_strength', 'divergence_type', 'divergence_desc']
2025-03-11 15:49:49,014 - ai.gpt_analyzer - INFO - 시장 데이터: {'symbol': 'BTCUSDT', 'last_price': 55888.1, 'bid': 55800.0, 'ask': 55888.1, 'volume': 827096.056, 'timestamp': None}
2025-03-11 15:49:49,015 - ai.gpt_client - INFO - GPT API 호출 시작 (캐시 사용: False)
2025-03-11 15:49:49,015 - ai.gpt_client - INFO - 캐시 사용하지 않음 - 실제 API 호출
2025-03-11 15:49:52,133 - telegram_bot.formatters.storage_formatter - INFO - 1h 분석 결과 저장 완료: C:\Users\oasis\Aibybit_2\src\data\analysis\analysis_1h.json
2025-03-11 15:49:53,151 - telegram_bot.monitors.auto_analyzer - INFO - 분석 결과 position_suggestion: SELL
2025-03-11 15:49:53,151 - telegram_bot.monitors.auto_analyzer - INFO - 매매 신호 감지: SELL
2025-03-11 15:49:53,151 - order_service - INFO - 매매 신호 실행: {'position_suggestion': 'SELL', 'leverage': 5, 'position_size': 10, 'entry_price': 55888.1, 'stop_loss': 56000.0, 'take_profit1': 55000.0, 'take_profit2': 54000.0, 'reason': '하락 추세 및 부정적인 지표'}
2025-03-11 15:49:53,151 - order_service - INFO - 주문 시도: {'symbol': 'BTCUSDT', 'side': 'Sell', 'leverage': 5, 'position_size': 10, 'entry_price': 55888.1, 'stop_loss': 56000.0, 'take_profit': 55000.0, 'is_btc_unit': False}
2025-03-11 15:49:53,166 - order_service - INFO - 주문 상세 정보: {
  "symbol": "BTCUSDT",
  "side": "Sell",
  "leverage": 5,
  "position_size": 10,
  "entry_price": 55888.1,
  "stop_loss": 56000.0,
  "take_profit": 55000.0,
  "is_btc_unit": false
}
2025-03-11 15:49:53,167 - order_service - INFO - 주문 시도: {'symbol': 'BTCUSDT', 'side': 'Sell', 'leverage': 5, 'position_size': 10, 'entry_price': 55888.1, 'stop_loss': 56000.0, 'take_profit': 55000.0, 'is_btc_unit': False}
2025-03-11 15:49:53,673 - order_service - INFO - 현재 포지션: {'symbol': 'BTC/USDT:USDT', 'side': 'Short', 'size': 0.478, 'leverage': 5, 'entryPrice': 55788.18791621, 'markPrice': 55888.1, 'unrealisedPnl': -47.75797605, 'stopLoss': 0.0, 'takeProfit': 0.0}
2025-03-11 15:49:53,673 - order_service - INFO - 레버리지 차이가 작음(0) - 크기만 조정
2025-03-11 15:49:53,871 - exchange.bybit_client - INFO - USDT 잔고 - 총자산: $53,212.16, 가용잔고: $0.00, 사용중: $0.00
2025-03-11 15:49:53,871 - order_service - INFO - 가용 잔고: $0.0, 총 자산: $53212.16495, 사용중: $0.0
2025-03-11 15:49:54,053 - order_service - INFO - 계산 입력값 - 총자산: $53212.16495, 미실현손익: $0.0, 비율: 10%, 레버리지: 5배, 진입가: $55888.1
2025-03-11 15:49:54,054 - order_service - INFO - 순수 자산: $53212.16495
2025-03-11 15:49:54,054 - order_service - INFO - 포지션 가치(USDT): $26606.082475000003
2025-03-11 15:49:54,055 - order_service - INFO - 계산된 BTC 수량: 0.47605988528863935
2025-03-11 15:49:54,055 - order_service - INFO - 최종 BTC 수량(반올림): 0.476
2025-03-11 15:49:54,234 - order_service - INFO - 주문 상세 정보: {
  "symbol": "BTCUSDT",
  "side": "Buy",
  "leverage": 5,
  "position_size": 0.0020000000000000018,
  "entry_price": 55888.1,
  "stop_loss": 56000.0,
  "take_profit": 55000.0,
  "is_btc_unit": false,
  "is_reduce_only": true,
  "needs_sl_tp": false
}
2025-03-11 15:49:54,421 - exchange.bybit_client - INFO - USDT 잔고 - 총자산: $53,212.16, 가용잔고: $0.00, 사용중: $0.00
2025-03-11 15:49:54,423 - order_service - INFO - USDT 잔고 - 총자산: $53212.16495, 가용잔고: $0.0, 사용중: $0.0
2025-03-11 15:49:54,424 - order_service - INFO - 주문 실행 시도: {'category': 'linear', 'symbol': 'BTCUSDT', 'side': 'Buy', 'orderType': 'Limit', 'qty': '0.002', 'price': '55888.1', 'timeInForce': 'GTC', 'positionIdx': 0, 'reduceOnly': True}
2025-03-11 15:49:54,679 - exchange.bybit_client - INFO - 서버 시간 동기화 완료: server_time=1741675794000, local_time=1741675794679, offset=-679ms
2025-03-11 15:49:54,832 - order_service - INFO - === 주문 요청 및 응답 상세 ===
2025-03-11 15:49:54,832 - order_service - INFO - 요청 파라미터:
{
  "category": "linear",
  "symbol": "BTCUSDT",
  "side": "Buy",
  "orderType": "Limit",
  "qty": "0.002",
  "price": "55888.1",
  "timeInForce": "GTC",
  "positionIdx": 0,
  "reduceOnly": true
}
2025-03-11 15:49:54,832 - order_service - INFO - API 응답:
{
  "retCode": 0,
  "retMsg": "OK",
  "result": {
    "orderId": "63392943-8f02-4123-aa93-fb8fc2669a11",
    "orderLinkId": ""
  },
  "retExtInfo": {},
  "time": 1741675794916
}
2025-03-11 15:49:55,864 - telegram_bot.monitors.auto_analyzer - INFO - 초기 분석 실행 완료
2025-03-11 15:50:08,324 - telegram_bot.handlers.system_handler - INFO - check_permission 시작
2025-03-11 15:50:08,324 - telegram_bot.handlers.system_handler - INFO - check_permission: chat_id=583881676, is_admin=True
2025-03-11 15:50:08,324 - telegram_bot.handlers.system_handler - INFO - 봇 종료 요청 (chat_id: 583881676)
2025-03-11 15:50:09,872 - telegram_bot.bot - INFO - 봇 종료 시작...
2025-03-11 15:50:09,874 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러가 중지되었습니다
2025-03-11 15:50:09,874 - telegram_bot.monitors.auto_analyzer - INFO - AutoAnalyzer가 중지되었습니다
2025-03-11 15:50:09,874 - telegram.ext.Application - INFO - Application is stopping. This might take a moment.
2025-03-11 15:50:09,874 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-03-11 15:53:56,208 - main - INFO - 환경변수 및 설정 초기화 중...
2025-03-11 15:53:56,208 - main - INFO - Bybit 테스트넷 클라이언트 초기화 중...
2025-03-11 15:53:56,444 - main - INFO - 서비스 초기화 중...
2025-03-11 15:53:56,445 - main - INFO - 마켓 데이터 서비스 중...
2025-03-11 15:53:58,342 - services.market_data_service - INFO - 마켓 데이터 로드 완료
2025-03-11 15:53:58,605 - telegram_bot.bot - INFO - 텔레그램 설정 로드:
2025-03-11 15:53:58,605 - telegram_bot.bot - INFO - - admin_chat_id: 583881676
2025-03-11 15:53:58,605 - telegram_bot.bot - INFO - - alert_chat_ids: [-1002464784986]
2025-03-11 15:53:59,081 - telegram_bot.monitors.auto_analyzer - INFO - AutoAnalyzer 초기화 시작
2025-03-11 15:53:59,082 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 설정 시작
2025-03-11 15:53:59,083 - telegram_bot.monitors.auto_analyzer - INFO - 다음 실행 예정 시간: 2025-03-11 16:00:00
2025-03-11 15:53:59,084 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-03-11 15:53:59,084 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 설정 완료
2025-03-11 15:53:59,084 - telegram_bot.bot - INFO - 봇 초기화 시작...
2025-03-11 15:53:59,084 - services.trade_history_service - INFO - === 포지션 정보 초기화 시작 ===
2025-03-11 15:53:59,085 - services.trade_history_service - INFO - 조회 기간: 2024-12-11 ~ 2025-03-11
2025-03-11 15:53:59,085 - services.trade_store - INFO - 날짜 범위 조회: 20241211 ~ 20250311
2025-03-11 15:53:59,086 - services.trade_store - INFO - 날짜: 20241211, 포지션 수: 1건
2025-03-11 15:53:59,086 - services.trade_store - INFO - 날짜: 20241212, 포지션 수: 1건
2025-03-11 15:53:59,086 - services.trade_store - INFO - 날짜: 20241213, 포지션 수: 2건
2025-03-11 15:53:59,087 - services.trade_store - INFO - 날짜: 20241214, 포지션 수: 2건
2025-03-11 15:53:59,087 - services.trade_store - INFO - 날짜: 20241215, 포지션 수: 0건
2025-03-11 15:53:59,087 - services.trade_store - INFO - 날짜: 20241216, 포지션 수: 0건
2025-03-11 15:53:59,087 - services.trade_store - INFO - 날짜: 20241217, 포지션 수: 10건
2025-03-11 15:53:59,088 - services.trade_store - INFO - 날짜: 20241218, 포지션 수: 5건
2025-03-11 15:53:59,088 - services.trade_store - INFO - 날짜: 20241219, 포지션 수: 1건
2025-03-11 15:53:59,089 - services.trade_store - INFO - 날짜: 20241220, 포지션 수: 31건
2025-03-11 15:53:59,089 - services.trade_store - INFO - 날짜: 20241221, 포지션 수: 3건
2025-03-11 15:53:59,089 - services.trade_store - INFO - 날짜: 20241222, 포지션 수: 10건
2025-03-11 15:53:59,090 - services.trade_store - INFO - 날짜: 20241223, 포지션 수: 7건
2025-03-11 15:53:59,090 - services.trade_store - INFO - 날짜: 20241224, 포지션 수: 11건
2025-03-11 15:53:59,090 - services.trade_store - INFO - 날짜: 20241225, 포지션 수: 2건
2025-03-11 15:53:59,091 - services.trade_store - INFO - 날짜: 20241226, 포지션 수: 7건
2025-03-11 15:53:59,091 - services.trade_store - INFO - 날짜: 20241227, 포지션 수: 7건
2025-03-11 15:53:59,091 - services.trade_store - INFO - 날짜: 20241228, 포지션 수: 4건
2025-03-11 15:53:59,092 - services.trade_store - INFO - 날짜: 20241229, 포지션 수: 0건
2025-03-11 15:53:59,092 - services.trade_store - INFO - 날짜: 20241230, 포지션 수: 15건
2025-03-11 15:53:59,093 - services.trade_store - INFO - 날짜: 20241231, 포지션 수: 8건
2025-03-11 15:53:59,093 - services.trade_store - INFO - 날짜: 20250101, 포지션 수: 0건
2025-03-11 15:53:59,093 - services.trade_store - INFO - 날짜: 20250102, 포지션 수: 0건
2025-03-11 15:53:59,093 - services.trade_store - INFO - 날짜: 20250103, 포지션 수: 0건
2025-03-11 15:53:59,093 - services.trade_store - INFO - 날짜: 20250104, 포지션 수: 0건
2025-03-11 15:53:59,094 - services.trade_store - INFO - 날짜: 20250105, 포지션 수: 0건
2025-03-11 15:53:59,094 - services.trade_store - INFO - 날짜: 20250106, 포지션 수: 0건
2025-03-11 15:53:59,094 - services.trade_store - INFO - 날짜: 20250107, 포지션 수: 0건
2025-03-11 15:53:59,094 - services.trade_store - INFO - 날짜: 20250108, 포지션 수: 0건
2025-03-11 15:53:59,094 - services.trade_store - INFO - 날짜: 20250109, 포지션 수: 0건
2025-03-11 15:53:59,095 - services.trade_store - INFO - 날짜: 20250110, 포지션 수: 0건
2025-03-11 15:53:59,095 - services.trade_store - INFO - 날짜: 20250111, 포지션 수: 0건
2025-03-11 15:53:59,095 - services.trade_store - INFO - 날짜: 20250112, 포지션 수: 0건
2025-03-11 15:53:59,095 - services.trade_store - INFO - 날짜: 20250113, 포지션 수: 0건
2025-03-11 15:53:59,096 - services.trade_store - INFO - 날짜: 20250114, 포지션 수: 0건
2025-03-11 15:53:59,096 - services.trade_store - INFO - 날짜: 20250115, 포지션 수: 0건
2025-03-11 15:53:59,096 - services.trade_store - INFO - 날짜: 20250116, 포지션 수: 0건
2025-03-11 15:53:59,096 - services.trade_store - INFO - 날짜: 20250117, 포지션 수: 0건
2025-03-11 15:53:59,096 - services.trade_store - INFO - 날짜: 20250118, 포지션 수: 0건
2025-03-11 15:53:59,096 - services.trade_store - INFO - 날짜: 20250119, 포지션 수: 0건
2025-03-11 15:53:59,096 - services.trade_store - INFO - 날짜: 20250120, 포지션 수: 0건
2025-03-11 15:53:59,096 - services.trade_store - INFO - 날짜: 20250121, 포지션 수: 0건
2025-03-11 15:53:59,097 - services.trade_store - INFO - 날짜: 20250122, 포지션 수: 0건
2025-03-11 15:53:59,097 - services.trade_store - INFO - 날짜: 20250123, 포지션 수: 0건
2025-03-11 15:53:59,097 - services.trade_store - INFO - 날짜: 20250124, 포지션 수: 0건
2025-03-11 15:53:59,097 - services.trade_store - INFO - 날짜: 20250125, 포지션 수: 0건
2025-03-11 15:53:59,097 - services.trade_store - INFO - 날짜: 20250126, 포지션 수: 0건
2025-03-11 15:53:59,097 - services.trade_store - INFO - 날짜: 20250127, 포지션 수: 0건
2025-03-11 15:53:59,097 - services.trade_store - INFO - 날짜: 20250128, 포지션 수: 0건
2025-03-11 15:53:59,097 - services.trade_store - INFO - 날짜: 20250129, 포지션 수: 0건
2025-03-11 15:53:59,097 - services.trade_store - INFO - 날짜: 20250130, 포지션 수: 0건
2025-03-11 15:53:59,098 - services.trade_store - INFO - 날짜: 20250131, 포지션 수: 0건
2025-03-11 15:53:59,098 - services.trade_store - INFO - 날짜: 20250201, 포지션 수: 0건
2025-03-11 15:53:59,098 - services.trade_store - INFO - 날짜: 20250202, 포지션 수: 0건
2025-03-11 15:53:59,098 - services.trade_store - INFO - 날짜: 20250203, 포지션 수: 0건
2025-03-11 15:53:59,098 - services.trade_store - INFO - 날짜: 20250204, 포지션 수: 0건
2025-03-11 15:53:59,098 - services.trade_store - INFO - 날짜: 20250205, 포지션 수: 0건
2025-03-11 15:53:59,098 - services.trade_store - INFO - 날짜: 20250206, 포지션 수: 0건
2025-03-11 15:53:59,098 - services.trade_store - INFO - 날짜: 20250207, 포지션 수: 0건
2025-03-11 15:53:59,099 - services.trade_store - INFO - 날짜: 20250208, 포지션 수: 0건
2025-03-11 15:53:59,099 - services.trade_store - INFO - 날짜: 20250209, 포지션 수: 0건
2025-03-11 15:53:59,099 - services.trade_store - INFO - 날짜: 20250210, 포지션 수: 0건
2025-03-11 15:53:59,099 - services.trade_store - INFO - 날짜: 20250211, 포지션 수: 0건
2025-03-11 15:53:59,099 - services.trade_store - INFO - 날짜: 20250212, 포지션 수: 0건
2025-03-11 15:53:59,099 - services.trade_store - INFO - 날짜: 20250213, 포지션 수: 0건
2025-03-11 15:53:59,101 - services.trade_store - INFO - 날짜: 20250214, 포지션 수: 2건
2025-03-11 15:53:59,101 - services.trade_store - INFO - 날짜: 20250215, 포지션 수: 2건
2025-03-11 15:53:59,101 - services.trade_store - INFO - 날짜: 20250216, 포지션 수: 0건
2025-03-11 15:53:59,102 - services.trade_store - INFO - 날짜: 20250217, 포지션 수: 2건
2025-03-11 15:53:59,102 - services.trade_store - INFO - 날짜: 20250218, 포지션 수: 0건
2025-03-11 15:53:59,102 - services.trade_store - INFO - 날짜: 20250219, 포지션 수: 0건
2025-03-11 15:53:59,102 - services.trade_store - INFO - 날짜: 20250220, 포지션 수: 0건
2025-03-11 15:53:59,102 - services.trade_store - INFO - 날짜: 20250221, 포지션 수: 2건
2025-03-11 15:53:59,103 - services.trade_store - INFO - 날짜: 20250222, 포지션 수: 0건
2025-03-11 15:53:59,103 - services.trade_store - INFO - 날짜: 20250223, 포지션 수: 0건
2025-03-11 15:53:59,103 - services.trade_store - INFO - 날짜: 20250224, 포지션 수: 0건
2025-03-11 15:53:59,103 - services.trade_store - INFO - 날짜: 20250225, 포지션 수: 0건
2025-03-11 15:53:59,103 - services.trade_store - INFO - 날짜: 20250226, 포지션 수: 0건
2025-03-11 15:53:59,103 - services.trade_store - INFO - 날짜: 20250227, 포지션 수: 0건
2025-03-11 15:53:59,103 - services.trade_store - INFO - 날짜: 20250228, 포지션 수: 0건
2025-03-11 15:53:59,103 - services.trade_store - INFO - 날짜: 20250301, 포지션 수: 0건
2025-03-11 15:53:59,104 - services.trade_store - INFO - 날짜: 20250302, 포지션 수: 0건
2025-03-11 15:53:59,104 - services.trade_store - INFO - 날짜: 20250303, 포지션 수: 0건
2025-03-11 15:53:59,104 - services.trade_store - INFO - 날짜: 20250304, 포지션 수: 0건
2025-03-11 15:53:59,104 - services.trade_store - INFO - 날짜: 20250305, 포지션 수: 0건
2025-03-11 15:53:59,104 - services.trade_store - INFO - 날짜: 20250306, 포지션 수: 0건
2025-03-11 15:53:59,104 - services.trade_store - INFO - 날짜: 20250307, 포지션 수: 0건
2025-03-11 15:53:59,105 - services.trade_store - INFO - 날짜: 20250308, 포지션 수: 0건
2025-03-11 15:53:59,105 - services.trade_store - INFO - 날짜: 20250309, 포지션 수: 0건
2025-03-11 15:53:59,105 - services.trade_store - INFO - 날짜: 20250310, 포지션 수: 0건
2025-03-11 15:53:59,105 - services.trade_store - INFO - 날짜: 20250311, 포지션 수: 0건
2025-03-11 15:53:59,105 - services.trade_store - INFO - 총 135건의 포지션 데이터 로드됨
2025-03-11 15:53:59,105 - services.trade_history_service - INFO - 기존 데이터: 135건
2025-03-11 15:53:59,604 - telegram_bot.bot - INFO - 명령어 핸들러 등록 시작...
2025-03-11 15:53:59,605 - telegram_bot.bot - INFO - 명령어 핸들러 등록 완료
2025-03-11 15:53:59,605 - telegram_bot.bot - INFO - 봇 초기화 완료, 시작 준비 중...
2025-03-11 15:53:59,605 - telegram_bot.bot - INFO - 봇 시작 시도...
2025-03-11 15:53:59,605 - telegram_bot.bot - INFO - === 봇 시작 시도 ===
2025-03-11 15:54:00,746 - apscheduler.scheduler - INFO - Scheduler started
2025-03-11 15:54:00,746 - telegram.ext.Application - INFO - Application started
2025-03-11 15:54:00,746 - telegram_bot.bot - INFO - 🤖 바이빗 트레이딩 봇이 시작되었습니다
2025-03-11 15:54:01,747 - telegram_bot.monitors.auto_analyzer - INFO - AutoAnalyzer 시작 요청됨
2025-03-11 15:54:01,748 - apscheduler.scheduler - INFO - Added job "AutoAnalyzer._scheduled_analysis" to job store "default"
2025-03-11 15:54:01,748 - apscheduler.scheduler - INFO - Scheduler started
2025-03-11 15:54:01,748 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 시작됨. 다음 실행 시간: 2025-03-11 16:00:00+09:00
2025-03-11 15:54:01,748 - telegram_bot.monitors.auto_analyzer - INFO - 초기 분석 실행 시작
2025-03-11 15:54:01,748 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄된 분석 시작 - 2025-03-11 15:54:01.748561
2025-03-11 15:54:01,748 - telegram_bot.monitors.auto_analyzer - INFO - 🔄' 1시간봉 분석 시작 (자동) ...
2025-03-11 15:54:01,748 - services.market_data_service - INFO - OHLCV 데이터 조회 시작 - 심볼: BTCUSDT, 시간대: 1h
2025-03-11 15:54:02,162 - ai.gpt_analyzer - INFO - 계산된 지표: ['open', 'high', 'low', 'close', 'volume', 'price_change_24h', 'volume_change_24h', 'rsi', 'macd', 'macd_signal', 'bb_upper', 'bb_middle', 'bb_lower', 'sma_10', 'sma_30', 'adx', 'di_plus', 'di_minus', 'trend', 'trend_strength', 'divergence_type', 'divergence_desc']
2025-03-11 15:54:02,174 - ai.gpt_analyzer - INFO - 시장 데이터: {'symbol': 'BTCUSDT', 'last_price': 55888.1, 'bid': 55710.0, 'ask': 55799.1, 'volume': 827093.629, 'timestamp': None}
2025-03-11 15:54:02,179 - ai.gpt_client - INFO - GPT API 호출 시작 (캐시 사용: False)
2025-03-11 15:54:02,180 - ai.gpt_client - INFO - 캐시 사용하지 않음 - 실제 API 호출
2025-03-11 15:54:04,168 - telegram_bot.formatters.storage_formatter - INFO - 1h 분석 결과 저장 완료: C:\Users\oasis\Aibybit_2\src\data\analysis\analysis_1h.json
2025-03-11 15:54:05,493 - telegram_bot.monitors.auto_analyzer - INFO - 분석 결과 position_suggestion: SELL
2025-03-11 15:54:05,493 - telegram_bot.monitors.auto_analyzer - INFO - 매매 신호 감지: SELL
2025-03-11 15:54:05,493 - order_service - INFO - 매매 신호 실행: {'position_suggestion': 'SELL', 'leverage': 5, 'position_size': 10, 'entry_price': 55888.1, 'stop_loss': 56000.0, 'take_profit1': 55000.0, 'take_profit2': 54000.0, 'reason': '하락 추세 및 부정적인 지표'}
2025-03-11 15:54:05,493 - order_service - INFO - 주문 시도: {'symbol': 'BTCUSDT', 'side': 'Sell', 'leverage': 5, 'position_size': 10, 'entry_price': 55888.1, 'stop_loss': 56000.0, 'take_profit': 55000.0, 'is_btc_unit': False}
2025-03-11 15:54:05,493 - order_service - INFO - 주문 상세 정보: {
  "symbol": "BTCUSDT",
  "side": "Sell",
  "leverage": 5,
  "position_size": 10,
  "entry_price": 55888.1,
  "stop_loss": 56000.0,
  "take_profit": 55000.0,
  "is_btc_unit": false
}
2025-03-11 15:54:05,497 - order_service - INFO - 주문 시도: {'symbol': 'BTCUSDT', 'side': 'Sell', 'leverage': 5, 'position_size': 10, 'entry_price': 55888.1, 'stop_loss': 56000.0, 'take_profit': 55000.0, 'is_btc_unit': False}
2025-03-11 15:54:06,348 - order_service - INFO - 현재 포지션: {'symbol': 'BTC/USDT:USDT', 'side': 'Short', 'size': 0.476, 'leverage': 5, 'entryPrice': 55788.18791621, 'markPrice': 55888.1, 'unrealisedPnl': -47.55815188, 'stopLoss': 0.0, 'takeProfit': 0.0}
2025-03-11 15:54:06,348 - order_service - INFO - 레버리지 차이가 작음(0) - 크기만 조정
2025-03-11 15:54:06,531 - exchange.bybit_client - INFO - USDT 잔고 - 총자산: $53,211.90, 가용잔고: $0.00, 사용중: $0.00
2025-03-11 15:54:06,531 - order_service - INFO - 가용 잔고: $0.0, 총 자산: $53211.90364892, 사용중: $0.0
2025-03-11 15:54:06,714 - order_service - INFO - 계산 입력값 - 총자산: $53211.90364892, 미실현손익: $0.0, 비율: 10%, 레버리지: 5배, 진입가: $55888.1
2025-03-11 15:54:06,714 - order_service - INFO - 순수 자산: $53211.90364892
2025-03-11 15:54:06,714 - order_service - INFO - 포지션 가치(USDT): $26605.951824460004
2025-03-11 15:54:06,714 - order_service - INFO - 계산된 BTC 수량: 0.47605754757202345
2025-03-11 15:54:06,714 - order_service - INFO - 최종 BTC 수량(반올림): 0.476
2025-03-11 15:54:07,030 - order_service - INFO - 주문 상세 정보: {
  "symbol": "BTCUSDT",
  "side": "Sell",
  "leverage": 5,
  "position_size": 0.0,
  "entry_price": 55888.1,
  "stop_loss": 56000.0,
  "take_profit": 55000.0,
  "is_btc_unit": false,
  "is_reduce_only": false,
  "needs_sl_tp": true
}
2025-03-11 15:54:07,235 - exchange.bybit_client - INFO - USDT 잔고 - 총자산: $53,211.90, 가용잔고: $0.00, 사용중: $0.00
2025-03-11 15:54:07,235 - order_service - INFO - USDT 잔고 - 총자산: $53211.90364892, 가용잔고: $0.0, 사용중: $0.0
2025-03-11 15:54:07,236 - order_service - INFO - 주문 실행 시도: {'category': 'linear', 'symbol': 'BTCUSDT', 'side': 'Sell', 'orderType': 'Limit', 'qty': '0.000', 'price': '55888.1', 'timeInForce': 'GTC', 'positionIdx': 0, 'reduceOnly': False, 'stopLoss': '56000.0', 'takeProfit': '55000.0'}
2025-03-11 15:54:07,348 - exchange.bybit_client - INFO - 서버 시간 동기화 완료: server_time=1741676047000, local_time=1741676047348, offset=-348ms
2025-03-11 15:54:07,757 - order_service - INFO - === 주문 요청 및 응답 상세 ===
2025-03-11 15:54:07,757 - order_service - INFO - 요청 파라미터:
{
  "category": "linear",
  "symbol": "BTCUSDT",
  "side": "Sell",
  "orderType": "Limit",
  "qty": "0.000",
  "price": "55888.1",
  "timeInForce": "GTC",
  "positionIdx": 0,
  "reduceOnly": false,
  "stopLoss": "56000.0",
  "takeProfit": "55000.0"
}
2025-03-11 15:54:07,757 - order_service - INFO - API 응답:
{
  "retCode": 10001,
  "retMsg": "The number of contracts exceeds minimum limit allowed",
  "result": {},
  "retExtInfo": {},
  "time": 1741676047865
}
2025-03-11 15:54:08,741 - telegram_bot.monitors.auto_analyzer - INFO - 초기 분석 실행 완료
2025-03-11 15:54:18,292 - telegram_bot.handlers.system_handler - INFO - check_permission 시작
2025-03-11 15:54:18,292 - telegram_bot.handlers.system_handler - INFO - check_permission: chat_id=583881676, is_admin=True
2025-03-11 15:54:18,293 - telegram_bot.handlers.system_handler - INFO - 봇 종료 요청 (chat_id: 583881676)
2025-03-11 15:54:19,801 - telegram_bot.bot - INFO - 봇 종료 시작...
2025-03-11 15:54:19,801 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러가 중지되었습니다
2025-03-11 15:54:19,801 - telegram_bot.monitors.auto_analyzer - INFO - AutoAnalyzer가 중지되었습니다
2025-03-11 15:54:19,801 - telegram.ext.Application - INFO - Application is stopping. This might take a moment.
2025-03-11 15:54:19,801 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-03-11 15:55:40,878 - main - INFO - 환경변수 및 설정 초기화 중...
2025-03-11 15:55:40,878 - main - INFO - Bybit 테스트넷 클라이언트 초기화 중...
2025-03-11 15:55:41,136 - main - INFO - 서비스 초기화 중...
2025-03-11 15:55:41,136 - main - INFO - 마켓 데이터 서비스 중...
2025-03-11 15:55:42,936 - services.market_data_service - INFO - 마켓 데이터 로드 완료
2025-03-11 15:55:43,267 - telegram_bot.bot - INFO - 텔레그램 설정 로드:
2025-03-11 15:55:43,268 - telegram_bot.bot - INFO - - admin_chat_id: 583881676
2025-03-11 15:55:43,268 - telegram_bot.bot - INFO - - alert_chat_ids: [-1002464784986]
2025-03-11 15:55:43,726 - telegram_bot.monitors.auto_analyzer - INFO - AutoAnalyzer 초기화 시작
2025-03-11 15:55:43,726 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 설정 시작
2025-03-11 15:55:43,728 - telegram_bot.monitors.auto_analyzer - INFO - 다음 실행 예정 시간: 2025-03-11 16:00:00
2025-03-11 15:55:43,729 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-03-11 15:55:43,729 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 설정 완료
2025-03-11 15:55:43,729 - telegram_bot.bot - INFO - 봇 초기화 시작...
2025-03-11 15:55:43,729 - services.trade_history_service - INFO - === 포지션 정보 초기화 시작 ===
2025-03-11 15:55:43,730 - services.trade_history_service - INFO - 조회 기간: 2024-12-11 ~ 2025-03-11
2025-03-11 15:55:43,731 - services.trade_store - INFO - 날짜 범위 조회: 20241211 ~ 20250311
2025-03-11 15:55:43,731 - services.trade_store - INFO - 날짜: 20241211, 포지션 수: 1건
2025-03-11 15:55:43,731 - services.trade_store - INFO - 날짜: 20241212, 포지션 수: 1건
2025-03-11 15:55:43,732 - services.trade_store - INFO - 날짜: 20241213, 포지션 수: 2건
2025-03-11 15:55:43,732 - services.trade_store - INFO - 날짜: 20241214, 포지션 수: 2건
2025-03-11 15:55:43,733 - services.trade_store - INFO - 날짜: 20241215, 포지션 수: 0건
2025-03-11 15:55:43,733 - services.trade_store - INFO - 날짜: 20241216, 포지션 수: 0건
2025-03-11 15:55:43,734 - services.trade_store - INFO - 날짜: 20241217, 포지션 수: 10건
2025-03-11 15:55:43,734 - services.trade_store - INFO - 날짜: 20241218, 포지션 수: 5건
2025-03-11 15:55:43,734 - services.trade_store - INFO - 날짜: 20241219, 포지션 수: 1건
2025-03-11 15:55:43,735 - services.trade_store - INFO - 날짜: 20241220, 포지션 수: 31건
2025-03-11 15:55:43,735 - services.trade_store - INFO - 날짜: 20241221, 포지션 수: 3건
2025-03-11 15:55:43,735 - services.trade_store - INFO - 날짜: 20241222, 포지션 수: 10건
2025-03-11 15:55:43,735 - services.trade_store - INFO - 날짜: 20241223, 포지션 수: 7건
2025-03-11 15:55:43,736 - services.trade_store - INFO - 날짜: 20241224, 포지션 수: 11건
2025-03-11 15:55:43,736 - services.trade_store - INFO - 날짜: 20241225, 포지션 수: 2건
2025-03-11 15:55:43,737 - services.trade_store - INFO - 날짜: 20241226, 포지션 수: 7건
2025-03-11 15:55:43,738 - services.trade_store - INFO - 날짜: 20241227, 포지션 수: 7건
2025-03-11 15:55:43,738 - services.trade_store - INFO - 날짜: 20241228, 포지션 수: 4건
2025-03-11 15:55:43,738 - services.trade_store - INFO - 날짜: 20241229, 포지션 수: 0건
2025-03-11 15:55:43,739 - services.trade_store - INFO - 날짜: 20241230, 포지션 수: 15건
2025-03-11 15:55:43,739 - services.trade_store - INFO - 날짜: 20241231, 포지션 수: 8건
2025-03-11 15:55:43,739 - services.trade_store - INFO - 날짜: 20250101, 포지션 수: 0건
2025-03-11 15:55:43,741 - services.trade_store - INFO - 날짜: 20250102, 포지션 수: 0건
2025-03-11 15:55:43,741 - services.trade_store - INFO - 날짜: 20250103, 포지션 수: 0건
2025-03-11 15:55:43,741 - services.trade_store - INFO - 날짜: 20250104, 포지션 수: 0건
2025-03-11 15:55:43,741 - services.trade_store - INFO - 날짜: 20250105, 포지션 수: 0건
2025-03-11 15:55:43,742 - services.trade_store - INFO - 날짜: 20250106, 포지션 수: 0건
2025-03-11 15:55:43,742 - services.trade_store - INFO - 날짜: 20250107, 포지션 수: 0건
2025-03-11 15:55:43,742 - services.trade_store - INFO - 날짜: 20250108, 포지션 수: 0건
2025-03-11 15:55:43,742 - services.trade_store - INFO - 날짜: 20250109, 포지션 수: 0건
2025-03-11 15:55:43,742 - services.trade_store - INFO - 날짜: 20250110, 포지션 수: 0건
2025-03-11 15:55:43,743 - services.trade_store - INFO - 날짜: 20250111, 포지션 수: 0건
2025-03-11 15:55:43,743 - services.trade_store - INFO - 날짜: 20250112, 포지션 수: 0건
2025-03-11 15:55:43,743 - services.trade_store - INFO - 날짜: 20250113, 포지션 수: 0건
2025-03-11 15:55:43,743 - services.trade_store - INFO - 날짜: 20250114, 포지션 수: 0건
2025-03-11 15:55:43,743 - services.trade_store - INFO - 날짜: 20250115, 포지션 수: 0건
2025-03-11 15:55:43,744 - services.trade_store - INFO - 날짜: 20250116, 포지션 수: 0건
2025-03-11 15:55:43,744 - services.trade_store - INFO - 날짜: 20250117, 포지션 수: 0건
2025-03-11 15:55:43,744 - services.trade_store - INFO - 날짜: 20250118, 포지션 수: 0건
2025-03-11 15:55:43,744 - services.trade_store - INFO - 날짜: 20250119, 포지션 수: 0건
2025-03-11 15:55:43,744 - services.trade_store - INFO - 날짜: 20250120, 포지션 수: 0건
2025-03-11 15:55:43,744 - services.trade_store - INFO - 날짜: 20250121, 포지션 수: 0건
2025-03-11 15:55:43,744 - services.trade_store - INFO - 날짜: 20250122, 포지션 수: 0건
2025-03-11 15:55:43,745 - services.trade_store - INFO - 날짜: 20250123, 포지션 수: 0건
2025-03-11 15:55:43,745 - services.trade_store - INFO - 날짜: 20250124, 포지션 수: 0건
2025-03-11 15:55:43,745 - services.trade_store - INFO - 날짜: 20250125, 포지션 수: 0건
2025-03-11 15:55:43,745 - services.trade_store - INFO - 날짜: 20250126, 포지션 수: 0건
2025-03-11 15:55:43,745 - services.trade_store - INFO - 날짜: 20250127, 포지션 수: 0건
2025-03-11 15:55:43,745 - services.trade_store - INFO - 날짜: 20250128, 포지션 수: 0건
2025-03-11 15:55:43,745 - services.trade_store - INFO - 날짜: 20250129, 포지션 수: 0건
2025-03-11 15:55:43,746 - services.trade_store - INFO - 날짜: 20250130, 포지션 수: 0건
2025-03-11 15:55:43,746 - services.trade_store - INFO - 날짜: 20250131, 포지션 수: 0건
2025-03-11 15:55:43,746 - services.trade_store - INFO - 날짜: 20250201, 포지션 수: 0건
2025-03-11 15:55:43,746 - services.trade_store - INFO - 날짜: 20250202, 포지션 수: 0건
2025-03-11 15:55:43,746 - services.trade_store - INFO - 날짜: 20250203, 포지션 수: 0건
2025-03-11 15:55:43,746 - services.trade_store - INFO - 날짜: 20250204, 포지션 수: 0건
2025-03-11 15:55:43,747 - services.trade_store - INFO - 날짜: 20250205, 포지션 수: 0건
2025-03-11 15:55:43,747 - services.trade_store - INFO - 날짜: 20250206, 포지션 수: 0건
2025-03-11 15:55:43,747 - services.trade_store - INFO - 날짜: 20250207, 포지션 수: 0건
2025-03-11 15:55:43,747 - services.trade_store - INFO - 날짜: 20250208, 포지션 수: 0건
2025-03-11 15:55:43,747 - services.trade_store - INFO - 날짜: 20250209, 포지션 수: 0건
2025-03-11 15:55:43,747 - services.trade_store - INFO - 날짜: 20250210, 포지션 수: 0건
2025-03-11 15:55:43,747 - services.trade_store - INFO - 날짜: 20250211, 포지션 수: 0건
2025-03-11 15:55:43,747 - services.trade_store - INFO - 날짜: 20250212, 포지션 수: 0건
2025-03-11 15:55:43,748 - services.trade_store - INFO - 날짜: 20250213, 포지션 수: 0건
2025-03-11 15:55:43,748 - services.trade_store - INFO - 날짜: 20250214, 포지션 수: 2건
2025-03-11 15:55:43,748 - services.trade_store - INFO - 날짜: 20250215, 포지션 수: 2건
2025-03-11 15:55:43,749 - services.trade_store - INFO - 날짜: 20250216, 포지션 수: 0건
2025-03-11 15:55:43,749 - services.trade_store - INFO - 날짜: 20250217, 포지션 수: 2건
2025-03-11 15:55:43,749 - services.trade_store - INFO - 날짜: 20250218, 포지션 수: 0건
2025-03-11 15:55:43,749 - services.trade_store - INFO - 날짜: 20250219, 포지션 수: 0건
2025-03-11 15:55:43,749 - services.trade_store - INFO - 날짜: 20250220, 포지션 수: 0건
2025-03-11 15:55:43,750 - services.trade_store - INFO - 날짜: 20250221, 포지션 수: 2건
2025-03-11 15:55:43,750 - services.trade_store - INFO - 날짜: 20250222, 포지션 수: 0건
2025-03-11 15:55:43,750 - services.trade_store - INFO - 날짜: 20250223, 포지션 수: 0건
2025-03-11 15:55:43,750 - services.trade_store - INFO - 날짜: 20250224, 포지션 수: 0건
2025-03-11 15:55:43,750 - services.trade_store - INFO - 날짜: 20250225, 포지션 수: 0건
2025-03-11 15:55:43,750 - services.trade_store - INFO - 날짜: 20250226, 포지션 수: 0건
2025-03-11 15:55:43,751 - services.trade_store - INFO - 날짜: 20250227, 포지션 수: 0건
2025-03-11 15:55:43,752 - services.trade_store - INFO - 날짜: 20250228, 포지션 수: 0건
2025-03-11 15:55:43,752 - services.trade_store - INFO - 날짜: 20250301, 포지션 수: 0건
2025-03-11 15:55:43,752 - services.trade_store - INFO - 날짜: 20250302, 포지션 수: 0건
2025-03-11 15:55:43,753 - services.trade_store - INFO - 날짜: 20250303, 포지션 수: 0건
2025-03-11 15:55:43,753 - services.trade_store - INFO - 날짜: 20250304, 포지션 수: 0건
2025-03-11 15:55:43,753 - services.trade_store - INFO - 날짜: 20250305, 포지션 수: 0건
2025-03-11 15:55:43,753 - services.trade_store - INFO - 날짜: 20250306, 포지션 수: 0건
2025-03-11 15:55:43,753 - services.trade_store - INFO - 날짜: 20250307, 포지션 수: 0건
2025-03-11 15:55:43,753 - services.trade_store - INFO - 날짜: 20250308, 포지션 수: 0건
2025-03-11 15:55:43,753 - services.trade_store - INFO - 날짜: 20250309, 포지션 수: 0건
2025-03-11 15:55:43,753 - services.trade_store - INFO - 날짜: 20250310, 포지션 수: 0건
2025-03-11 15:55:43,753 - services.trade_store - INFO - 날짜: 20250311, 포지션 수: 0건
2025-03-11 15:55:43,753 - services.trade_store - INFO - 총 135건의 포지션 데이터 로드됨
2025-03-11 15:55:43,753 - services.trade_history_service - INFO - 기존 데이터: 135건
2025-03-11 15:55:44,227 - telegram_bot.bot - INFO - 명령어 핸들러 등록 시작...
2025-03-11 15:55:44,227 - telegram_bot.bot - INFO - 명령어 핸들러 등록 완료
2025-03-11 15:55:44,227 - telegram_bot.bot - INFO - 봇 초기화 완료, 시작 준비 중...
2025-03-11 15:55:44,227 - telegram_bot.bot - INFO - 봇 시작 시도...
2025-03-11 15:55:44,227 - telegram_bot.bot - INFO - === 봇 시작 시도 ===
2025-03-11 15:55:45,323 - apscheduler.scheduler - INFO - Scheduler started
2025-03-11 15:55:45,335 - telegram.ext.Application - INFO - Application started
2025-03-11 15:55:45,335 - telegram_bot.bot - INFO - 🤖 바이빗 트레이딩 봇이 시작되었습니다
2025-03-11 15:55:46,312 - telegram_bot.monitors.auto_analyzer - INFO - AutoAnalyzer 시작 요청됨
2025-03-11 15:55:46,312 - apscheduler.scheduler - INFO - Added job "AutoAnalyzer._scheduled_analysis" to job store "default"
2025-03-11 15:55:46,312 - apscheduler.scheduler - INFO - Scheduler started
2025-03-11 15:55:46,312 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 시작됨. 다음 실행 시간: 2025-03-11 16:00:00+09:00
2025-03-11 15:55:46,312 - telegram_bot.monitors.auto_analyzer - INFO - 초기 분석 실행 시작
2025-03-11 15:55:46,312 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄된 분석 시작 - 2025-03-11 15:55:46.312079
2025-03-11 15:55:46,312 - telegram_bot.monitors.auto_analyzer - INFO - 🔄' 1시간봉 분석 시작 (자동) ...
2025-03-11 15:55:46,312 - services.market_data_service - INFO - OHLCV 데이터 조회 시작 - 심볼: BTCUSDT, 시간대: 1h
2025-03-11 15:55:46,585 - ai.gpt_analyzer - INFO - 계산된 지표: ['open', 'high', 'low', 'close', 'volume', 'price_change_24h', 'volume_change_24h', 'rsi', 'macd', 'macd_signal', 'bb_upper', 'bb_middle', 'bb_lower', 'sma_10', 'sma_30', 'adx', 'di_plus', 'di_minus', 'trend', 'trend_strength', 'divergence_type', 'divergence_desc']
2025-03-11 15:55:46,585 - ai.gpt_analyzer - INFO - 시장 데이터: {'symbol': 'BTCUSDT', 'last_price': 55888.1, 'bid': 55810.0, 'ask': 55888.1, 'volume': 827091.542, 'timestamp': None}
2025-03-11 15:55:46,585 - ai.gpt_client - INFO - GPT API 호출 시작 (캐시 사용: False)
2025-03-11 15:55:46,585 - ai.gpt_client - INFO - 캐시 사용하지 않음 - 실제 API 호출
2025-03-11 15:55:48,458 - telegram_bot.formatters.storage_formatter - INFO - 1h 분석 결과 저장 완료: C:\Users\oasis\Aibybit_2\src\data\analysis\analysis_1h.json
2025-03-11 15:55:49,426 - telegram_bot.monitors.auto_analyzer - INFO - 분석 결과 position_suggestion: SELL
2025-03-11 15:55:49,427 - telegram_bot.monitors.auto_analyzer - INFO - 매매 신호 감지: SELL
2025-03-11 15:55:49,427 - order_service - INFO - 매매 신호 실행: {'position_suggestion': 'SELL', 'leverage': 5, 'position_size': 10, 'entry_price': 55888.1, 'stop_loss': 56000.0, 'take_profit1': 55000.0, 'take_profit2': 54000.0, 'reason': '하락 추세 및 부정적인 지표'}
2025-03-11 15:55:49,428 - order_service - INFO - 주문 시도: {'symbol': 'BTCUSDT', 'side': 'Sell', 'leverage': 5, 'position_size': 10, 'entry_price': 55888.1, 'stop_loss': 56000.0, 'take_profit': 55000.0, 'is_btc_unit': False}
2025-03-11 15:55:49,429 - order_service - INFO - 주문 상세 정보: {
  "symbol": "BTCUSDT",
  "side": "Sell",
  "leverage": 5,
  "position_size": 10,
  "entry_price": 55888.1,
  "stop_loss": 56000.0,
  "take_profit": 55000.0,
  "is_btc_unit": false
}
2025-03-11 15:55:49,430 - order_service - INFO - 주문 시도: {'symbol': 'BTCUSDT', 'side': 'Sell', 'leverage': 5, 'position_size': 10, 'entry_price': 55888.1, 'stop_loss': 56000.0, 'take_profit': 55000.0, 'is_btc_unit': False}
2025-03-11 15:55:50,488 - order_service - INFO - 현재 포지션: {'symbol': 'BTC/USDT:USDT', 'side': 'Short', 'size': 0.476, 'leverage': 5, 'entryPrice': 55788.18791621, 'markPrice': 55888.1, 'unrealisedPnl': -47.55815188, 'stopLoss': 0.0, 'takeProfit': 0.0}
2025-03-11 15:55:50,488 - order_service - INFO - 레버리지 차이가 작음(0) - 크기만 조정
2025-03-11 15:55:50,678 - exchange.bybit_client - INFO - USDT 잔고 - 총자산: $53,211.90, 가용잔고: $0.00, 사용중: $0.00
2025-03-11 15:55:50,678 - order_service - INFO - 가용 잔고: $0.0, 총 자산: $53211.90364892, 사용중: $0.0
2025-03-11 15:55:50,859 - order_service - INFO - 계산 입력값 - 총자산: $53211.90364892, 미실현손익: $0.0, 비율: 10%, 레버리지: 5배, 진입가: $55888.1
2025-03-11 15:55:50,859 - order_service - INFO - 순수 자산: $53211.90364892
2025-03-11 15:55:50,859 - order_service - INFO - 포지션 가치(USDT): $26605.951824460004
2025-03-11 15:55:50,860 - order_service - INFO - 계산된 BTC 수량: 0.47605754757202345
2025-03-11 15:55:50,860 - order_service - INFO - 최종 BTC 수량(반올림): 0.476
2025-03-11 15:55:51,056 - order_service - INFO - 주문 상세 정보: {
  "symbol": "BTCUSDT",
  "side": "Sell",
  "leverage": 5,
  "position_size": 0.0,
  "entry_price": 55888.1,
  "stop_loss": 56000.0,
  "take_profit": 55000.0,
  "is_btc_unit": false,
  "is_reduce_only": false,
  "needs_sl_tp": true
}
2025-03-11 15:55:51,237 - exchange.bybit_client - INFO - USDT 잔고 - 총자산: $53,211.90, 가용잔고: $0.00, 사용중: $0.00
2025-03-11 15:55:51,237 - order_service - INFO - USDT 잔고 - 총자산: $53211.90364892, 가용잔고: $0.0, 사용중: $0.0
2025-03-11 15:55:51,237 - order_service - INFO - 주문 실행 시도: {'category': 'linear', 'symbol': 'BTCUSDT', 'side': 'Sell', 'orderType': 'Limit', 'qty': '0.000', 'price': '55888.1', 'timeInForce': 'GTC', 'positionIdx': 0, 'reduceOnly': False, 'stopLoss': '56000.0', 'takeProfit': '55000.0'}
2025-03-11 15:55:51,534 - exchange.bybit_client - INFO - 서버 시간 동기화 완료: server_time=1741676151000, local_time=1741676151534, offset=-534ms
2025-03-11 15:55:51,662 - order_service - INFO - === 주문 요청 및 응답 상세 ===
2025-03-11 15:55:51,662 - order_service - INFO - 요청 파라미터:
{
  "category": "linear",
  "symbol": "BTCUSDT",
  "side": "Sell",
  "orderType": "Limit",
  "qty": "0.000",
  "price": "55888.1",
  "timeInForce": "GTC",
  "positionIdx": 0,
  "reduceOnly": false,
  "stopLoss": "56000.0",
  "takeProfit": "55000.0"
}
2025-03-11 15:55:51,663 - order_service - INFO - API 응답:
{
  "retCode": 10001,
  "retMsg": "The number of contracts exceeds minimum limit allowed",
  "result": {},
  "retExtInfo": {},
  "time": 1741676151758
}
2025-03-11 15:55:52,808 - telegram_bot.monitors.auto_analyzer - INFO - 초기 분석 실행 완료
2025-03-11 15:56:03,576 - telegram_bot.handlers.system_handler - INFO - check_permission 시작
2025-03-11 15:56:03,576 - telegram_bot.handlers.system_handler - INFO - check_permission: chat_id=583881676, is_admin=True
2025-03-11 15:56:03,576 - telegram_bot.handlers.system_handler - INFO - 봇 종료 요청 (chat_id: 583881676)
2025-03-11 15:56:05,259 - telegram_bot.bot - INFO - 봇 종료 시작...
2025-03-11 15:56:05,273 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러가 중지되었습니다
2025-03-11 15:56:05,274 - telegram_bot.monitors.auto_analyzer - INFO - AutoAnalyzer가 중지되었습니다
2025-03-11 15:56:05,274 - telegram.ext.Application - INFO - Application is stopping. This might take a moment.
2025-03-11 15:56:05,274 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-03-11 15:57:19,267 - main - INFO - 환경변수 및 설정 초기화 중...
2025-03-11 15:57:19,267 - main - INFO - Bybit 테스트넷 클라이언트 초기화 중...
2025-03-11 15:57:19,531 - main - INFO - 서비스 초기화 중...
2025-03-11 15:57:19,531 - main - INFO - 마켓 데이터 서비스 중...
2025-03-11 15:57:21,290 - services.market_data_service - INFO - 마켓 데이터 로드 완료
2025-03-11 15:57:21,574 - telegram_bot.bot - INFO - 텔레그램 설정 로드:
2025-03-11 15:57:21,574 - telegram_bot.bot - INFO - - admin_chat_id: 583881676
2025-03-11 15:57:21,574 - telegram_bot.bot - INFO - - alert_chat_ids: [-1002464784986]
2025-03-11 15:57:22,038 - telegram_bot.monitors.auto_analyzer - INFO - AutoAnalyzer 초기화 시작
2025-03-11 15:57:22,039 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 설정 시작
2025-03-11 15:57:22,040 - telegram_bot.monitors.auto_analyzer - INFO - 다음 실행 예정 시간: 2025-03-11 16:00:00
2025-03-11 15:57:22,042 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-03-11 15:57:22,043 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 설정 완료
2025-03-11 15:57:22,043 - telegram_bot.bot - INFO - 봇 초기화 시작...
2025-03-11 15:57:22,043 - services.trade_history_service - INFO - === 포지션 정보 초기화 시작 ===
2025-03-11 15:57:22,044 - services.trade_history_service - INFO - 조회 기간: 2024-12-11 ~ 2025-03-11
2025-03-11 15:57:22,044 - services.trade_store - INFO - 날짜 범위 조회: 20241211 ~ 20250311
2025-03-11 15:57:22,045 - services.trade_store - INFO - 날짜: 20241211, 포지션 수: 1건
2025-03-11 15:57:22,045 - services.trade_store - INFO - 날짜: 20241212, 포지션 수: 1건
2025-03-11 15:57:22,046 - services.trade_store - INFO - 날짜: 20241213, 포지션 수: 2건
2025-03-11 15:57:22,046 - services.trade_store - INFO - 날짜: 20241214, 포지션 수: 2건
2025-03-11 15:57:22,046 - services.trade_store - INFO - 날짜: 20241215, 포지션 수: 0건
2025-03-11 15:57:22,047 - services.trade_store - INFO - 날짜: 20241216, 포지션 수: 0건
2025-03-11 15:57:22,047 - services.trade_store - INFO - 날짜: 20241217, 포지션 수: 10건
2025-03-11 15:57:22,048 - services.trade_store - INFO - 날짜: 20241218, 포지션 수: 5건
2025-03-11 15:57:22,048 - services.trade_store - INFO - 날짜: 20241219, 포지션 수: 1건
2025-03-11 15:57:22,049 - services.trade_store - INFO - 날짜: 20241220, 포지션 수: 31건
2025-03-11 15:57:22,049 - services.trade_store - INFO - 날짜: 20241221, 포지션 수: 3건
2025-03-11 15:57:22,049 - services.trade_store - INFO - 날짜: 20241222, 포지션 수: 10건
2025-03-11 15:57:22,050 - services.trade_store - INFO - 날짜: 20241223, 포지션 수: 7건
2025-03-11 15:57:22,050 - services.trade_store - INFO - 날짜: 20241224, 포지션 수: 11건
2025-03-11 15:57:22,050 - services.trade_store - INFO - 날짜: 20241225, 포지션 수: 2건
2025-03-11 15:57:22,051 - services.trade_store - INFO - 날짜: 20241226, 포지션 수: 7건
2025-03-11 15:57:22,051 - services.trade_store - INFO - 날짜: 20241227, 포지션 수: 7건
2025-03-11 15:57:22,052 - services.trade_store - INFO - 날짜: 20241228, 포지션 수: 4건
2025-03-11 15:57:22,052 - services.trade_store - INFO - 날짜: 20241229, 포지션 수: 0건
2025-03-11 15:57:22,054 - services.trade_store - INFO - 날짜: 20241230, 포지션 수: 15건
2025-03-11 15:57:22,054 - services.trade_store - INFO - 날짜: 20241231, 포지션 수: 8건
2025-03-11 15:57:22,054 - services.trade_store - INFO - 날짜: 20250101, 포지션 수: 0건
2025-03-11 15:57:22,054 - services.trade_store - INFO - 날짜: 20250102, 포지션 수: 0건
2025-03-11 15:57:22,054 - services.trade_store - INFO - 날짜: 20250103, 포지션 수: 0건
2025-03-11 15:57:22,056 - services.trade_store - INFO - 날짜: 20250104, 포지션 수: 0건
2025-03-11 15:57:22,056 - services.trade_store - INFO - 날짜: 20250105, 포지션 수: 0건
2025-03-11 15:57:22,056 - services.trade_store - INFO - 날짜: 20250106, 포지션 수: 0건
2025-03-11 15:57:22,056 - services.trade_store - INFO - 날짜: 20250107, 포지션 수: 0건
2025-03-11 15:57:22,057 - services.trade_store - INFO - 날짜: 20250108, 포지션 수: 0건
2025-03-11 15:57:22,057 - services.trade_store - INFO - 날짜: 20250109, 포지션 수: 0건
2025-03-11 15:57:22,057 - services.trade_store - INFO - 날짜: 20250110, 포지션 수: 0건
2025-03-11 15:57:22,057 - services.trade_store - INFO - 날짜: 20250111, 포지션 수: 0건
2025-03-11 15:57:22,057 - services.trade_store - INFO - 날짜: 20250112, 포지션 수: 0건
2025-03-11 15:57:22,057 - services.trade_store - INFO - 날짜: 20250113, 포지션 수: 0건
2025-03-11 15:57:22,058 - services.trade_store - INFO - 날짜: 20250114, 포지션 수: 0건
2025-03-11 15:57:22,058 - services.trade_store - INFO - 날짜: 20250115, 포지션 수: 0건
2025-03-11 15:57:22,058 - services.trade_store - INFO - 날짜: 20250116, 포지션 수: 0건
2025-03-11 15:57:22,058 - services.trade_store - INFO - 날짜: 20250117, 포지션 수: 0건
2025-03-11 15:57:22,058 - services.trade_store - INFO - 날짜: 20250118, 포지션 수: 0건
2025-03-11 15:57:22,058 - services.trade_store - INFO - 날짜: 20250119, 포지션 수: 0건
2025-03-11 15:57:22,059 - services.trade_store - INFO - 날짜: 20250120, 포지션 수: 0건
2025-03-11 15:57:22,059 - services.trade_store - INFO - 날짜: 20250121, 포지션 수: 0건
2025-03-11 15:57:22,059 - services.trade_store - INFO - 날짜: 20250122, 포지션 수: 0건
2025-03-11 15:57:22,059 - services.trade_store - INFO - 날짜: 20250123, 포지션 수: 0건
2025-03-11 15:57:22,059 - services.trade_store - INFO - 날짜: 20250124, 포지션 수: 0건
2025-03-11 15:57:22,059 - services.trade_store - INFO - 날짜: 20250125, 포지션 수: 0건
2025-03-11 15:57:22,060 - services.trade_store - INFO - 날짜: 20250126, 포지션 수: 0건
2025-03-11 15:57:22,060 - services.trade_store - INFO - 날짜: 20250127, 포지션 수: 0건
2025-03-11 15:57:22,060 - services.trade_store - INFO - 날짜: 20250128, 포지션 수: 0건
2025-03-11 15:57:22,060 - services.trade_store - INFO - 날짜: 20250129, 포지션 수: 0건
2025-03-11 15:57:22,060 - services.trade_store - INFO - 날짜: 20250130, 포지션 수: 0건
2025-03-11 15:57:22,061 - services.trade_store - INFO - 날짜: 20250131, 포지션 수: 0건
2025-03-11 15:57:22,061 - services.trade_store - INFO - 날짜: 20250201, 포지션 수: 0건
2025-03-11 15:57:22,061 - services.trade_store - INFO - 날짜: 20250202, 포지션 수: 0건
2025-03-11 15:57:22,061 - services.trade_store - INFO - 날짜: 20250203, 포지션 수: 0건
2025-03-11 15:57:22,061 - services.trade_store - INFO - 날짜: 20250204, 포지션 수: 0건
2025-03-11 15:57:22,061 - services.trade_store - INFO - 날짜: 20250205, 포지션 수: 0건
2025-03-11 15:57:22,062 - services.trade_store - INFO - 날짜: 20250206, 포지션 수: 0건
2025-03-11 15:57:22,062 - services.trade_store - INFO - 날짜: 20250207, 포지션 수: 0건
2025-03-11 15:57:22,062 - services.trade_store - INFO - 날짜: 20250208, 포지션 수: 0건
2025-03-11 15:57:22,063 - services.trade_store - INFO - 날짜: 20250209, 포지션 수: 0건
2025-03-11 15:57:22,063 - services.trade_store - INFO - 날짜: 20250210, 포지션 수: 0건
2025-03-11 15:57:22,063 - services.trade_store - INFO - 날짜: 20250211, 포지션 수: 0건
2025-03-11 15:57:22,064 - services.trade_store - INFO - 날짜: 20250212, 포지션 수: 0건
2025-03-11 15:57:22,064 - services.trade_store - INFO - 날짜: 20250213, 포지션 수: 0건
2025-03-11 15:57:22,065 - services.trade_store - INFO - 날짜: 20250214, 포지션 수: 2건
2025-03-11 15:57:22,065 - services.trade_store - INFO - 날짜: 20250215, 포지션 수: 2건
2025-03-11 15:57:22,065 - services.trade_store - INFO - 날짜: 20250216, 포지션 수: 0건
2025-03-11 15:57:22,066 - services.trade_store - INFO - 날짜: 20250217, 포지션 수: 2건
2025-03-11 15:57:22,066 - services.trade_store - INFO - 날짜: 20250218, 포지션 수: 0건
2025-03-11 15:57:22,066 - services.trade_store - INFO - 날짜: 20250219, 포지션 수: 0건
2025-03-11 15:57:22,066 - services.trade_store - INFO - 날짜: 20250220, 포지션 수: 0건
2025-03-11 15:57:22,067 - services.trade_store - INFO - 날짜: 20250221, 포지션 수: 2건
2025-03-11 15:57:22,067 - services.trade_store - INFO - 날짜: 20250222, 포지션 수: 0건
2025-03-11 15:57:22,067 - services.trade_store - INFO - 날짜: 20250223, 포지션 수: 0건
2025-03-11 15:57:22,067 - services.trade_store - INFO - 날짜: 20250224, 포지션 수: 0건
2025-03-11 15:57:22,067 - services.trade_store - INFO - 날짜: 20250225, 포지션 수: 0건
2025-03-11 15:57:22,067 - services.trade_store - INFO - 날짜: 20250226, 포지션 수: 0건
2025-03-11 15:57:22,067 - services.trade_store - INFO - 날짜: 20250227, 포지션 수: 0건
2025-03-11 15:57:22,068 - services.trade_store - INFO - 날짜: 20250228, 포지션 수: 0건
2025-03-11 15:57:22,068 - services.trade_store - INFO - 날짜: 20250301, 포지션 수: 0건
2025-03-11 15:57:22,068 - services.trade_store - INFO - 날짜: 20250302, 포지션 수: 0건
2025-03-11 15:57:22,068 - services.trade_store - INFO - 날짜: 20250303, 포지션 수: 0건
2025-03-11 15:57:22,068 - services.trade_store - INFO - 날짜: 20250304, 포지션 수: 0건
2025-03-11 15:57:22,068 - services.trade_store - INFO - 날짜: 20250305, 포지션 수: 0건
2025-03-11 15:57:22,068 - services.trade_store - INFO - 날짜: 20250306, 포지션 수: 0건
2025-03-11 15:57:22,069 - services.trade_store - INFO - 날짜: 20250307, 포지션 수: 0건
2025-03-11 15:57:22,069 - services.trade_store - INFO - 날짜: 20250308, 포지션 수: 0건
2025-03-11 15:57:22,069 - services.trade_store - INFO - 날짜: 20250309, 포지션 수: 0건
2025-03-11 15:57:22,069 - services.trade_store - INFO - 날짜: 20250310, 포지션 수: 0건
2025-03-11 15:57:22,069 - services.trade_store - INFO - 날짜: 20250311, 포지션 수: 0건
2025-03-11 15:57:22,070 - services.trade_store - INFO - 총 135건의 포지션 데이터 로드됨
2025-03-11 15:57:22,070 - services.trade_history_service - INFO - 기존 데이터: 135건
2025-03-11 15:57:22,566 - telegram_bot.bot - INFO - 명령어 핸들러 등록 시작...
2025-03-11 15:57:22,567 - telegram_bot.bot - INFO - 명령어 핸들러 등록 완료
2025-03-11 15:57:22,567 - telegram_bot.bot - INFO - 봇 초기화 완료, 시작 준비 중...
2025-03-11 15:57:22,568 - telegram_bot.bot - INFO - 봇 시작 시도...
2025-03-11 15:57:22,568 - telegram_bot.bot - INFO - === 봇 시작 시도 ===
2025-03-11 15:57:23,624 - apscheduler.scheduler - INFO - Scheduler started
2025-03-11 15:57:23,624 - telegram.ext.Application - INFO - Application started
2025-03-11 15:57:23,624 - telegram_bot.bot - INFO - 🤖 바이빗 트레이딩 봇이 시작되었습니다
2025-03-11 15:57:24,588 - telegram_bot.monitors.auto_analyzer - INFO - AutoAnalyzer 시작 요청됨
2025-03-11 15:57:24,588 - apscheduler.scheduler - INFO - Added job "AutoAnalyzer._scheduled_analysis" to job store "default"
2025-03-11 15:57:24,588 - apscheduler.scheduler - INFO - Scheduler started
2025-03-11 15:57:24,590 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 시작됨. 다음 실행 시간: 2025-03-11 16:00:00+09:00
2025-03-11 15:57:24,590 - telegram_bot.monitors.auto_analyzer - INFO - 초기 분석 실행 시작
2025-03-11 15:57:24,590 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄된 분석 시작 - 2025-03-11 15:57:24.590231
2025-03-11 15:57:24,591 - telegram_bot.monitors.auto_analyzer - INFO - 🔄' 1시간봉 분석 시작 (자동) ...
2025-03-11 15:57:24,591 - services.market_data_service - INFO - OHLCV 데이터 조회 시작 - 심볼: BTCUSDT, 시간대: 1h
2025-03-11 15:57:24,882 - ai.gpt_analyzer - INFO - 계산된 지표: ['open', 'high', 'low', 'close', 'volume', 'price_change_24h', 'volume_change_24h', 'rsi', 'macd', 'macd_signal', 'bb_upper', 'bb_middle', 'bb_lower', 'sma_10', 'sma_30', 'adx', 'di_plus', 'di_minus', 'trend', 'trend_strength', 'divergence_type', 'divergence_desc']
2025-03-11 15:57:24,882 - ai.gpt_analyzer - INFO - 시장 데이터: {'symbol': 'BTCUSDT', 'last_price': 55888.1, 'bid': 55810.0, 'ask': 55888.1, 'volume': 827090.534, 'timestamp': None}
2025-03-11 15:57:24,897 - ai.gpt_client - INFO - GPT API 호출 시작 (캐시 사용: False)
2025-03-11 15:57:24,897 - ai.gpt_client - INFO - 캐시 사용하지 않음 - 실제 API 호출
2025-03-11 15:57:27,240 - telegram_bot.formatters.storage_formatter - INFO - 1h 분석 결과 저장 완료: C:\Users\oasis\Aibybit_2\src\data\analysis\analysis_1h.json
2025-03-11 15:57:28,192 - telegram_bot.monitors.auto_analyzer - INFO - 분석 결과 position_suggestion: SELL
2025-03-11 15:57:28,192 - telegram_bot.monitors.auto_analyzer - INFO - 매매 신호 감지: SELL
2025-03-11 15:57:28,192 - order_service - INFO - 매매 신호 실행: {'position_suggestion': 'SELL', 'leverage': 5, 'position_size': 10, 'entry_price': 55888.1, 'stop_loss': 56000.0, 'take_profit1': 55000.0, 'take_profit2': 54000.0, 'reason': '하락 추세 및 부정적인 지표'}
2025-03-11 15:57:28,192 - order_service - INFO - 주문 시도: {'symbol': 'BTCUSDT', 'side': 'Sell', 'leverage': 5, 'position_size': 10, 'entry_price': 55888.1, 'stop_loss': 56000.0, 'take_profit': 55000.0, 'is_btc_unit': False}
2025-03-11 15:57:28,192 - order_service - INFO - 주문 상세 정보: {
  "symbol": "BTCUSDT",
  "side": "Sell",
  "leverage": 5,
  "position_size": 10,
  "entry_price": 55888.1,
  "stop_loss": 56000.0,
  "take_profit": 55000.0,
  "is_btc_unit": false
}
2025-03-11 15:57:28,192 - order_service - INFO - 주문 시도: {'symbol': 'BTCUSDT', 'side': 'Sell', 'leverage': 5, 'position_size': 10, 'entry_price': 55888.1, 'stop_loss': 56000.0, 'take_profit': 55000.0, 'is_btc_unit': False}
2025-03-11 15:57:28,564 - order_service - INFO - 현재 포지션: {'symbol': 'BTC/USDT:USDT', 'side': 'Short', 'size': 0.476, 'leverage': 5, 'entryPrice': 55788.18791621, 'markPrice': 55888.1, 'unrealisedPnl': -47.55815188, 'stopLoss': 0.0, 'takeProfit': 0.0}
2025-03-11 15:57:28,565 - order_service - INFO - 레버리지 차이가 작음(0) - 크기만 조정
2025-03-11 15:57:28,755 - exchange.bybit_client - INFO - USDT 잔고 - 총자산: $53,211.90, 가용잔고: $0.00, 사용중: $0.00
2025-03-11 15:57:28,755 - order_service - INFO - 가용 잔고: $0.0, 총 자산: $53211.90364892, 사용중: $0.0
2025-03-11 15:57:28,939 - order_service - INFO - 계산 입력값 - 총자산: $53211.90364892, 미실현손익: $0.0, 비율: 10%, 레버리지: 5배, 진입가: $55888.1
2025-03-11 15:57:28,939 - order_service - INFO - 순수 자산: $53211.90364892
2025-03-11 15:57:28,939 - order_service - INFO - 포지션 가치(USDT): $26605.951824460004
2025-03-11 15:57:28,939 - order_service - INFO - 계산된 BTC 수량: 0.47605754757202345
2025-03-11 15:57:28,939 - order_service - INFO - 최종 BTC 수량(반올림): 0.476
2025-03-11 15:57:29,107 - order_service - INFO - 주문 상세 정보: {
  "symbol": "BTCUSDT",
  "side": "Sell",
  "leverage": 5,
  "position_size": 0.0,
  "entry_price": 55888.1,
  "stop_loss": 56000.0,
  "take_profit": 55000.0,
  "is_btc_unit": false,
  "is_reduce_only": false,
  "needs_sl_tp": true
}
2025-03-11 15:57:29,283 - exchange.bybit_client - INFO - USDT 잔고 - 총자산: $53,211.90, 가용잔고: $0.00, 사용중: $0.00
2025-03-11 15:57:29,291 - order_service - INFO - USDT 잔고 - 총자산: $53211.90364892, 가용잔고: $0.0, 사용중: $0.0
2025-03-11 15:57:29,291 - order_service - INFO - 주문 실행 시도: {'category': 'linear', 'symbol': 'BTCUSDT', 'side': 'Sell', 'orderType': 'Limit', 'qty': '0.000', 'price': '55888.1', 'timeInForce': 'GTC', 'positionIdx': 0, 'reduceOnly': False, 'stopLoss': '56000.0', 'takeProfit': '55000.0'}
2025-03-11 15:57:29,407 - exchange.bybit_client - INFO - 서버 시간 동기화 완료: server_time=1741676249000, local_time=1741676249407, offset=-407ms
2025-03-11 15:57:29,676 - order_service - INFO - === 주문 요청 및 응답 상세 ===
2025-03-11 15:57:29,677 - order_service - INFO - 요청 파라미터:
{
  "category": "linear",
  "symbol": "BTCUSDT",
  "side": "Sell",
  "orderType": "Limit",
  "qty": "0.000",
  "price": "55888.1",
  "timeInForce": "GTC",
  "positionIdx": 0,
  "reduceOnly": false,
  "stopLoss": "56000.0",
  "takeProfit": "55000.0"
}
2025-03-11 15:57:29,678 - order_service - INFO - API 응답:
{
  "retCode": 10001,
  "retMsg": "The number of contracts exceeds minimum limit allowed",
  "result": {},
  "retExtInfo": {},
  "time": 1741676249772
}
2025-03-11 15:57:30,659 - telegram_bot.monitors.auto_analyzer - INFO - 초기 분석 실행 완료
2025-03-11 15:57:39,861 - telegram_bot.handlers.system_handler - INFO - check_permission 시작
2025-03-11 15:57:39,873 - telegram_bot.handlers.system_handler - INFO - check_permission: chat_id=583881676, is_admin=True
2025-03-11 15:57:39,873 - telegram_bot.handlers.system_handler - INFO - 봇 종료 요청 (chat_id: 583881676)
2025-03-11 15:57:41,524 - telegram_bot.handlers.system_handler - INFO - 프로세스 종료
2025-03-11 16:00:10,599 - main - INFO - 환경변수 및 설정 초기화 중...
2025-03-11 16:00:10,600 - main - INFO - Bybit 테스트넷 클라이언트 초기화 중...
2025-03-11 16:00:10,824 - main - INFO - 서비스 초기화 중...
2025-03-11 16:00:10,824 - main - INFO - 마켓 데이터 서비스 중...
2025-03-11 16:00:12,490 - services.market_data_service - INFO - 마켓 데이터 로드 완료
2025-03-11 16:00:12,727 - telegram_bot.bot - INFO - 텔레그램 설정 로드:
2025-03-11 16:00:12,727 - telegram_bot.bot - INFO - - admin_chat_id: 583881676
2025-03-11 16:00:12,728 - telegram_bot.bot - INFO - - alert_chat_ids: [-1002464784986]
2025-03-11 16:00:13,152 - telegram_bot.monitors.auto_analyzer - INFO - AutoAnalyzer 초기화 시작
2025-03-11 16:00:13,153 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 설정 시작
2025-03-11 16:00:13,155 - telegram_bot.monitors.auto_analyzer - INFO - 다음 실행 예정 시간: 2025-03-11 17:00:00
2025-03-11 16:00:13,156 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-03-11 16:00:13,157 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 설정 완료
2025-03-11 16:00:13,157 - telegram_bot.bot - INFO - 봇 초기화 시작...
2025-03-11 16:00:13,158 - services.trade_history_service - INFO - === 포지션 정보 초기화 시작 ===
2025-03-11 16:00:13,158 - services.trade_history_service - INFO - 조회 기간: 2024-12-11 ~ 2025-03-11
2025-03-11 16:00:13,159 - services.trade_store - INFO - 날짜 범위 조회: 20241211 ~ 20250311
2025-03-11 16:00:13,159 - services.trade_store - INFO - 날짜: 20241211, 포지션 수: 1건
2025-03-11 16:00:13,159 - services.trade_store - INFO - 날짜: 20241212, 포지션 수: 1건
2025-03-11 16:00:13,161 - services.trade_store - INFO - 날짜: 20241213, 포지션 수: 2건
2025-03-11 16:00:13,161 - services.trade_store - INFO - 날짜: 20241214, 포지션 수: 2건
2025-03-11 16:00:13,161 - services.trade_store - INFO - 날짜: 20241215, 포지션 수: 0건
2025-03-11 16:00:13,161 - services.trade_store - INFO - 날짜: 20241216, 포지션 수: 0건
2025-03-11 16:00:13,162 - services.trade_store - INFO - 날짜: 20241217, 포지션 수: 10건
2025-03-11 16:00:13,162 - services.trade_store - INFO - 날짜: 20241218, 포지션 수: 5건
2025-03-11 16:00:13,162 - services.trade_store - INFO - 날짜: 20241219, 포지션 수: 1건
2025-03-11 16:00:13,163 - services.trade_store - INFO - 날짜: 20241220, 포지션 수: 31건
2025-03-11 16:00:13,163 - services.trade_store - INFO - 날짜: 20241221, 포지션 수: 3건
2025-03-11 16:00:13,163 - services.trade_store - INFO - 날짜: 20241222, 포지션 수: 10건
2025-03-11 16:00:13,164 - services.trade_store - INFO - 날짜: 20241223, 포지션 수: 7건
2025-03-11 16:00:13,164 - services.trade_store - INFO - 날짜: 20241224, 포지션 수: 11건
2025-03-11 16:00:13,165 - services.trade_store - INFO - 날짜: 20241225, 포지션 수: 2건
2025-03-11 16:00:13,165 - services.trade_store - INFO - 날짜: 20241226, 포지션 수: 7건
2025-03-11 16:00:13,166 - services.trade_store - INFO - 날짜: 20241227, 포지션 수: 7건
2025-03-11 16:00:13,166 - services.trade_store - INFO - 날짜: 20241228, 포지션 수: 4건
2025-03-11 16:00:13,166 - services.trade_store - INFO - 날짜: 20241229, 포지션 수: 0건
2025-03-11 16:00:13,167 - services.trade_store - INFO - 날짜: 20241230, 포지션 수: 15건
2025-03-11 16:00:13,167 - services.trade_store - INFO - 날짜: 20241231, 포지션 수: 8건
2025-03-11 16:00:13,167 - services.trade_store - INFO - 날짜: 20250101, 포지션 수: 0건
2025-03-11 16:00:13,168 - services.trade_store - INFO - 날짜: 20250102, 포지션 수: 0건
2025-03-11 16:00:13,168 - services.trade_store - INFO - 날짜: 20250103, 포지션 수: 0건
2025-03-11 16:00:13,168 - services.trade_store - INFO - 날짜: 20250104, 포지션 수: 0건
2025-03-11 16:00:13,168 - services.trade_store - INFO - 날짜: 20250105, 포지션 수: 0건
2025-03-11 16:00:13,168 - services.trade_store - INFO - 날짜: 20250106, 포지션 수: 0건
2025-03-11 16:00:13,169 - services.trade_store - INFO - 날짜: 20250107, 포지션 수: 0건
2025-03-11 16:00:13,169 - services.trade_store - INFO - 날짜: 20250108, 포지션 수: 0건
2025-03-11 16:00:13,169 - services.trade_store - INFO - 날짜: 20250109, 포지션 수: 0건
2025-03-11 16:00:13,169 - services.trade_store - INFO - 날짜: 20250110, 포지션 수: 0건
2025-03-11 16:00:13,169 - services.trade_store - INFO - 날짜: 20250111, 포지션 수: 0건
2025-03-11 16:00:13,169 - services.trade_store - INFO - 날짜: 20250112, 포지션 수: 0건
2025-03-11 16:00:13,170 - services.trade_store - INFO - 날짜: 20250113, 포지션 수: 0건
2025-03-11 16:00:13,170 - services.trade_store - INFO - 날짜: 20250114, 포지션 수: 0건
2025-03-11 16:00:13,170 - services.trade_store - INFO - 날짜: 20250115, 포지션 수: 0건
2025-03-11 16:00:13,170 - services.trade_store - INFO - 날짜: 20250116, 포지션 수: 0건
2025-03-11 16:00:13,170 - services.trade_store - INFO - 날짜: 20250117, 포지션 수: 0건
2025-03-11 16:00:13,171 - services.trade_store - INFO - 날짜: 20250118, 포지션 수: 0건
2025-03-11 16:00:13,171 - services.trade_store - INFO - 날짜: 20250119, 포지션 수: 0건
2025-03-11 16:00:13,171 - services.trade_store - INFO - 날짜: 20250120, 포지션 수: 0건
2025-03-11 16:00:13,171 - services.trade_store - INFO - 날짜: 20250121, 포지션 수: 0건
2025-03-11 16:00:13,171 - services.trade_store - INFO - 날짜: 20250122, 포지션 수: 0건
2025-03-11 16:00:13,172 - services.trade_store - INFO - 날짜: 20250123, 포지션 수: 0건
2025-03-11 16:00:13,172 - services.trade_store - INFO - 날짜: 20250124, 포지션 수: 0건
2025-03-11 16:00:13,172 - services.trade_store - INFO - 날짜: 20250125, 포지션 수: 0건
2025-03-11 16:00:13,172 - services.trade_store - INFO - 날짜: 20250126, 포지션 수: 0건
2025-03-11 16:00:13,172 - services.trade_store - INFO - 날짜: 20250127, 포지션 수: 0건
2025-03-11 16:00:13,172 - services.trade_store - INFO - 날짜: 20250128, 포지션 수: 0건
2025-03-11 16:00:13,172 - services.trade_store - INFO - 날짜: 20250129, 포지션 수: 0건
2025-03-11 16:00:13,172 - services.trade_store - INFO - 날짜: 20250130, 포지션 수: 0건
2025-03-11 16:00:13,174 - services.trade_store - INFO - 날짜: 20250131, 포지션 수: 0건
2025-03-11 16:00:13,174 - services.trade_store - INFO - 날짜: 20250201, 포지션 수: 0건
2025-03-11 16:00:13,174 - services.trade_store - INFO - 날짜: 20250202, 포지션 수: 0건
2025-03-11 16:00:13,175 - services.trade_store - INFO - 날짜: 20250203, 포지션 수: 0건
2025-03-11 16:00:13,175 - services.trade_store - INFO - 날짜: 20250204, 포지션 수: 0건
2025-03-11 16:00:13,175 - services.trade_store - INFO - 날짜: 20250205, 포지션 수: 0건
2025-03-11 16:00:13,176 - services.trade_store - INFO - 날짜: 20250206, 포지션 수: 0건
2025-03-11 16:00:13,176 - services.trade_store - INFO - 날짜: 20250207, 포지션 수: 0건
2025-03-11 16:00:13,176 - services.trade_store - INFO - 날짜: 20250208, 포지션 수: 0건
2025-03-11 16:00:13,176 - services.trade_store - INFO - 날짜: 20250209, 포지션 수: 0건
2025-03-11 16:00:13,177 - services.trade_store - INFO - 날짜: 20250210, 포지션 수: 0건
2025-03-11 16:00:13,177 - services.trade_store - INFO - 날짜: 20250211, 포지션 수: 0건
2025-03-11 16:00:13,177 - services.trade_store - INFO - 날짜: 20250212, 포지션 수: 0건
2025-03-11 16:00:13,177 - services.trade_store - INFO - 날짜: 20250213, 포지션 수: 0건
2025-03-11 16:00:13,178 - services.trade_store - INFO - 날짜: 20250214, 포지션 수: 2건
2025-03-11 16:00:13,178 - services.trade_store - INFO - 날짜: 20250215, 포지션 수: 2건
2025-03-11 16:00:13,178 - services.trade_store - INFO - 날짜: 20250216, 포지션 수: 0건
2025-03-11 16:00:13,179 - services.trade_store - INFO - 날짜: 20250217, 포지션 수: 2건
2025-03-11 16:00:13,179 - services.trade_store - INFO - 날짜: 20250218, 포지션 수: 0건
2025-03-11 16:00:13,179 - services.trade_store - INFO - 날짜: 20250219, 포지션 수: 0건
2025-03-11 16:00:13,179 - services.trade_store - INFO - 날짜: 20250220, 포지션 수: 0건
2025-03-11 16:00:13,179 - services.trade_store - INFO - 날짜: 20250221, 포지션 수: 2건
2025-03-11 16:00:13,180 - services.trade_store - INFO - 날짜: 20250222, 포지션 수: 0건
2025-03-11 16:00:13,180 - services.trade_store - INFO - 날짜: 20250223, 포지션 수: 0건
2025-03-11 16:00:13,180 - services.trade_store - INFO - 날짜: 20250224, 포지션 수: 0건
2025-03-11 16:00:13,180 - services.trade_store - INFO - 날짜: 20250225, 포지션 수: 0건
2025-03-11 16:00:13,180 - services.trade_store - INFO - 날짜: 20250226, 포지션 수: 0건
2025-03-11 16:00:13,180 - services.trade_store - INFO - 날짜: 20250227, 포지션 수: 0건
2025-03-11 16:00:13,180 - services.trade_store - INFO - 날짜: 20250228, 포지션 수: 0건
2025-03-11 16:00:13,180 - services.trade_store - INFO - 날짜: 20250301, 포지션 수: 0건
2025-03-11 16:00:13,180 - services.trade_store - INFO - 날짜: 20250302, 포지션 수: 0건
2025-03-11 16:00:13,180 - services.trade_store - INFO - 날짜: 20250303, 포지션 수: 0건
2025-03-11 16:00:13,180 - services.trade_store - INFO - 날짜: 20250304, 포지션 수: 0건
2025-03-11 16:00:13,180 - services.trade_store - INFO - 날짜: 20250305, 포지션 수: 0건
2025-03-11 16:00:13,180 - services.trade_store - INFO - 날짜: 20250306, 포지션 수: 0건
2025-03-11 16:00:13,180 - services.trade_store - INFO - 날짜: 20250307, 포지션 수: 0건
2025-03-11 16:00:13,180 - services.trade_store - INFO - 날짜: 20250308, 포지션 수: 0건
2025-03-11 16:00:13,180 - services.trade_store - INFO - 날짜: 20250309, 포지션 수: 0건
2025-03-11 16:00:13,180 - services.trade_store - INFO - 날짜: 20250310, 포지션 수: 0건
2025-03-11 16:00:13,180 - services.trade_store - INFO - 날짜: 20250311, 포지션 수: 0건
2025-03-11 16:00:13,180 - services.trade_store - INFO - 총 135건의 포지션 데이터 로드됨
2025-03-11 16:00:13,180 - services.trade_history_service - INFO - 기존 데이터: 135건
2025-03-11 16:00:13,674 - telegram_bot.bot - INFO - 명령어 핸들러 등록 시작...
2025-03-11 16:00:13,674 - telegram_bot.bot - INFO - 명령어 핸들러 등록 완료
2025-03-11 16:00:13,674 - telegram_bot.bot - INFO - 봇 초기화 완료, 시작 준비 중...
2025-03-11 16:00:13,674 - telegram_bot.bot - INFO - 봇 시작 시도...
2025-03-11 16:00:13,674 - telegram_bot.bot - INFO - === 봇 시작 시도 ===
2025-03-11 16:00:14,769 - apscheduler.scheduler - INFO - Scheduler started
2025-03-11 16:00:14,770 - telegram.ext.Application - INFO - Application started
2025-03-11 16:00:14,770 - telegram_bot.bot - INFO - 🤖 바이빗 트레이딩 봇이 시작되었습니다
2025-03-11 16:00:15,855 - telegram_bot.monitors.auto_analyzer - INFO - AutoAnalyzer 시작 요청됨
2025-03-11 16:00:15,855 - apscheduler.scheduler - INFO - Added job "AutoAnalyzer._scheduled_analysis" to job store "default"
2025-03-11 16:00:15,855 - apscheduler.scheduler - INFO - Scheduler started
2025-03-11 16:00:15,855 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄러 시작됨. 다음 실행 시간: 2025-03-11 17:00:00+09:00
2025-03-11 16:00:15,855 - telegram_bot.monitors.auto_analyzer - INFO - 초기 분석 실행 시작
2025-03-11 16:00:15,855 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄된 분석 시작 - 2025-03-11 16:00:15.855544
2025-03-11 16:00:15,855 - telegram_bot.monitors.auto_analyzer - INFO - 🔄' 1시간봉 분석 시작 (자동) ...
2025-03-11 16:00:15,855 - services.market_data_service - INFO - OHLCV 데이터 조회 시작 - 심볼: BTCUSDT, 시간대: 1h
2025-03-11 16:00:16,124 - ai.gpt_analyzer - INFO - 계산된 지표: ['open', 'high', 'low', 'close', 'volume', 'price_change_24h', 'volume_change_24h', 'rsi', 'macd', 'macd_signal', 'bb_upper', 'bb_middle', 'bb_lower', 'sma_10', 'sma_30', 'adx', 'di_plus', 'di_minus', 'trend', 'trend_strength', 'divergence_type', 'divergence_desc']
2025-03-11 16:00:16,124 - ai.gpt_analyzer - INFO - 시장 데이터: {'symbol': 'BTCUSDT', 'last_price': 55776.0, 'bid': 55759.2, 'ask': 55878.1, 'volume': 827088.224, 'timestamp': None}
2025-03-11 16:00:16,125 - ai.gpt_client - INFO - GPT API 호출 시작 (캐시 사용: False)
2025-03-11 16:00:16,126 - ai.gpt_client - INFO - 캐시 사용하지 않음 - 실제 API 호출
2025-03-11 16:00:18,520 - telegram_bot.formatters.storage_formatter - INFO - 1h 분석 결과 저장 완료: C:\Users\oasis\Aibybit_2\src\data\analysis\analysis_1h.json
2025-03-11 16:00:19,594 - telegram_bot.monitors.auto_analyzer - INFO - 분석 결과 position_suggestion: HOLD
2025-03-11 16:00:19,594 - telegram_bot.monitors.auto_analyzer - INFO - 관망 신호, 자동 매매 실행하지 않음
2025-03-11 16:00:19,594 - telegram_bot.monitors.auto_analyzer - INFO - 초기 분석 실행 완료
2025-03-11 17:00:00,005 - apscheduler.executors.default - INFO - Running job "AutoAnalyzer._scheduled_analysis (trigger: interval[1:00:00], next run at: 2025-03-11 18:00:00 KST)" (scheduled at 2025-03-11 17:00:00+09:00)
2025-03-11 17:00:00,005 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄된 분석 시작 - 2025-03-11 17:00:00.005987
2025-03-11 17:00:00,005 - telegram_bot.monitors.auto_analyzer - INFO - 마지막 실행 후 3584.150443초 경과 - 스킵
2025-03-11 17:00:00,005 - apscheduler.executors.default - INFO - Job "AutoAnalyzer._scheduled_analysis (trigger: interval[1:00:00], next run at: 2025-03-11 18:00:00 KST)" executed successfully
2025-03-11 18:00:00,006 - apscheduler.executors.default - INFO - Running job "AutoAnalyzer._scheduled_analysis (trigger: interval[1:00:00], next run at: 2025-03-11 19:00:00 KST)" (scheduled at 2025-03-11 18:00:00+09:00)
2025-03-11 18:00:00,006 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄된 분석 시작 - 2025-03-11 18:00:00.006512
2025-03-11 18:00:00,006 - telegram_bot.monitors.auto_analyzer - INFO - 🔄' 1시간봉 분석 시작 (자동) ...
2025-03-11 18:00:00,006 - services.market_data_service - INFO - OHLCV 데이터 조회 시작 - 심볼: BTCUSDT, 시간대: 1h
2025-03-11 18:00:00,486 - ai.gpt_analyzer - INFO - 계산된 지표: ['open', 'high', 'low', 'close', 'volume', 'price_change_24h', 'volume_change_24h', 'rsi', 'macd', 'macd_signal', 'bb_upper', 'bb_middle', 'bb_lower', 'sma_10', 'sma_30', 'adx', 'di_plus', 'di_minus', 'trend', 'trend_strength', 'divergence_type', 'divergence_desc']
2025-03-11 18:00:00,486 - ai.gpt_analyzer - INFO - 시장 데이터: {'symbol': 'BTCUSDT', 'last_price': 53904.7, 'bid': 53842.2, 'ask': 53904.7, 'volume': 904253.281, 'timestamp': None}
2025-03-11 18:00:00,497 - ai.gpt_client - INFO - GPT API 호출 시작 (캐시 사용: False)
2025-03-11 18:00:00,497 - ai.gpt_client - INFO - 캐시 사용하지 않음 - 실제 API 호출
2025-03-11 18:00:03,628 - telegram_bot.formatters.storage_formatter - INFO - 1h 분석 결과 저장 완료: C:\Users\oasis\Aibybit_2\src\data\analysis\analysis_1h.json
2025-03-11 18:00:05,181 - telegram_bot.monitors.auto_analyzer - INFO - 분석 결과 position_suggestion: HOLD
2025-03-11 18:00:05,181 - telegram_bot.monitors.auto_analyzer - INFO - 관망 신호, 자동 매매 실행하지 않음
2025-03-11 18:00:05,181 - apscheduler.executors.default - INFO - Job "AutoAnalyzer._scheduled_analysis (trigger: interval[1:00:00], next run at: 2025-03-11 19:00:00 KST)" executed successfully
2025-03-11 19:00:00,003 - apscheduler.executors.default - INFO - Running job "AutoAnalyzer._scheduled_analysis (trigger: interval[1:00:00], next run at: 2025-03-11 20:00:00 KST)" (scheduled at 2025-03-11 19:00:00+09:00)
2025-03-11 19:00:00,003 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄된 분석 시작 - 2025-03-11 19:00:00.003430
2025-03-11 19:00:00,003 - telegram_bot.monitors.auto_analyzer - INFO - 마지막 실행 후 3599.996918초 경과 - 스킵
2025-03-11 19:00:00,003 - apscheduler.executors.default - INFO - Job "AutoAnalyzer._scheduled_analysis (trigger: interval[1:00:00], next run at: 2025-03-11 20:00:00 KST)" executed successfully
2025-03-11 20:00:00,013 - apscheduler.executors.default - INFO - Running job "AutoAnalyzer._scheduled_analysis (trigger: interval[1:00:00], next run at: 2025-03-11 21:00:00 KST)" (scheduled at 2025-03-11 20:00:00+09:00)
2025-03-11 20:00:00,015 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄된 분석 시작 - 2025-03-11 20:00:00.015719
2025-03-11 20:00:00,015 - telegram_bot.monitors.auto_analyzer - INFO - 🔄' 1시간봉 분석 시작 (자동) ...
2025-03-11 20:00:00,015 - services.market_data_service - INFO - OHLCV 데이터 조회 시작 - 심볼: BTCUSDT, 시간대: 1h
2025-03-11 20:00:00,405 - ai.gpt_analyzer - INFO - 계산된 지표: ['open', 'high', 'low', 'close', 'volume', 'price_change_24h', 'volume_change_24h', 'rsi', 'macd', 'macd_signal', 'bb_upper', 'bb_middle', 'bb_lower', 'sma_10', 'sma_30', 'adx', 'di_plus', 'di_minus', 'trend', 'trend_strength', 'divergence_type', 'divergence_desc']
2025-03-11 20:00:00,405 - ai.gpt_analyzer - INFO - 시장 데이터: {'symbol': 'BTCUSDT', 'last_price': 64385.8, 'bid': 64346.4, 'ask': 64385.8, 'volume': 845959.238, 'timestamp': None}
2025-03-11 20:00:00,409 - ai.gpt_client - INFO - GPT API 호출 시작 (캐시 사용: False)
2025-03-11 20:00:00,411 - ai.gpt_client - INFO - 캐시 사용하지 않음 - 실제 API 호출
2025-03-11 20:00:03,535 - telegram_bot.formatters.storage_formatter - INFO - 1h 분석 결과 저장 완료: C:\Users\oasis\Aibybit_2\src\data\analysis\analysis_1h.json
2025-03-11 20:00:05,116 - telegram_bot.monitors.auto_analyzer - INFO - 분석 결과 position_suggestion: BUY
2025-03-11 20:00:05,116 - telegram_bot.monitors.auto_analyzer - INFO - 매매 신호 감지: BUY
2025-03-11 20:00:05,116 - order_service - INFO - 매매 신호 실행: {'position_suggestion': 'BUY', 'leverage': 5, 'position_size': 10, 'entry_price': 64385.8, 'stop_loss': 63000.0, 'take_profit1': 66000.0, 'take_profit2': 67000.0, 'reason': '상승 추세, RSI > 50, MACD > 0, 볼린저밴드 중앙 이상'}
2025-03-11 20:00:05,118 - order_service - INFO - 주문 시도: {'symbol': 'BTCUSDT', 'side': 'Buy', 'leverage': 5, 'position_size': 10, 'entry_price': 64385.8, 'stop_loss': 63000.0, 'take_profit': 66000.0, 'is_btc_unit': False}
2025-03-11 20:00:05,118 - order_service - INFO - 주문 상세 정보: {
  "symbol": "BTCUSDT",
  "side": "Buy",
  "leverage": 5,
  "position_size": 10,
  "entry_price": 64385.8,
  "stop_loss": 63000.0,
  "take_profit": 66000.0,
  "is_btc_unit": false
}
2025-03-11 20:00:05,120 - order_service - INFO - 주문 시도: {'symbol': 'BTCUSDT', 'side': 'Buy', 'leverage': 5, 'position_size': 10, 'entry_price': 64385.8, 'stop_loss': 63000.0, 'take_profit': 66000.0, 'is_btc_unit': False}
2025-03-11 20:00:05,700 - order_service - INFO - 현재 포지션: {}
2025-03-11 20:00:05,700 - order_service - INFO - 포지션 없음 - 신규 진입 시도
2025-03-11 20:00:05,700 - order_service - INFO - 신규 포지션 생성 시도: {'symbol': 'BTCUSDT', 'side': 'Buy', 'leverage': 5, 'position_size': 10, 'entry_price': 64385.8, 'stop_loss': 63000.0, 'take_profit': 66000.0, 'is_btc_unit': False}
2025-03-11 20:00:05,700 - order_service - INFO - 레버리지 설정 시도: 5x
2025-03-11 20:00:06,099 - exchange.bybit_client - INFO - 서버 시간 동기화 완료: server_time=1741690806000, local_time=1741690806099, offset=-99ms
2025-03-11 20:00:06,243 - order_service - INFO - 레버리지 설정 확인: 5x
2025-03-11 20:00:06,419 - exchange.bybit_client - INFO - USDT 잔고 - 총자산: $52,522.12, 가용잔고: $0.00, 사용중: $0.00
2025-03-11 20:00:06,610 - order_service - INFO - 계산 입력값 - 총자산: $52522.12170644, 미실현손익: $0.0, 비율: 10%, 레버리지: 5배, 진입가: $64385.8
2025-03-11 20:00:06,610 - order_service - INFO - 순수 자산: $52522.12170644
2025-03-11 20:00:06,610 - order_service - INFO - 포지션 가치(USDT): $26261.060853220002
2025-03-11 20:00:06,610 - order_service - INFO - 계산된 BTC 수량: 0.4078703821839598
2025-03-11 20:00:06,610 - order_service - INFO - 최종 BTC 수량(반올림): 0.408
2025-03-11 20:00:06,610 - order_service - INFO - 계산된 BTC 수량: 0.408 (총자산: $52522.12170644, 목표비율: 10%, 레버리지: 5x)
2025-03-11 20:00:06,610 - exchange.bybit_client - INFO - 주문 파라미터: {'category': 'linear', 'symbol': 'BTCUSDT', 'side': 'Buy', 'qty': '0.408', 'price': '64385.8', 'orderType': 'Limit', 'timeInForce': 'GTC', 'positionIdx': 0, 'stopLoss': '63000.0', 'takeProfit': '66000.0'}
2025-03-11 20:00:06,897 - exchange.bybit_client - INFO - 주문 API 응답: {'retCode': 0, 'retMsg': 'OK', 'result': {'orderId': 'ac5c41d7-9698-489f-a263-90c2b767584d', 'orderLinkId': ''}, 'retExtInfo': {}, 'time': 1741690807063}
2025-03-11 20:00:06,897 - order_service - INFO - 신규 포지션 생성 성공: {'category': 'linear', 'symbol': 'BTCUSDT', 'side': 'Buy', 'qty': '0.408', 'price': '64385.8', 'orderType': 'Limit', 'timeInForce': 'GTC', 'positionIdx': 0, 'stopLoss': '63000.0', 'takeProfit': '66000.0'}
2025-03-11 20:00:06,897 - order_service - INFO - 주문 결과:
2025-03-11 20:00:06,897 - order_service - INFO - {
  "retCode": 0,
  "retMsg": "OK",
  "result": {
    "orderId": "ac5c41d7-9698-489f-a263-90c2b767584d",
    "orderLinkId": ""
  },
  "retExtInfo": {},
  "time": 1741690807063
}
2025-03-11 20:00:07,924 - apscheduler.executors.default - INFO - Job "AutoAnalyzer._scheduled_analysis (trigger: interval[1:00:00], next run at: 2025-03-11 21:00:00 KST)" executed successfully
2025-03-11 21:00:00,020 - apscheduler.executors.default - INFO - Running job "AutoAnalyzer._scheduled_analysis (trigger: interval[1:00:00], next run at: 2025-03-11 22:00:00 KST)" (scheduled at 2025-03-11 21:00:00+09:00)
2025-03-11 21:00:00,022 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄된 분석 시작 - 2025-03-11 21:00:00.022305
2025-03-11 21:00:00,022 - telegram_bot.monitors.auto_analyzer - INFO - 🔄' 1시간봉 분석 시작 (자동) ...
2025-03-11 21:00:00,022 - services.market_data_service - INFO - OHLCV 데이터 조회 시작 - 심볼: BTCUSDT, 시간대: 1h
2025-03-11 21:00:00,548 - ai.gpt_analyzer - INFO - 계산된 지표: ['open', 'high', 'low', 'close', 'volume', 'price_change_24h', 'volume_change_24h', 'rsi', 'macd', 'macd_signal', 'bb_upper', 'bb_middle', 'bb_lower', 'sma_10', 'sma_30', 'adx', 'di_plus', 'di_minus', 'trend', 'trend_strength', 'divergence_type', 'divergence_desc']
2025-03-11 21:00:00,548 - ai.gpt_analyzer - INFO - 시장 데이터: {'symbol': 'BTCUSDT', 'last_price': 50705.8, 'bid': 50671.1, 'ask': 50705.8, 'volume': 551200.113, 'timestamp': None}
2025-03-11 21:00:00,562 - ai.gpt_client - INFO - GPT API 호출 시작 (캐시 사용: False)
2025-03-11 21:00:00,562 - ai.gpt_client - INFO - 캐시 사용하지 않음 - 실제 API 호출
2025-03-11 21:00:03,593 - telegram_bot.formatters.storage_formatter - INFO - 1h 분석 결과 저장 완료: C:\Users\oasis\Aibybit_2\src\data\analysis\analysis_1h.json
2025-03-11 21:00:05,274 - telegram_bot.monitors.auto_analyzer - INFO - 분석 결과 position_suggestion: HOLD
2025-03-11 21:00:05,274 - telegram_bot.monitors.auto_analyzer - INFO - 관망 신호, 자동 매매 실행하지 않음
2025-03-11 21:00:05,278 - apscheduler.executors.default - INFO - Job "AutoAnalyzer._scheduled_analysis (trigger: interval[1:00:00], next run at: 2025-03-11 22:00:00 KST)" executed successfully
2025-03-11 22:00:00,013 - apscheduler.executors.default - INFO - Running job "AutoAnalyzer._scheduled_analysis (trigger: interval[1:00:00], next run at: 2025-03-11 23:00:00 KST)" (scheduled at 2025-03-11 22:00:00+09:00)
2025-03-11 22:00:00,015 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄된 분석 시작 - 2025-03-11 22:00:00.015005
2025-03-11 22:00:00,015 - telegram_bot.monitors.auto_analyzer - INFO - 마지막 실행 후 3599.9927초 경과 - 스킵
2025-03-11 22:00:00,015 - apscheduler.executors.default - INFO - Job "AutoAnalyzer._scheduled_analysis (trigger: interval[1:00:00], next run at: 2025-03-11 23:00:00 KST)" executed successfully
2025-03-11 23:00:00,011 - apscheduler.executors.default - INFO - Running job "AutoAnalyzer._scheduled_analysis (trigger: interval[1:00:00], next run at: 2025-03-12 00:00:00 KST)" (scheduled at 2025-03-11 23:00:00+09:00)
2025-03-11 23:00:00,013 - telegram_bot.monitors.auto_analyzer - INFO - 스케줄된 분석 시작 - 2025-03-11 23:00:00.013348
2025-03-11 23:00:00,013 - telegram_bot.monitors.auto_analyzer - INFO - 🔄' 1시간봉 분석 시작 (자동) ...
2025-03-11 23:00:00,013 - services.market_data_service - INFO - OHLCV 데이터 조회 시작 - 심볼: BTCUSDT, 시간대: 1h
2025-03-11 23:00:00,633 - ai.gpt_analyzer - INFO - 계산된 지표: ['open', 'high', 'low', 'close', 'volume', 'price_change_24h', 'volume_change_24h', 'rsi', 'macd', 'macd_signal', 'bb_upper', 'bb_middle', 'bb_lower', 'sma_10', 'sma_30', 'adx', 'di_plus', 'di_minus', 'trend', 'trend_strength', 'divergence_type', 'divergence_desc']
2025-03-11 23:00:00,633 - ai.gpt_analyzer - INFO - 시장 데이터: {'symbol': 'BTCUSDT', 'last_price': 53577.0, 'bid': 53481.9, 'ask': 53565.2, 'volume': 395966.289, 'timestamp': None}
2025-03-11 23:00:00,633 - ai.gpt_client - INFO - GPT API 호출 시작 (캐시 사용: False)
2025-03-11 23:00:00,633 - ai.gpt_client - INFO - 캐시 사용하지 않음 - 실제 API 호출
2025-03-11 23:00:04,563 - telegram_bot.formatters.storage_formatter - INFO - 1h 분석 결과 저장 완료: C:\Users\oasis\Aibybit_2\src\data\analysis\analysis_1h.json
2025-03-11 23:00:06,182 - telegram_bot.monitors.auto_analyzer - INFO - 분석 결과 position_suggestion: HOLD
2025-03-11 23:00:06,182 - telegram_bot.monitors.auto_analyzer - INFO - 관망 신호, 자동 매매 실행하지 않음
2025-03-11 23:00:06,182 - apscheduler.executors.default - INFO - Job "AutoAnalyzer._scheduled_analysis (trigger: interval[1:00:00], next run at: 2025-03-12 00:00:00 KST)" executed successfully
